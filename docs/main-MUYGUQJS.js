import{a as V,b as xe,c as uf,d as R,e as Hw,f as uc,g as qw,h as zw,i as Gw,j as cf,k as Ww,l as ra,m as lf,n as cc,o as Kw,p as Qw,q as df,r as Fe,s as ri,t as wn,u as lc,v as ia,w as Yw,x as Zw,y as mr,z as jt}from"./chunk-4ZHOUZTK.js";var ff=null;var hf=1,Jw=Symbol("SIGNAL");function Ce(n){let e=ff;return ff=n,e}function Xw(){return ff}var pf={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ox(n){if(!(_f(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===hf)){if(!n.producerMustRecompute(n)&&!mf(n)){n.dirty=!1,n.lastCleanEpoch=hf;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=hf}}function gf(n){return n&&(n.nextProducerIndex=0),Ce(n)}function eI(n,e){if(Ce(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(_f(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)vf(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function mf(n){wf(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Ox(t),r!==t.version))return!0}return!1}function yf(n){if(wf(n),_f(n))for(let e=0;e<n.producerNode.length;e++)vf(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function vf(n,e){if(Fx(n),n.liveConsumerNode.length===1&&Lx(n))for(let r=0;r<n.producerNode.length;r++)vf(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];wf(i),i.producerIndexOfThis[r]=e}}function _f(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function wf(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Fx(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Lx(n){return n.producerNode!==void 0}function Vx(){throw new Error}var jx=Vx;function tI(n){jx=n}function ne(n){return typeof n=="function"}function io(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var dc=io(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ii(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Be=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ne(r))try{r()}catch(o){e=o instanceof dc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{nI(o)}catch(s){e=e??[],s instanceof dc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new dc(e)}}add(e){var t;if(e&&e!==this)if(this.closed)nI(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ii(t,e)}remove(e){let{_finalizers:t}=this;t&&ii(t,e),e instanceof n&&e._removeParent(this)}};Be.EMPTY=(()=>{let n=new Be;return n.closed=!0,n})();var If=Be.EMPTY;function hc(n){return n instanceof Be||n&&"closed"in n&&ne(n.remove)&&ne(n.add)&&ne(n.unsubscribe)}function nI(n){ne(n)?n():n.unsubscribe()}var un={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var oo={setTimeout(n,e,...t){let{delegate:r}=oo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=oo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function fc(n){oo.setTimeout(()=>{let{onUnhandledError:e}=un;if(e)e(n);else throw n})}function oa(){}var rI=Ef("C",void 0,void 0);function iI(n){return Ef("E",void 0,n)}function oI(n){return Ef("N",n,void 0)}function Ef(n,e,t){return{kind:n,value:e,error:t}}var oi=null;function so(n){if(un.useDeprecatedSynchronousErrorHandling){let e=!oi;if(e&&(oi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=oi;if(oi=null,t)throw r}}else n()}function sI(n){un.useDeprecatedSynchronousErrorHandling&&oi&&(oi.errorThrown=!0,oi.error=n)}var si=class extends Be{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,hc(e)&&e.add(this)):this.destination=$x}static create(e,t,r){return new qn(e,t,r)}next(e){this.isStopped?Cf(oI(e),this):this._next(e)}error(e){this.isStopped?Cf(iI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Cf(rI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Ux=Function.prototype.bind;function Df(n,e){return Ux.call(n,e)}var Tf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){pc(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){pc(r)}else pc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){pc(t)}}},qn=class extends si{constructor(e,t,r){super();let i;if(ne(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&un.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Df(e.next,o),error:e.error&&Df(e.error,o),complete:e.complete&&Df(e.complete,o)}):i=e}this.destination=new Tf(i)}};function pc(n){un.useDeprecatedSynchronousErrorHandling?sI(n):fc(n)}function Bx(n){throw n}function Cf(n,e){let{onStoppedNotification:t}=un;t&&oo.setTimeout(()=>t(n,e))}var $x={closed:!0,next:oa,error:Bx,complete:oa};var ao=typeof Symbol=="function"&&Symbol.observable||"@@observable";function It(n){return n}function bf(...n){return Sf(n)}function Sf(n){return n.length===0?It:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var fe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=qx(t)?t:new qn(t,r,i);return so(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=aI(r),new r((i,o)=>{let s=new qn({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[ao](){return this}pipe(...t){return Sf(t)(this)}toPromise(t){return t=aI(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function aI(n){var e;return(e=n??un.Promise)!==null&&e!==void 0?e:Promise}function Hx(n){return n&&ne(n.next)&&ne(n.error)&&ne(n.complete)}function qx(n){return n&&n instanceof si||Hx(n)&&hc(n)}function Af(n){return ne(n?.lift)}function ue(n){return e=>{if(Af(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function de(n,e,t,r,i){return new xf(n,e,t,r,i)}var xf=class extends si{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function uo(){return ue((n,e)=>{let t=null;n._refCount++;let r=de(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var co=class extends fe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Af(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Be;let t=this.getSubject();e.add(this.source.subscribe(de(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Be.EMPTY)}return e}refCount(){return uo()(this)}};var uI=io(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var qe=(()=>{class n extends fe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new gc(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new uI}next(t){so(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){so(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){so(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?If:(this.currentObservers=null,o.push(t),new Be(()=>{this.currentObservers=null,ii(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new fe;return t.source=this,t}}return n.create=(e,t)=>new gc(e,t),n})(),gc=class extends qe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:If}};var ct=class extends qe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var sa={now(){return(sa.delegate||Date).now()},delegate:void 0};var mc=class extends qe{constructor(e=1/0,t=1/0,r=sa){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var yc=class extends Be{constructor(e,t){super()}schedule(e,t=0){return this}};var aa={setInterval(n,e,...t){let{delegate:r}=aa;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=aa;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var lo=class extends yc{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return aa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&aa.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ii(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ho=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};ho.now=sa.now;var fo=class extends ho{constructor(e,t=ho.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var ua=new fo(lo);var vc=class extends lo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var _c=class extends fo{};var Rf=new _c(vc);var Et=new fe(n=>n.complete());function cI(n){return n&&ne(n.schedule)}function Mf(n){return n[n.length-1]}function lI(n){return ne(Mf(n))?n.pop():void 0}function In(n){return cI(Mf(n))?n.pop():void 0}function dI(n,e){return typeof Mf(n)=="number"?n.pop():e}var wc=n=>n&&typeof n.length=="number"&&typeof n!="function";function Ic(n){return ne(n?.then)}function Ec(n){return ne(n[ao])}function Dc(n){return Symbol.asyncIterator&&ne(n?.[Symbol.asyncIterator])}function Cc(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function zx(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Tc=zx();function bc(n){return ne(n?.[Tc])}function Sc(n){return qw(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield uc(t.read());if(i)return yield uc(void 0);yield yield uc(r)}}finally{t.releaseLock()}})}function Ac(n){return ne(n?.getReader)}function Le(n){if(n instanceof fe)return n;if(n!=null){if(Ec(n))return Gx(n);if(wc(n))return Wx(n);if(Ic(n))return Kx(n);if(Dc(n))return hI(n);if(bc(n))return Qx(n);if(Ac(n))return Yx(n)}throw Cc(n)}function Gx(n){return new fe(e=>{let t=n[ao]();if(ne(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Wx(n){return new fe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Kx(n){return new fe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,fc)})}function Qx(n){return new fe(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function hI(n){return new fe(e=>{Zx(n,e).catch(t=>e.error(t))})}function Yx(n){return hI(Sc(n))}function Zx(n,e){var t,r,i,o;return Hw(this,void 0,void 0,function*(){try{for(t=zw(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Mt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Kt(n,e=0){return ue((t,r)=>{t.subscribe(de(r,i=>Mt(r,n,()=>r.next(i),e),()=>Mt(r,n,()=>r.complete(),e),i=>Mt(r,n,()=>r.error(i),e)))})}function cn(n,e=0){return ue((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function fI(n,e){return Le(n).pipe(cn(e),Kt(e))}function pI(n,e){return Le(n).pipe(cn(e),Kt(e))}function gI(n,e){return new fe(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function mI(n,e){return new fe(t=>{let r;return Mt(t,e,()=>{r=n[Tc](),Mt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ne(r?.return)&&r.return()})}function xc(n,e){if(!n)throw new Error("Iterable cannot be null");return new fe(t=>{Mt(t,e,()=>{let r=n[Symbol.asyncIterator]();Mt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function yI(n,e){return xc(Sc(n),e)}function vI(n,e){if(n!=null){if(Ec(n))return fI(n,e);if(wc(n))return gI(n,e);if(Ic(n))return pI(n,e);if(Dc(n))return xc(n,e);if(bc(n))return mI(n,e);if(Ac(n))return yI(n,e)}throw Cc(n)}function Ee(n,e){return e?vI(n,e):Le(n)}function J(...n){let e=In(n);return Ee(n,e)}function po(n,e){let t=ne(n)?n:()=>n,r=i=>i.error(t());return new fe(e?i=>e.schedule(r,0,i):r)}function Nf(n){return!!n&&(n instanceof fe||ne(n.lift)&&ne(n.subscribe))}var zn=io(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function G(n,e){return ue((t,r)=>{let i=0;t.subscribe(de(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:Jx}=Array;function Xx(n,e){return Jx(e)?n(...e):n(e)}function _I(n){return G(e=>Xx(n,e))}var{isArray:eR}=Array,{getPrototypeOf:tR,prototype:nR,keys:rR}=Object;function wI(n){if(n.length===1){let e=n[0];if(eR(e))return{args:e,keys:null};if(iR(e)){let t=rR(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function iR(n){return n&&typeof n=="object"&&tR(n)===nR}function II(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function ca(...n){let e=In(n),t=lI(n),{args:r,keys:i}=wI(n);if(r.length===0)return Ee([],e);let o=new fe(oR(r,e,i?s=>II(i,s):It));return t?o.pipe(_I(t)):o}function oR(n,e,t=It){return r=>{EI(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)EI(e,()=>{let l=Ee(n[c],e),h=!1;l.subscribe(de(r,p=>{o[c]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function EI(n,e,t){n?Mt(t,n,e):e()}function DI(n,e,t,r,i,o,s,a){let c=[],l=0,h=0,p=!1,m=()=>{p&&!c.length&&!l&&e.complete()},v=M=>l<r?b(M):c.push(M),b=M=>{o&&e.next(M),l++;let N=!1;Le(t(M,h++)).subscribe(de(e,U=>{i?.(U),o?v(U):e.next(U)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;c.length&&l<r;){let U=c.shift();s?Mt(e,s,()=>b(U)):b(U)}m()}catch(U){e.error(U)}}))};return n.subscribe(de(e,v,()=>{p=!0,m()})),()=>{a?.()}}function Qe(n,e,t=1/0){return ne(e)?Qe((r,i)=>G((o,s)=>e(r,o,i,s))(Le(n(r,i))),t):(typeof e=="number"&&(t=e),ue((r,i)=>DI(r,i,n,t)))}function yr(n=1/0){return Qe(It,n)}function CI(){return yr(1)}function go(...n){return CI()(Ee(n,In(n)))}function Rc(n){return new fe(e=>{Le(n()).subscribe(e)})}function Pf(...n){let e=In(n),t=dI(n,1/0),r=n;return r.length?r.length===1?Le(r[0]):yr(t)(Ee(r,e)):Et}function lt(n,e){return ue((t,r)=>{let i=0;t.subscribe(de(r,o=>n.call(e,o,i++)&&r.next(o)))})}function vr(n){return ue((e,t)=>{let r=null,i=!1,o;r=e.subscribe(de(t,void 0,void 0,s=>{o=Le(n(s,vr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function TI(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(de(s,h=>{let p=l++;c=a?n(c,h,p):(a=!0,h),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function ai(n,e){return ne(e)?Qe(n,e,1):Qe(n,1)}function _r(n){return ue((e,t)=>{let r=!1;e.subscribe(de(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Gn(n){return n<=0?()=>Et:ue((e,t)=>{let r=0;e.subscribe(de(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function kf(n){return G(()=>n)}function Of(n,e=It){return n=n??sR,ue((t,r)=>{let i,o=!0;t.subscribe(de(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function sR(n,e){return n===e}function Mc(n=aR){return ue((e,t)=>{let r=!1;e.subscribe(de(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function aR(){return new zn}function la(n){return ue((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Qt(n,e){let t=arguments.length>=2;return r=>r.pipe(n?lt((i,o)=>n(i,o,r)):It,Gn(1),t?_r(e):Mc(()=>new zn))}function mo(n){return n<=0?()=>Et:ue((e,t)=>{let r=[];e.subscribe(de(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Ff(n,e){let t=arguments.length>=2;return r=>r.pipe(n?lt((i,o)=>n(i,o,r)):It,mo(1),t?_r(e):Mc(()=>new zn))}function da(){return ue((n,e)=>{let t,r=!1;n.subscribe(de(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function ui(n,e){return ue(TI(n,e,arguments.length>=2,!0))}function bI(n={}){let{connector:e=()=>new qe,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,l=0,h=!1,p=!1,m=()=>{a?.unsubscribe(),a=void 0},v=()=>{m(),s=c=void 0,h=p=!1},b=()=>{let M=s;v(),M?.unsubscribe()};return ue((M,N)=>{l++,!p&&!h&&m();let U=c=c??e();N.add(()=>{l--,l===0&&!p&&!h&&(a=Lf(b,i))}),U.subscribe(N),!s&&l>0&&(s=new qn({next:q=>U.next(q),error:q=>{p=!0,m(),a=Lf(v,t,q),U.error(q)},complete:()=>{h=!0,m(),a=Lf(v,r),U.complete()}}),Le(M).subscribe(s))})(o)}}function Lf(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new qn({next:()=>{r.unsubscribe(),n()}});return Le(e(...t)).subscribe(r)}function Nc(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,bI({connector:()=>new mc(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function ci(...n){let e=In(n);return ue((t,r)=>{(e?go(n,t,e):go(n,t)).subscribe(r)})}function $e(n,e){return ue((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(de(r,c=>{i?.unsubscribe();let l=0,h=o++;Le(n(c,h)).subscribe(i=de(r,p=>r.next(e?e(c,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Pc(n,e){return ne(e)?$e(()=>n,e):$e(()=>n)}function Vf(n){return ue((e,t)=>{Le(n).subscribe(de(t,()=>t.complete(),oa)),!t.closed&&e.subscribe(t)})}function nt(n,e,t){let r=ne(n)||e||t?{next:n,error:e,complete:t}:n;return r?ue((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(de(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):It}var cE="https://g.co/ng/security#xss",X=class extends Error{constructor(e,t){super(Rp(e,t)),this.code=e}};function Rp(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Da(n){return{toString:n}.toString()}var kc="__parameters__";function uR(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function lE(n,e,t){return Da(()=>{let r=uR(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,h){let p=c.hasOwnProperty(kc)?c[kc]:Object.defineProperty(c,kc,{value:[]})[kc];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Qn=globalThis;function Se(n){for(let e in n)if(n[e]===Se)return e;throw Error("Could not find renamed property on target object.")}function Ut(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Ut).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function SI(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var cR=Se({__forward_ref__:Se});function dE(n){return n.__forward_ref__=dE,n.toString=function(){return Ut(this())},n}function Zt(n){return hE(n)?n():n}function hE(n){return typeof n=="function"&&n.hasOwnProperty(cR)&&n.__forward_ref__===dE}function H(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Tt(n){return{providers:n.providers||[],imports:n.imports||[]}}function fl(n){return AI(n,pE)||AI(n,gE)}function fE(n){return fl(n)!==null}function AI(n,e){return n.hasOwnProperty(e)?n[e]:null}function lR(n){let e=n&&(n[pE]||n[gE]);return e||null}function xI(n){return n&&(n.hasOwnProperty(RI)||n.hasOwnProperty(dR))?n[RI]:null}var pE=Se({\u0275prov:Se}),RI=Se({\u0275inj:Se}),gE=Se({ngInjectableDef:Se}),dR=Se({ngInjectorDef:Se}),W=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=H({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function mE(n){return n&&!!n.\u0275providers}var hR=Se({\u0275cmp:Se}),fR=Se({\u0275dir:Se}),pR=Se({\u0275pipe:Se}),gR=Se({\u0275mod:Se}),Bc=Se({\u0275fac:Se}),fa=Se({__NG_ELEMENT_ID__:Se}),MI=Se({__NG_ENV_ID__:Se});function ga(n){return typeof n=="string"?n:n==null?"":String(n)}function mR(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():ga(n)}function yR(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new X(-200,n)}function Mp(n,e){throw new X(-201,!1)}var ce=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ce||{}),Wf;function yE(){return Wf}function Yt(n){let e=Wf;return Wf=n,e}function vE(n,e,t){let r=fl(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ce.Optional)return null;if(e!==void 0)return e;Mp(n,"Injector")}var vR={},ma=vR,Kf="__NG_DI_FLAG__",$c="ngTempTokenPath",_R="ngTokenPath",wR=/\n/gm,IR="\u0275",NI="__source",Io;function ER(){return Io}function wr(n){let e=Io;return Io=n,e}function DR(n,e=ce.Default){if(Io===void 0)throw new X(-203,!1);return Io===null?vE(n,void 0,e):Io.get(n,e&ce.Optional?null:void 0,e)}function O(n,e=ce.Default){return(yE()||DR)(Zt(n),e)}function j(n,e=ce.Default){return O(n,pl(e))}function pl(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Qf(n){let e=[];for(let t=0;t<n.length;t++){let r=Zt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new X(900,!1);let i,o=ce.Default;for(let s=0;s<r.length;s++){let a=r[s],c=CR(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(O(i,o))}else e.push(O(r))}return e}function _E(n,e){return n[Kf]=e,n.prototype[Kf]=e,n}function CR(n){return n[Kf]}function TR(n,e,t,r){let i=n[$c];throw e[NI]&&i.unshift(e[NI]),n.message=bR(`
`+n.message,i,t,r),n[_R]=i,n[$c]=null,n}function bR(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==IR?n.slice(2):n;let i=Ut(e);if(Array.isArray(e))i=e.map(Ut).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Ut(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(wR,`
  `)}`}var No=_E(lE("Optional"),8);var Np=_E(lE("SkipSelf"),4);function Do(n,e){let t=n.hasOwnProperty(Bc);return t?n[Bc]:null}function Pp(n,e){n.forEach(t=>Array.isArray(t)?Pp(t,e):e(t))}function wE(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Hc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}var ya={},En=[],Co=new W(""),IE=new W("",-1),EE=new W(""),qc=class{get(e,t=ma){if(t===ma){let r=new Error(`NullInjectorError: No provider for ${Ut(e)}!`);throw r.name="NullInjectorError",r}return t}},DE=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(DE||{}),Cn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Cn||{}),Dr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Dr||{});function SR(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function Yf(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];xR(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function AR(n){return n===3||n===4||n===6}function xR(n){return n.charCodeAt(0)===64}function kp(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?PI(n,t,i,null,e[++r]):PI(n,t,i,null,null))}}return n}function PI(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var CE="ng-template";function RR(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&SR(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Op(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Op(n){return n.type===4&&n.value!==CE}function MR(n,e,t){let r=n.type===4&&!t?CE:n.value;return e===r}function NR(n,e,t){let r=4,i=n.attrs,o=i!==null?OR(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!ln(r)&&!ln(c))return!1;if(s&&ln(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!MR(n,c,t)||c===""&&e.length===1){if(ln(r))return!1;s=!0}}else if(r&8){if(i===null||!RR(n,i,c,t)){if(ln(r))return!1;s=!0}}else{let l=e[++a],h=PR(c,i,Op(n),t);if(h===-1){if(ln(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(ln(r))return!1;s=!0}}}}return ln(r)||s}function ln(n){return(n&1)===0}function PR(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return FR(e,n)}function kR(n,e,t=!1){for(let r=0;r<e.length;r++)if(NR(n,e[r],t))return!0;return!1}function OR(n){for(let e=0;e<n.length;e++){let t=n[e];if(AR(t))return e}return n.length}function FR(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function kI(n,e){return n?":not("+e.trim()+")":e}function LR(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!ln(s)&&(e+=kI(o,i),i=""),r=s,o=o||!ln(r);t++}return i!==""&&(e+=kI(o,i)),e}function VR(n){return n.map(LR).join(",")}function jR(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!ln(i))break;i=o}r++}return{attrs:e,classes:t}}function st(n){return Da(()=>{let e=xE(n),t=xe(V({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===DE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Cn.Emulated,styles:n.styles||En,_:null,schemas:n.schemas||null,tView:null,id:""});RE(t);let r=n.dependencies;return t.directiveDefs=FI(r,!1),t.pipeDefs=FI(r,!0),t.id=$R(t),t})}function UR(n){return Cr(n)||TE(n)}function BR(n){return n!==null}function bt(n){return Da(()=>({type:n.type,bootstrap:n.bootstrap||En,declarations:n.declarations||En,imports:n.imports||En,exports:n.exports||En,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function OI(n,e){if(n==null)return ya;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Dr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Dr.None?[r,a]:r,e[o]=s):t[o]=r}return t}function gl(n){return Da(()=>{let e=xE(n);return RE(e),e})}function Cr(n){return n[hR]||null}function TE(n){return n[fR]||null}function bE(n){return n[pR]||null}function SE(n){let e=Cr(n)||TE(n)||bE(n);return e!==null?e.standalone:!1}function AE(n,e){let t=n[gR]||null;if(!t&&e===!0)throw new Error(`Type ${Ut(n)} does not have '\u0275mod' property.`);return t}function xE(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||ya,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||En,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:OI(n.inputs,e),outputs:OI(n.outputs),debugInfo:null}}function RE(n){n.features?.forEach(e=>e(n))}function FI(n,e){if(!n)return null;let t=e?bE:UR;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(BR)}function $R(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function HR(...n){return{\u0275providers:ME(!0,n),\u0275fromNgModule:!0}}function ME(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Pp(e,s=>{let a=s;Zf(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&NE(i,o),t}function NE(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Fp(i,o=>{e(o,r)})}}function Zf(n,e,t,r){if(n=Zt(n),!n)return!1;let i=null,o=xI(n),s=!o&&Cr(n);if(!o&&!s){let c=n.ngModule;if(o=xI(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)Zf(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Pp(o.imports,h=>{Zf(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&NE(l,e)}if(!a){let l=Do(i)||(()=>new i);e({provide:i,useFactory:l,deps:En},i),e({provide:EE,useValue:i,multi:!0},i),e({provide:Co,useValue:()=>O(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;Fp(c,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Fp(n,e){for(let t of n)mE(t)&&(t=t.\u0275providers),Array.isArray(t)?Fp(t,e):e(t)}var qR=Se({provide:String,useValue:Se});function PE(n){return n!==null&&typeof n=="object"&&qR in n}function zR(n){return!!(n&&n.useExisting)}function GR(n){return!!(n&&n.useFactory)}function Jf(n){return typeof n=="function"}var ml=new W(""),Lc={},WR={},jf;function Lp(){return jf===void 0&&(jf=new qc),jf}var Bt=class{},va=class extends Bt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ep(e,s=>this.processProvider(s)),this.records.set(IE,yo(void 0,this)),i.has("environment")&&this.records.set(Bt,yo(void 0,this));let o=this.records.get(ml);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(EE,En,ce.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ce(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ce(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=wr(this),r=Yt(void 0),i;try{return e()}finally{wr(t),Yt(r)}}get(e,t=ma,r=ce.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(MI))return e[MI](this);r=pl(r);let i,o=wr(this),s=Yt(void 0);try{if(!(r&ce.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=XR(e)&&fl(e);l&&this.injectableDefInScope(l)?c=yo(Xf(e),Lc):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&ce.Self?Lp():this.parent;return t=r&ce.Optional&&t===ma?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[$c]=a[$c]||[]).unshift(Ut(e)),o)throw a;return TR(a,e,"R3InjectorError",this.source)}else throw a}finally{Yt(s),wr(o)}}resolveInjectorInitializers(){let e=Ce(null),t=wr(this),r=Yt(void 0),i;try{let o=this.get(Co,En,ce.Self);for(let s of o)s()}finally{wr(t),Yt(r),Ce(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Ut(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new X(205,!1)}processProvider(e){e=Zt(e);let t=Jf(e)?e:Zt(e&&e.provide),r=QR(e);if(!Jf(e)&&e.multi===!0){let i=this.records.get(t);i||(i=yo(void 0,Lc,!0),i.factory=()=>Qf(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Ce(null);try{return t.value===Lc&&(t.value=WR,t.value=t.factory()),typeof t.value=="object"&&t.value&&JR(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ce(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Zt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Xf(n){let e=fl(n),t=e!==null?e.factory:Do(n);if(t!==null)return t;if(n instanceof W)throw new X(204,!1);if(n instanceof Function)return KR(n);throw new X(204,!1)}function KR(n){if(n.length>0)throw new X(204,!1);let t=lR(n);return t!==null?()=>t.factory(n):()=>new n}function QR(n){if(PE(n))return yo(void 0,n.useValue);{let e=YR(n);return yo(e,Lc)}}function YR(n,e,t){let r;if(Jf(n)){let i=Zt(n);return Do(i)||Xf(i)}else if(PE(n))r=()=>Zt(n.useValue);else if(GR(n))r=()=>n.useFactory(...Qf(n.deps||[]));else if(zR(n))r=()=>O(Zt(n.useExisting));else{let i=Zt(n&&(n.useClass||n.provide));if(ZR(n))r=()=>new i(...Qf(n.deps));else return Do(i)||Xf(i)}return r}function yo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function ZR(n){return!!n.deps}function JR(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function XR(n){return typeof n=="function"||typeof n=="object"&&n instanceof W}function ep(n,e){for(let t of n)Array.isArray(t)?ep(t,e):t&&mE(t)?ep(t.\u0275providers,e):e(t)}function Sn(n,e){n instanceof va&&n.assertNotDestroyed();let t,r=wr(n),i=Yt(void 0);try{return e()}finally{wr(r),Yt(i)}}function kE(){return yE()!==void 0||ER()!=null}function eM(n){if(!kE())throw new X(-203,!1)}function tM(n){let e=Qn.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function nM(n){return typeof n=="function"}var Yn=0,pe=1,re=2,Ct=3,dn=4,hn=5,zc=6,LI=7,Tr=8,To=9,Tn=10,Nt=11,_a=12,VI=13,Ca=14,bn=15,bo=16,vo=17,So=18,yl=19,OE=20,Er=21,Uf=22,Jt=23,br=25,FE=1;var hi=7,Gc=8,Wc=9,Xt=10,Kc=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Kc||{});function li(n){return Array.isArray(n)&&typeof n[FE]=="object"}function Zn(n){return Array.isArray(n)&&n[FE]===!0}function LE(n){return(n.flags&4)!==0}function vl(n){return n.componentOffset>-1}function VE(n){return(n.flags&1)===1}function Ta(n){return!!n.template}function tp(n){return(n[re]&512)!==0}var np=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function jE(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function _l(){return UE}function UE(n){return n.type.prototype.ngOnChanges&&(n.setInput=iM),rM}_l.ngInherit=!0;function rM(){let n=$E(this),e=n?.current;if(e){let t=n.previous;if(t===ya)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function iM(n,e,t,r,i){let o=this.declaredInputs[r],s=$E(n)||oM(n,{previous:ya,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new np(l&&l.currentValue,t,c===ya),jE(n,e,i,t)}var BE="__ngSimpleChanges__";function $E(n){return n[BE]||null}function oM(n,e){return n[BE]=e}var jI=null;var Ir=function(n,e,t){jI?.(n,e,t)},sM="svg",aM="math";function Wn(n){for(;Array.isArray(n);)n=n[Yn];return n}function uM(n,e){return Wn(e[n])}function An(n,e){return Wn(e[n.index])}function HE(n,e){return n.data[e]}function Po(n,e){let t=e[n];return li(t)?t:t[Yn]}function Vp(n){return(n[re]&128)===128}function cM(n){return Zn(n[Ct])}function Qc(n,e){return e==null?null:n[e]}function qE(n){n[vo]=0}function zE(n){n[re]&1024||(n[re]|=1024,Vp(n)&&Il(n))}function wl(n){return!!(n[re]&9216||n[Jt]?.dirty)}function rp(n){n[Tn].changeDetectionScheduler?.notify(8),n[re]&64&&(n[re]|=1024),wl(n)&&Il(n)}function Il(n){n[Tn].changeDetectionScheduler?.notify(0);let e=fi(n);for(;e!==null&&!(e[re]&8192||(e[re]|=8192,!Vp(e)));)e=fi(e)}function GE(n,e){if((n[re]&256)===256)throw new X(911,!1);n[Er]===null&&(n[Er]=[]),n[Er].push(e)}function lM(n,e){if(n[Er]===null)return;let t=n[Er].indexOf(e);t!==-1&&n[Er].splice(t,1)}function fi(n){let e=n[Ct];return Zn(e)?e[Ct]:e}var Ie={lFrame:nD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var WE=!1;function dM(){return Ie.lFrame.elementDepthCount}function hM(){Ie.lFrame.elementDepthCount++}function fM(){Ie.lFrame.elementDepthCount--}function KE(){return Ie.bindingsEnabled}function pM(){return Ie.skipHydrationRootTNode!==null}function gM(n){return Ie.skipHydrationRootTNode===n}function mM(){Ie.skipHydrationRootTNode=null}function rt(){return Ie.lFrame.lView}function yi(){return Ie.lFrame.tView}function xn(){let n=QE();for(;n!==null&&n.type===64;)n=n.parent;return n}function QE(){return Ie.lFrame.currentTNode}function yM(){let n=Ie.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ba(n,e){let t=Ie.lFrame;t.currentTNode=n,t.isParent=e}function YE(){return Ie.lFrame.isParent}function vM(){Ie.lFrame.isParent=!1}function ZE(){return WE}function UI(n){WE=n}function _M(){return Ie.lFrame.bindingIndex}function wM(n){return Ie.lFrame.bindingIndex=n}function JE(){return Ie.lFrame.bindingIndex++}function IM(n){let e=Ie.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function EM(){return Ie.lFrame.inI18n}function DM(n,e){let t=Ie.lFrame;t.bindingIndex=t.bindingRootIndex=n,ip(e)}function CM(){return Ie.lFrame.currentDirectiveIndex}function ip(n){Ie.lFrame.currentDirectiveIndex=n}function XE(n){Ie.lFrame.currentQueryIndex=n}function TM(n){let e=n[pe];return e.type===2?e.declTNode:e.type===1?n[hn]:null}function eD(n,e,t){if(t&ce.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&ce.Host);)if(i=TM(o),i===null||(o=o[Ca],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=Ie.lFrame=tD();return r.currentTNode=e,r.lView=n,!0}function jp(n){let e=tD(),t=n[pe];Ie.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function tD(){let n=Ie.lFrame,e=n===null?null:n.child;return e===null?nD(n):e}function nD(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function rD(){let n=Ie.lFrame;return Ie.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var iD=rD;function Up(){let n=rD();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function El(){return Ie.lFrame.selectedIndex}function pi(n){Ie.lFrame.selectedIndex=n}function oD(){let n=Ie.lFrame;return HE(n.tView,n.selectedIndex)}function bM(){return Ie.lFrame.currentNamespace}var sD=!0;function Bp(){return sD}function $p(n){sD=n}function SM(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=UE(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Hp(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Vc(n,e,t){aD(n,e,3,t)}function jc(n,e,t,r){(n[re]&3)===t&&aD(n,e,t,r)}function Bf(n,e){let t=n[re];(t&3)===e&&(t&=16383,t+=1,n[re]=t)}function aD(n,e,t,r){let i=r!==void 0?n[vo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[vo]+=65536),(a<o||o==-1)&&(AM(n,t,e,c),n[vo]=(n[vo]&4294901760)+c+2),c++}function BI(n,e){Ir(4,n,e);let t=Ce(null);try{e.call(n)}finally{Ce(t),Ir(5,n,e)}}function AM(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[re]>>14<n[vo]>>16&&(n[re]&3)===e&&(n[re]+=16384,BI(a,o)):BI(a,o)}var Eo=-1,wa=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function xM(n){return n instanceof wa}function RM(n){return(n.flags&8)!==0}function MM(n){return(n.flags&16)!==0}var $f={},op=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=pl(r);let i=this.injector.get(e,$f,r);return i!==$f||t===$f?i:this.parentInjector.get(e,t,r)}};function uD(n){return n!==Eo}function Yc(n){return n&32767}function NM(n){return n>>16}function Zc(n,e){let t=NM(n),r=e;for(;t>0;)r=r[Ca],t--;return r}var sp=!0;function $I(n){let e=sp;return sp=n,e}var PM=256,cD=PM-1,lD=5,kM=0,Dn={};function OM(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(fa)&&(r=t[fa]),r==null&&(r=t[fa]=kM++);let i=r&cD,o=1<<i;e.data[n+(i>>lD)]|=o}function dD(n,e){let t=hD(n,e);if(t!==-1)return t;let r=e[pe];r.firstCreatePass&&(n.injectorIndex=e.length,Hf(r.data,n),Hf(e,null),Hf(r.blueprint,null));let i=qp(n,e),o=n.injectorIndex;if(uD(i)){let s=Yc(i),a=Zc(i,e),c=a[pe].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function Hf(n,e){n.push(0,0,0,0,0,0,0,0,e)}function hD(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function qp(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=yD(i),r===null)return Eo;if(t++,i=i[Ca],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Eo}function FM(n,e,t){OM(n,e,t)}function fD(n,e,t){if(t&ce.Optional||n!==void 0)return n;Mp(e,"NodeInjector")}function pD(n,e,t,r){if(t&ce.Optional&&r===void 0&&(r=null),!(t&(ce.Self|ce.Host))){let i=n[To],o=Yt(void 0);try{return i?i.get(e,r,t&ce.Optional):vE(e,r,t&ce.Optional)}finally{Yt(o)}}return fD(r,e,t)}function gD(n,e,t,r=ce.Default,i){if(n!==null){if(e[re]&2048&&!(r&ce.Self)){let s=BM(n,e,t,r,Dn);if(s!==Dn)return s}let o=mD(n,e,t,r,Dn);if(o!==Dn)return o}return pD(e,t,r,i)}function mD(n,e,t,r,i){let o=jM(t);if(typeof o=="function"){if(!eD(e,n,r))return r&ce.Host?fD(i,t,r):pD(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&ce.Optional))Mp(t);else return s}finally{iD()}}else if(typeof o=="number"){let s=null,a=hD(n,e),c=Eo,l=r&ce.Host?e[bn][hn]:null;for((a===-1||r&ce.SkipSelf)&&(c=a===-1?qp(n,e):e[a+8],c===Eo||!qI(r,!1)?a=-1:(s=e[pe],a=Yc(c),e=Zc(c,e)));a!==-1;){let h=e[pe];if(HI(o,a,h.data)){let p=LM(a,e,t,s,r,l);if(p!==Dn)return p}c=e[a+8],c!==Eo&&qI(r,e[pe].data[a+8]===l)&&HI(o,a,e)?(s=h,a=Yc(c),e=Zc(c,e)):a=-1}}return i}function LM(n,e,t,r,i,o){let s=e[pe],a=s.data[n+8],c=r==null?vl(a)&&sp:r!=s&&(a.type&3)!==0,l=i&ce.Host&&o===a,h=VM(a,s,t,c,l);return h!==null?Ia(e,s,h,a):Dn}function VM(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let v=p;v<m;v++){let b=s[v];if(v<c&&t===b||v>=c&&b.type===t)return v}if(i){let v=s[c];if(v&&Ta(v)&&v.type===t)return c}return null}function Ia(n,e,t,r){let i=n[t],o=e.data;if(xM(i)){let s=i;s.resolving&&yR(mR(o[t]));let a=$I(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?Yt(s.injectImpl):null,h=eD(n,r,ce.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&SM(t,o[t],e)}finally{l!==null&&Yt(l),$I(a),s.resolving=!1,iD()}}return i}function jM(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(fa)?n[fa]:void 0;return typeof e=="number"?e>=0?e&cD:UM:e}function HI(n,e,t){let r=1<<n;return!!(t[e+(n>>lD)]&r)}function qI(n,e){return!(n&ce.Self)&&!(n&ce.Host&&e)}var di=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return gD(this._tNode,this._lView,e,pl(r),t)}};function UM(){return new di(xn(),rt())}function zp(n){return Da(()=>{let e=n.prototype.constructor,t=e[Bc]||ap(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Bc]||ap(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function ap(n){return hE(n)?()=>{let e=ap(Zt(n));return e&&e()}:Do(n)}function BM(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[re]&2048&&!(s[re]&512);){let a=mD(o,s,t,r|ce.Self,Dn);if(a!==Dn)return a;let c=o.parent;if(!c){let l=s[OE];if(l){let h=l.get(t,Dn,r);if(h!==Dn)return h}c=yD(s),s=s[Ca]}o=c}return i}function yD(n){let e=n[pe],t=e.type;return t===2?e.declTNode:t===1?n[hn]:null}function zI(n,e=null,t=null,r){let i=vD(n,e,t,r);return i.resolveInjectorInitializers(),i}function vD(n,e=null,t=null,r,i=new Set){let o=[t||En,HR(n)];return r=r||(typeof n=="object"?void 0:Ut(n)),new va(o,e||Lp(),r||null,i)}var en=class n{static{this.THROW_IF_NOT_FOUND=ma}static{this.NULL=new qc}static create(e,t){if(Array.isArray(e))return zI({name:""},t,e,"");{let r=e.name??"";return zI({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=H({token:n,providedIn:"any",factory:()=>O(IE)})}static{this.__NG_ELEMENT_ID__=-1}};var $M=new W("");$M.__NG_ELEMENT_ID__=n=>{let e=xn();if(e===null)throw new X(204,!1);if(e.type&2)return e.value;if(n&ce.Optional)return null;throw new X(204,!1)};var HM="ngOriginalError";function qf(n){return n[HM]}var _D=!0,Gp=(()=>{class n{static{this.__NG_ELEMENT_ID__=qM}static{this.__NG_ENV_ID__=t=>t}}return n})(),up=class extends Gp{constructor(e){super(),this._lView=e}onDestroy(e){return GE(this._lView,e),()=>lM(this._lView,e)}};function qM(){return new up(rt())}var ko=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ct(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}}return n})();var cp=class extends qe{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,kE()&&(this.destroyRef=j(Gp,{optional:!0})??void 0,this.pendingTasks=j(ko,{optional:!0})??void 0)}emit(e){let t=Ce(null);try{super.next(e)}finally{Ce(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Be&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Dt=cp;function Jc(...n){}function wD(n){let e,t;function r(){n=Jc;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function GI(n){return queueMicrotask(()=>n()),()=>{n=Jc}}var Wp="isAngularZone",Xc=Wp+"_ID",zM=0,me=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Dt(!1),this.onMicrotaskEmpty=new Dt(!1),this.onStable=new Dt(!1),this.onError=new Dt(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=_D}=e;if(typeof Zone>"u")throw new X(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,KM(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Wp)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new X(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new X(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,GM,Jc,Jc);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},GM={};function Kp(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function WM(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){wD(()=>{n.callbackScheduled=!1,lp(n),n.isCheckStableRunning=!0,Kp(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),lp(n)}function KM(n){let e=()=>{WM(n)},t=zM++;n._inner=n._inner.fork({name:"angular",properties:{[Wp]:!0,[Xc]:t,[Xc+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(QM(c))return r.invokeTask(o,s,a,c);try{return WI(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),KI(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return WI(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!YM(c)&&e(),KI(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,lp(n),Kp(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function lp(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function WI(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function KI(n){n._nesting--,Kp(n)}var el=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Dt,this.onMicrotaskEmpty=new Dt,this.onStable=new Dt,this.onError=new Dt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function QM(n){return ID(n,"__ignore_ng_zone__")}function YM(n){return ID(n,"__scheduler_tick__")}function ID(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function ZM(n="zone.js",e){return n==="noop"?new el:n==="zone.js"?new me(e):n}var Kn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&qf(e);for(;t&&qf(t);)t=qf(t);return t||null}},JM=new W("",{providedIn:"root",factory:()=>{let n=j(me),e=j(Kn);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function XM(){return Dl(xn(),rt())}function Dl(n,e){return new Cl(An(n,e))}var Cl=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=XM}}return n})();function ED(n){return(n.flags&128)===128}var DD=new Map,eN=0;function tN(){return eN++}function nN(n){DD.set(n[yl],n)}function dp(n){DD.delete(n[yl])}var QI="__ngContext__";function gi(n,e){li(e)?(n[QI]=e[yl],nN(e)):n[QI]=e}function CD(n){return bD(n[_a])}function TD(n){return bD(n[dn])}function bD(n){for(;n!==null&&!Zn(n);)n=n[dn];return n}var hp;function SD(n){hp=n}function rN(){if(hp!==void 0)return hp;if(typeof document<"u")return document;throw new X(210,!1)}var Tl=new W("",{providedIn:"root",factory:()=>iN}),iN="ng",Qp=new W(""),Pt=new W("",{providedIn:"platform",factory:()=>"unknown"});var Yp=new W("",{providedIn:"root",factory:()=>rN().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var oN="h",sN="b";var aN=()=>null;function Zp(n,e,t=!1){return aN(n,e,t)}var AD=!1,uN=new W("",{providedIn:"root",factory:()=>AD});var tl=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${cE})`}};function Jp(n){return n instanceof tl?n.changingThisBreaksApplicationSecurity:n}function xD(n,e){let t=cN(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${cE})`)}return t===e}function cN(n){return n instanceof tl&&n.getTypeName()||null}var lN=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function RD(n){return n=String(n),n.match(lN)?n:"unsafe:"+n}var Xp=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Xp||{});function MD(n){let e=dN();return e?e.sanitize(Xp.URL,n)||"":xD(n,"URL")?Jp(n):RD(ga(n))}function dN(){let n=rt();return n&&n[Tn].sanitizer}function ND(n){return n instanceof Function?n():n}function hN(n){return(n??j(en)).get(Pt)==="browser"}var vi=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(vi||{}),fN;function eg(n,e){return fN(n,e)}function _o(n,e,t,r,i){if(r!=null){let o,s=!1;Zn(r)?o=r:li(r)&&(s=!0,r=r[Yn]);let a=Wn(r);n===0&&t!==null?i==null?LD(e,t,a):nl(e,t,a,i||null,!0):n===1&&t!==null?nl(e,t,a,i||null,!0):n===2?AN(e,a,s):n===3&&e.destroyNode(a),o!=null&&RN(e,n,o,t,i)}}function pN(n,e){return n.createText(e)}function gN(n,e,t){n.setValue(e,t)}function PD(n,e,t){return n.createElement(e,t)}function mN(n,e){kD(n,e),e[Yn]=null,e[hn]=null}function yN(n,e,t,r,i,o){r[Yn]=i,r[hn]=e,bl(n,r,t,1,i,o)}function kD(n,e){e[Tn].changeDetectionScheduler?.notify(9),bl(n,e,e[Nt],2,null,null)}function vN(n){let e=n[_a];if(!e)return zf(n[pe],n);for(;e;){let t=null;if(li(e))t=e[_a];else{let r=e[Xt];r&&(t=r)}if(!t){for(;e&&!e[dn]&&e!==n;)li(e)&&zf(e[pe],e),e=e[Ct];e===null&&(e=n),li(e)&&zf(e[pe],e),t=e&&e[dn]}e=t}}function _N(n,e,t,r){let i=Xt+r,o=t.length;r>0&&(t[i-1][dn]=e),r<o-Xt?(e[dn]=t[i],wE(t,Xt+r,e)):(t.push(e),e[dn]=null),e[Ct]=t;let s=e[bo];s!==null&&t!==s&&OD(s,e);let a=e[So];a!==null&&a.insertView(n),rp(e),e[re]|=128}function OD(n,e){let t=n[Wc],r=e[Ct];if(li(r))n[re]|=Kc.HasTransplantedViews;else{let i=r[Ct][bn];e[bn]!==i&&(n[re]|=Kc.HasTransplantedViews)}t===null?n[Wc]=[e]:t.push(e)}function tg(n,e){let t=n[Wc],r=t.indexOf(e);t.splice(r,1)}function fp(n,e){if(n.length<=Xt)return;let t=Xt+e,r=n[t];if(r){let i=r[bo];i!==null&&i!==n&&tg(i,r),e>0&&(n[t-1][dn]=r[dn]);let o=Hc(n,Xt+e);mN(r[pe],r);let s=o[So];s!==null&&s.detachView(o[pe]),r[Ct]=null,r[dn]=null,r[re]&=-129}return r}function FD(n,e){if(!(e[re]&256)){let t=e[Nt];t.destroyNode&&bl(n,e,t,3,null,null),vN(e)}}function zf(n,e){if(e[re]&256)return;let t=Ce(null);try{e[re]&=-129,e[re]|=256,e[Jt]&&yf(e[Jt]),IN(n,e),wN(n,e),e[pe].type===1&&e[Nt].destroy();let r=e[bo];if(r!==null&&Zn(e[Ct])){r!==e[Ct]&&tg(r,e);let i=e[So];i!==null&&i.detachView(n)}dp(e)}finally{Ce(t)}}function wN(n,e){let t=n.cleanup,r=e[LI];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[LI]=null);let i=e[Er];if(i!==null){e[Er]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function IN(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof wa)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Ir(4,a,c);try{c.call(a)}finally{Ir(5,a,c)}}else{Ir(4,i,o);try{o.call(i)}finally{Ir(5,i,o)}}}}}function EN(n,e,t){return DN(n,e.parent,t)}function DN(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Yn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Cn.None||o===Cn.Emulated)return null}return An(r,t)}}function nl(n,e,t,r,i){n.insertBefore(e,t,r,i)}function LD(n,e,t){n.appendChild(e,t)}function YI(n,e,t,r,i){r!==null?nl(n,e,t,r,i):LD(n,e,t)}function VD(n,e){return n.parentNode(e)}function CN(n,e){return n.nextSibling(e)}function TN(n,e,t){return SN(n,e,t)}function bN(n,e,t){return n.type&40?An(n,t):null}var SN=bN,ZI;function ng(n,e,t,r){let i=EN(n,r,e),o=e[Nt],s=r.parent||e[hn],a=TN(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)YI(o,i,t[c],a,!1);else YI(o,i,t,a,!1);ZI!==void 0&&ZI(o,r,e,t,i)}function ha(n,e){if(e!==null){let t=e.type;if(t&3)return An(e,n);if(t&4)return pp(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return ha(n,r);{let i=n[e.index];return Zn(i)?pp(-1,i):Wn(i)}}else{if(t&128)return ha(n,e.next);if(t&32)return eg(e,n)()||Wn(n[e.index]);{let r=jD(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=fi(n[bn]);return ha(i,r)}else return ha(n,e.next)}}}return null}function jD(n,e){if(e!==null){let r=n[bn][hn],i=e.projection;return r.projection[i]}return null}function pp(n,e){let t=Xt+n+1;if(t<e.length){let r=e[t],i=r[pe].firstChild;if(i!==null)return ha(r,i)}return e[hi]}function AN(n,e,t){n.removeChild(null,e,t)}function rg(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&gi(Wn(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)rg(n,e,t.child,r,i,o,!1),_o(e,n,i,a,o);else if(c&32){let l=eg(t,r),h;for(;h=l();)_o(e,n,i,h,o);_o(e,n,i,a,o)}else c&16?xN(n,e,r,t,i,o):_o(e,n,i,a,o);t=s?t.projectionNext:t.next}}function bl(n,e,t,r,i,o){rg(t,r,n.firstChild,e,i,o,!1)}function xN(n,e,t,r,i,o){let s=t[bn],c=s[hn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let h=c[l];_o(e,n,i,h,o)}else{let l=c,h=s[Ct];ED(r)&&(l.flags|=128),rg(n,e,l,h,i,o,!0)}}function RN(n,e,t,r,i){let o=t[hi],s=Wn(t);o!==s&&_o(e,n,r,o,i);for(let a=Xt;a<t.length;a++){let c=t[a];bl(c[pe],c,n,e,r,o)}}function MN(n,e,t){n.setAttribute(e,"style",t)}function UD(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function BD(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Yf(n,e,r),i!==null&&UD(n,e,i),o!==null&&MN(n,e,o)}var _i={};function ge(n=1){$D(yi(),rt(),El()+n,!1)}function $D(n,e,t,r){if(!r)if((e[re]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Vc(e,o,t)}else{let o=n.preOrderHooks;o!==null&&jc(e,o,0,t)}pi(t)}function Ye(n,e=ce.Default){let t=rt();if(t===null)return O(n,e);let r=xn();return gD(r,t,Zt(n),e)}function HD(){let n="invalid";throw new Error(n)}function qD(n,e,t,r,i,o){let s=Ce(null);try{let a=null;i&Dr.SignalBased&&(a=e[r][Jw]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Dr.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):jE(e,a,r,o)}finally{Ce(s)}}function NN(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)pi(~i);else{let o=i,s=t[++r],a=t[++r];DM(s,o);let c=e[o];a(2,c)}}}finally{pi(-1)}}function Sl(n,e,t,r,i,o,s,a,c,l,h){let p=e.blueprint.slice();return p[Yn]=i,p[re]=r|4|128|8|64,(l!==null||n&&n[re]&2048)&&(p[re]|=2048),qE(p),p[Ct]=p[Ca]=n,p[Tr]=t,p[Tn]=s||n&&n[Tn],p[Nt]=a||n&&n[Nt],p[To]=c||n&&n[To]||null,p[hn]=o,p[yl]=tN(),p[zc]=h,p[OE]=l,p[bn]=e.type==2?n[bn]:p,p}function Al(n,e,t,r,i){let o=n.data[e];if(o===null)o=PN(n,e,t,r,i),EM()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=yM();o.injectorIndex=s===null?-1:s.injectorIndex}return ba(o,!0),o}function PN(n,e,t,r,i){let o=QE(),s=YE(),a=s?o:o&&o.parent,c=n.data[e]=VN(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function zD(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function GD(n,e,t,r,i){let o=El(),s=r&2;try{pi(-1),s&&e.length>br&&$D(n,e,br,!1),Ir(s?2:0,i),t(r,i)}finally{pi(o),Ir(s?3:1,i)}}function WD(n,e,t){if(LE(e)){let r=Ce(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{Ce(r)}}}function KD(n,e,t){KE()&&(qN(n,e,t,An(t,e)),(t.flags&64)===64&&eC(n,e,t))}function QD(n,e,t=An){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function YD(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=ig(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function ig(n,e,t,r,i,o,s,a,c,l,h){let p=br+r,m=p+i,v=kN(p,m),b=typeof l=="function"?l():l;return v[pe]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:b,incompleteFirstPass:!1,ssrId:h}}function kN(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:_i);return t}function ON(n,e,t,r){let o=r.get(uN,AD)||t===Cn.ShadowDom,s=n.selectRootElement(e,o);return FN(s),s}function FN(n){LN(n)}var LN=()=>null;function VN(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return pM()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function JI(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=Dr.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?XI(r,t,l,a,c):XI(r,t,l,a)}return r}function XI(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function jN(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],c=null,l=null;for(let h=r;h<i;h++){let p=o[h],m=t?t.get(p):null,v=m?m.inputs:null,b=m?m.outputs:null;c=JI(0,p.inputs,h,c,v),l=JI(1,p.outputs,h,l,b);let M=c!==null&&s!==null&&!Op(e)?XN(c,h,s):null;a.push(M)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function UN(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function ZD(n,e,t,r,i,o,s,a){let c=An(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(og(n,t,h,r,i),vl(e)&&BN(t,e.index)):e.type&3?(r=UN(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function BN(n,e){let t=Po(e,n);t[re]&16||(t[re]|=64)}function JD(n,e,t,r){if(KE()){let i=r===null?null:{"":-1},o=GN(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&XD(n,e,t,s,i,a),i&&WN(t,r,i)}t.mergedAttrs=kp(t.mergedAttrs,t.attrs)}function XD(n,e,t,r,i,o){for(let l=0;l<r.length;l++)FM(dD(t,e),n,r[l].type);QN(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,c=zD(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=kp(t.mergedAttrs,h.hostAttrs),YN(n,t,e,c,h),KN(c,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}jN(n,t,o)}function $N(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;HN(s)!=a&&s.push(a),s.push(t,r,o)}}function HN(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function qN(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;vl(t)&&ZN(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||dD(t,e),gi(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let c=n.data[a],l=Ia(e,n,a,t);if(gi(l,e),s!==null&&JN(e,a-i,l,c,t,s),Ta(c)){let h=Po(t.index,e);h[Tr]=Ia(e,n,a,t)}}}function eC(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=CM();try{pi(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];ip(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&zN(c,l)}}finally{pi(-1),ip(s)}}function zN(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function GN(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(kR(e,s.selectors,!1))if(r||(r=[]),Ta(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;gp(n,e,c)}else r.unshift(s),gp(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function gp(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function WN(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new X(-301,!1);r.push(e[i],o)}}}function KN(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ta(e)&&(t[""]=n)}}function QN(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function YN(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Do(i.type,!0)),s=new wa(o,Ta(i),Ye);n.blueprint[r]=s,t[r]=s,$N(n,e,r,zD(n,t,i.hostVars,_i),i)}function ZN(n,e,t){let r=An(e,n),i=YD(t),o=n[Tn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=xl(n,Sl(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function JN(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],h=s[a++],p=s[a++];qD(r,t,c,l,h,p)}}function XN(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function tC(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function nC(n,e){let t=n.contentQueries;if(t!==null){let r=Ce(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];XE(o),a.contentQueries(2,e[s],s)}}}finally{Ce(r)}}}function xl(n,e){return n[_a]?n[VI][dn]=e:n[_a]=e,n[VI]=e,e}function mp(n,e,t){XE(0);let r=Ce(null);try{e(n,t)}finally{Ce(r)}}function eP(n,e){let t=n[To],r=t?t.get(Kn,null):null;r&&r.handleError(e)}function og(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],c=t[o++],l=e[s],h=n.data[s];qD(h,l,r,a,c,i)}}function rC(n,e,t){let r=uM(e,n);gN(n[Nt],r,t)}function tP(n,e){let t=Po(e,n),r=t[pe];nP(r,t);let i=t[Yn];i!==null&&t[zc]===null&&(t[zc]=Zp(i,t[To])),sg(r,t,t[Tr])}function nP(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function sg(n,e,t){jp(e);try{let r=n.viewQuery;r!==null&&mp(1,r,t);let i=n.template;i!==null&&GD(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[So]?.finishViewCreation(n),n.staticContentQueries&&nC(n,e),n.staticViewQueries&&mp(2,n.viewQuery,t);let o=n.components;o!==null&&rP(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[re]&=-5,Up()}}function rP(n,e){for(let t=0;t<e.length;t++)tP(n,e[t])}function iP(n,e,t,r){let i=Ce(null);try{let o=e.tView,a=n[re]&4096?4096:16,c=Sl(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[bo]=l;let h=n[So];return h!==null&&(c[So]=h.createEmbeddedView(o)),sg(o,c,t),c}finally{Ce(i)}}function eE(n,e){return!e||e.firstChild===null||ED(n)}function oP(n,e,t,r=!0){let i=e[pe];if(_N(i,e,n,t),r){let s=pp(t,n),a=e[Nt],c=VD(a,n[hi]);c!==null&&yN(i,n[hn],a,e,c,s)}let o=e[zc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function rl(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Wn(o)),Zn(o)&&sP(o,r);let s=t.type;if(s&8)rl(n,e,t.child,r);else if(s&32){let a=eg(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=jD(e,t);if(Array.isArray(a))r.push(...a);else{let c=fi(e[bn]);rl(c[pe],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function sP(n,e){for(let t=Xt;t<n.length;t++){let r=n[t],i=r[pe].firstChild;i!==null&&rl(r[pe],r,i,e)}n[hi]!==n[Yn]&&e.push(n[hi])}var iC=[];function aP(n){return n[Jt]??uP(n)}function uP(n){let e=iC.pop()??Object.create(lP);return e.lView=n,e}function cP(n){n.lView[Jt]!==n&&(n.lView=null,iC.push(n))}var lP=xe(V({},pf),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Il(n.lView)},consumerOnSignalRead(){this.lView[Jt]=this}});function dP(n){let e=n[Jt]??Object.create(hP);return e.lView=n,e}var hP=xe(V({},pf),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=fi(n.lView);for(;e&&!oC(e[pe]);)e=fi(e);e&&zE(e)},consumerOnSignalRead(){this.lView[Jt]=this}});function oC(n){return n.type!==2}var fP=100;function sC(n,e=!0,t=0){let r=n[Tn],i=r.rendererFactory,o=!1;o||i.begin?.();try{pP(n,t)}catch(s){throw e&&eP(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function pP(n,e){let t=ZE();try{UI(!0),yp(n,e);let r=0;for(;wl(n);){if(r===fP)throw new X(103,!1);r++,yp(n,1)}}finally{UI(t)}}function gP(n,e,t,r){let i=e[re];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Tn].inlineEffectRunner?.flush(),jp(e);let a=!0,c=null,l=null;o||(oC(n)?(l=aP(e),c=gf(l)):Xw()===null?(a=!1,l=dP(e),c=gf(l)):e[Jt]&&(yf(e[Jt]),e[Jt]=null));try{qE(e),wM(n.bindingStartIndex),t!==null&&GD(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let v=n.preOrderCheckHooks;v!==null&&Vc(e,v,null)}else{let v=n.preOrderHooks;v!==null&&jc(e,v,0,null),Bf(e,0)}if(s||mP(e),aC(e,0),n.contentQueries!==null&&nC(n,e),!o)if(h){let v=n.contentCheckHooks;v!==null&&Vc(e,v)}else{let v=n.contentHooks;v!==null&&jc(e,v,1),Bf(e,1)}NN(n,e);let p=n.components;p!==null&&cC(e,p,0);let m=n.viewQuery;if(m!==null&&mp(2,m,r),!o)if(h){let v=n.viewCheckHooks;v!==null&&Vc(e,v)}else{let v=n.viewHooks;v!==null&&jc(e,v,2),Bf(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Uf]){for(let v of e[Uf])v();e[Uf]=null}o||(e[re]&=-73)}catch(h){throw o||Il(e),h}finally{l!==null&&(eI(l,c),a&&cP(l)),Up()}}function aC(n,e){for(let t=CD(n);t!==null;t=TD(t))for(let r=Xt;r<t.length;r++){let i=t[r];uC(i,e)}}function mP(n){for(let e=CD(n);e!==null;e=TD(e)){if(!(e[re]&Kc.HasTransplantedViews))continue;let t=e[Wc];for(let r=0;r<t.length;r++){let i=t[r];zE(i)}}}function yP(n,e,t){let r=Po(e,n);uC(r,t)}function uC(n,e){Vp(n)&&yp(n,e)}function yp(n,e){let r=n[pe],i=n[re],o=n[Jt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&mf(o)),s||=!1,o&&(o.dirty=!1),n[re]&=-9217,s)gP(r,n,r.template,n[Tr]);else if(i&8192){aC(n,1);let a=r.components;a!==null&&cC(n,a,1)}}function cC(n,e,t){for(let r=0;r<e.length;r++)yP(n,e[r],t)}function lC(n,e){let t=ZE()?64:1088;for(n[Tn].changeDetectionScheduler?.notify(e);n;){n[re]|=t;let r=fi(n);if(tp(n)&&!r)return n;n=r}return null}var mi=class{get rootNodes(){let e=this._lView,t=e[pe];return rl(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Tr]}set context(e){this._lView[Tr]=e}get destroyed(){return(this._lView[re]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ct];if(Zn(e)){let t=e[Gc],r=t?t.indexOf(this):-1;r>-1&&(fp(e,r),Hc(t,r))}this._attachedToViewContainer=!1}FD(this._lView[pe],this._lView)}onDestroy(e){GE(this._lView,e)}markForCheck(){lC(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[re]&=-129}reattach(){rp(this._lView),this._lView[re]|=128}detectChanges(){this._lView[re]|=1024,sC(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new X(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=tp(this._lView),t=this._lView[bo];t!==null&&!e&&tg(t,this._lView),kD(this._lView[pe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new X(902,!1);this._appRef=e;let t=tp(this._lView),r=this._lView[bo];r!==null&&!t&&OD(r,this._lView),rp(this._lView)}},ag=(()=>{class n{static{this.__NG_ELEMENT_ID__=wP}}return n})(),vP=ag,_P=class extends vP{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=iP(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new mi(i)}};function wP(){return IP(xn(),rt())}function IP(n,e){return n.type&4?new _P(e,n,Dl(n,e)):null}var Dq=new RegExp(`^(\\d+)*(${sN}|${oN})*(.*)`);var EP=()=>null;function tE(n,e){return EP(n,e)}var Ao=class{},ug=new W("",{providedIn:"root",factory:()=>!1});var dC=new W(""),hC=new W(""),vp=class{},il=class{};function DP(n){let e=Error(`No component factory found for ${Ut(n)}.`);return e[CP]=n,e}var CP="ngComponent";var _p=class{resolveComponentFactory(e){throw DP(e)}},xo=class{static{this.NULL=new _p}},Ro=class{};var TP=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>null})}}return n})();function wp(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=SI(i,a);else if(o==2){let c=a,l=e[++s];r=SI(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var ol=class extends xo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Cr(e);return new Mo(t,this.ngModule)}};function nE(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Dr.None;e?t.push({propName:s,templateName:r,isSignal:(a&Dr.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function bP(n){let e=n.toLowerCase();return e==="svg"?sM:e==="math"?aM:null}var Mo=class extends il{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=nE(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return nE(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=VR(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Ce(null);try{i=i||this.ngModule;let s=i instanceof Bt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new op(e,s):e,c=a.get(Ro,null);if(c===null)throw new X(407,!1);let l=a.get(TP,null),h=a.get(Ao,null),p={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=c.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",b=r?ON(m,r,this.componentDef.encapsulation,a):PD(m,v,bP(v)),M=512;this.componentDef.signals?M|=4096:this.componentDef.onPush||(M|=16);let N=null;b!==null&&(N=Zp(b,a,!0));let U=ig(0,null,null,1,0,null,null,null,null,null,null),q=Sl(null,U,null,M,null,null,p,m,a,null,N);jp(q);let F,Y,ee=null;try{let Z=this.componentDef,I,y=null;Z.findHostDirectiveDefs?(I=[],y=new Map,Z.findHostDirectiveDefs(Z,I,y),I.push(Z)):I=[Z];let w=SP(q,b);ee=AP(w,b,Z,I,q,p,m),Y=HE(U,br),b&&MP(m,Z,b,r),t!==void 0&&NP(Y,this.ngContentSelectors,t),F=RP(ee,Z,I,y,q,[PP]),sg(U,q,null)}catch(Z){throw ee!==null&&dp(ee),dp(q),Z}finally{Up()}return new Ip(this.componentType,F,Dl(Y,q),q,Y)}finally{Ce(o)}}},Ip=class extends vp{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new mi(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;og(o[pe],o,i,e,t),this.previousInputValues.set(e,t);let s=Po(this._tNode.index,o);lC(s,1)}}get injector(){return new di(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function SP(n,e){let t=n[pe],r=br;return n[r]=e,Al(t,r,2,"#host",null)}function AP(n,e,t,r,i,o,s){let a=i[pe];xP(r,n,e,s);let c=null;e!==null&&(c=Zp(e,i[To]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=Sl(i,YD(t),null,h,i[n.index],n,o,l,null,null,c);return a.firstCreatePass&&gp(a,n,r.length-1),xl(i,p),i[n.index]=p}function xP(n,e,t,r){for(let i of n)e.mergedAttrs=kp(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(wp(e,e.mergedAttrs,!0),t!==null&&BD(r,t,e))}function RP(n,e,t,r,i,o){let s=xn(),a=i[pe],c=An(s,i);XD(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let p=s.directiveStart+h,m=Ia(i,a,p,s);gi(m,i)}eC(a,i,s),c&&gi(c,i);let l=Ia(i,a,s.directiveStart+s.componentOffset,s);if(n[Tr]=i[Tr]=l,o!==null)for(let h of o)h(l,e);return WD(a,s,i),l}function MP(n,e,t,r){if(r)Yf(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=jR(e.selectors[0]);i&&Yf(n,t,i),o&&o.length>0&&UD(n,t,o.join(" "))}}function NP(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function PP(){let n=xn();Hp(rt()[pe],n)}var Sa=(()=>{class n{static{this.__NG_ELEMENT_ID__=kP}}return n})();function kP(){let n=xn();return FP(n,rt())}var OP=Sa,fC=class extends OP{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Dl(this._hostTNode,this._hostLView)}get injector(){return new di(this._hostTNode,this._hostLView)}get parentInjector(){let e=qp(this._hostTNode,this._hostLView);if(uD(e)){let t=Zc(e,this._hostLView),r=Yc(e),i=t[pe].data[r+8];return new di(i,t)}else return new di(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=rE(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Xt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=tE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,eE(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!nM(e),a;if(s)a=t;else{let b=t||{};a=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}let c=s?e:new Mo(Cr(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let M=(s?l:this.parentInjector).get(Bt,null);M&&(o=M)}let h=Cr(c.componentType??{}),p=tE(this._lContainer,h?.id??null),m=p?.firstChild??null,v=c.create(l,i,m,o);return this.insertImpl(v.hostView,a,eE(this._hostTNode,p)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(cM(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Ct],l=new fC(c,c[hn],c[Ct]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return oP(s,i,o,r),e.attachToViewContainerRef(),wE(Gf(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=rE(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=fp(this._lContainer,t);r&&(Hc(Gf(this._lContainer),t),FD(r[pe],r))}detach(e){let t=this._adjustIndex(e,-1),r=fp(this._lContainer,t);return r&&Hc(Gf(this._lContainer),t)!=null?new mi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function rE(n){return n[Gc]}function Gf(n){return n[Gc]||(n[Gc]=[])}function FP(n,e){let t,r=e[n.index];return Zn(r)?t=r:(t=tC(r,e,null,n),e[n.index]=t,xl(e,t)),VP(t,e,n,r),new fC(t,n,e)}function LP(n,e){let t=n[Nt],r=t.createComment(""),i=An(e,n),o=VD(t,i);return nl(t,o,r,CN(t,i),!1),r}var VP=BP,jP=()=>!1;function UP(n,e,t){return jP(n,e,t)}function BP(n,e,t,r){if(n[hi])return;let i;t.type&8?i=Wn(r):i=LP(e,t),n[hi]=i}var iE=new Set;function cg(n){iE.has(n)||(iE.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function $P(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(GP))}return o}return sl.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,h=i.styleUrls;i.styleUrls.forEach((p,m)=>{a.push(""),s.push(r(p).then(v=>{a[l+m]=v,h.splice(h.indexOf(p),1),h.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>WP(o));e.push(c)}),qP(),Promise.all(e).then(()=>{})}var sl=new Map,HP=new Set;function qP(){let n=sl;return sl=new Map,n}function zP(){return sl.size===0}function GP(n){return typeof n=="string"?n:n.text()}function WP(n){HP.delete(n)}var Sr=class{},Ea=class{};var al=class extends Sr{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ol(this);let o=AE(e);this._bootstrapComponents=ND(o.bootstrap),this._r3Injector=vD(e,t,[{provide:Sr,useValue:this},{provide:xo,useValue:this.componentFactoryResolver},...r],Ut(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},ul=class extends Ea{constructor(e){super(),this.moduleType=e}create(e){return new al(this.moduleType,e,[])}};function KP(n,e,t){return new al(n,e,t,!1)}var Ep=class extends Sr{constructor(e){super(),this.componentFactoryResolver=new ol(this),this.instance=null;let t=new va([...e.providers,{provide:Sr,useValue:this},{provide:xo,useValue:this.componentFactoryResolver}],e.parent||Lp(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Rl(n,e,t=null){return new Ep({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function pC(n){return YP(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function QP(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function YP(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function cl(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function ZP(n,e,t,r){let i=cl(n,e,t);return cl(n,e+1,r)||i}function JP(n){return(n.flags&32)===32}function XP(n,e,t,r,i,o,s,a,c){let l=e.consts,h=Al(e,n,4,s||null,a||null);JD(e,t,h,Qc(l,c)),Hp(e,h);let p=h.tView=ig(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function e1(n,e,t,r,i,o,s,a,c,l){let h=t+br,p=e.firstCreatePass?XP(h,e,n,r,i,o,s,a,c):e.data[h];ba(p,!1);let m=t1(e,n,p,t);Bp()&&ng(e,n,m,p),gi(m,n);let v=tC(m,n,m,p);return n[h]=v,xl(n,v),UP(v,p,n),VE(p)&&KD(e,n,p),c!=null&&QD(n,p,l),p}function $t(n,e,t,r,i,o,s,a){let c=rt(),l=yi(),h=Qc(l.consts,o);return e1(c,l,n,e,t,r,i,h,s,a),$t}var t1=n1;function n1(n,e,t,r){return $p(!0),e[Nt].createComment("")}var wo=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(wo||{}),gC=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}}return n})(),Dp=class n{constructor(){this.ngZone=j(me),this.scheduler=j(Ao),this.errorHandler=j(Kn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[wo.EarlyRead,wo.Write,wo.MixedReadWrite,wo.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}},Cp=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function lg(n,e){!e?.injector&&eM(lg);let t=e?.injector??j(en);return hN(t)?(cg("NgAfterNextRender"),i1(n,t,e,!0)):o1}function r1(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function i1(n,e,t,r){let i=e.get(gC);i.impl??=e.get(Dp);let o=t?.phase??wo.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(Gp):null,a=new Cp(i.impl,r1(n,o),r,s);return i.impl.register(a),a}var o1={destroy(){}};function mC(n,e,t,r){return cl(n,JE(),t)?e+ga(t)+r:_i}function s1(n,e,t,r,i,o){let s=_M(),a=ZP(n,s,t,i);return IM(2),a?e+ga(t)+r+ga(i)+o:_i}function Ht(n,e,t){let r=rt(),i=JE();if(cl(r,i,e)){let o=yi(),s=oD();ZD(o,s,r,n,e,r[Nt],t,!1)}return Ht}function oE(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";og(n,t,o[s],s,r)}function a1(n,e,t,r,i,o){let s=e.consts,a=Qc(s,i),c=Al(e,n,2,r,a);return JD(e,t,c,Qc(s,o)),c.attrs!==null&&wp(c,c.attrs,!1),c.mergedAttrs!==null&&wp(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function se(n,e,t,r){let i=rt(),o=yi(),s=br+n,a=i[Nt],c=o.firstCreatePass?a1(s,o,i,e,t,r):o.data[s],l=u1(o,i,c,a,e,n);i[s]=l;let h=VE(c);return ba(c,!0),BD(a,l,c),!JP(c)&&Bp()&&ng(o,i,l,c),dM()===0&&gi(l,i),hM(),h&&(KD(o,i,c),WD(o,c,i)),r!==null&&QD(i,c),se}function te(){let n=xn();YE()?vM():(n=n.parent,ba(n,!1));let e=n;gM(e)&&mM(),fM();let t=yi();return t.firstCreatePass&&(Hp(t,n),LE(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&RM(e)&&oE(t,e,rt(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&MM(e)&&oE(t,e,rt(),e.stylesWithoutHost,!1),te}function Ne(n,e,t,r){return se(n,e,t,r),te(),Ne}var u1=(n,e,t,r,i,o)=>($p(!0),PD(r,i,bM()));var ll="en-US";var c1=ll;function l1(n){typeof n=="string"&&(c1=n.toLowerCase().replace(/_/g,"-"))}function dg(n,e,t){return yC(n,"",e,"",t),dg}function yC(n,e,t,r,i){let o=rt(),s=mC(o,e,t,r);if(s!==_i){let a=yi(),c=oD();ZD(a,c,o,n,s,o[Nt],i,!1)}return yC}function le(n,e=""){let t=rt(),r=yi(),i=n+br,o=r.firstCreatePass?Al(r,i,1,e,null):r.data[i],s=d1(r,t,o,e,n);t[i]=s,Bp()&&ng(r,t,s,o),ba(o,!1)}var d1=(n,e,t,r,i)=>($p(!0),pN(e[Nt],r));function St(n){return Ze("",n,""),St}function Ze(n,e,t){let r=rt(),i=mC(r,n,e,t);return i!==_i&&rC(r,El(),i),Ze}function hg(n,e,t,r,i){let o=rt(),s=s1(o,n,e,t,r,i);return s!==_i&&rC(o,El(),s),hg}var h1=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=ME(!1,t.type),i=r.length>0?Rl([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=H({token:n,providedIn:"environment",factory:()=>new n(O(Bt))})}}return n})();function vC(n){cg("NgStandalone"),n.getStandaloneInjector=e=>e.get(h1).getOrCreateStandaloneInjector(n)}var Oc=null;function f1(n){Oc!==null&&(n.defaultEncapsulation!==Oc.defaultEncapsulation||n.preserveWhitespaces!==Oc.preserveWhitespaces)||(Oc=n)}var Ar=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},_C=new Ar("18.2.13");var Ml=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var fg=new W(""),Aa=new W(""),Nl=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,pg||(p1(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{me.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(O(me),O(Pl),O(Aa))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Pl=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return pg?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function p1(n){pg=n}var pg;function xa(n){return!!n&&typeof n.then=="function"}function wC(n){return!!n&&typeof n.subscribe=="function"}var kl=new W(""),IC=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=j(kl,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(xa(o))t.push(o);else if(wC(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),gg=new W("");function g1(){tI(()=>{throw new X(600,!1)})}function m1(n){return n.isBoundToModule}var y1=10;function v1(n,e,t){try{let r=t();return xa(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function EC(n,e){return Array.isArray(e)?e.reduce(EC,n):V(V({},n),e)}var xr=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=j(JM),this.afterRenderManager=j(gC),this.zonelessEnabled=j(ug),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new qe,this.afterTick=new qe,this.componentTypes=[],this.components=[],this.isStable=j(ko).hasPendingTasks.pipe(G(t=>!t)),this._injector=j(Bt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof il;if(!this._injector.get(IC).done){let m=!i&&SE(t),v=!1;throw new X(405,v)}let s;i?s=t:s=this._injector.get(xo).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=m1(s)?void 0:this._injector.get(Sr),c=r||s.selector,l=s.create(en.NULL,[],c,a),h=l.location.nativeElement,p=l.injector.get(fg,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),Uc(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new X(101,!1);let t=Ce(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Ce(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Ro,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<y1;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)_1(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>wl(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Uc(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(gg,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Uc(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new X(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Uc(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function _1(n,e,t,r){if(!t&&!wl(n))return;sC(n,e,t&&!r?0:1)}var Tp=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Ol=(()=>{class n{compileModuleSync(t){return new ul(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=AE(t),o=ND(i.declarations).reduce((s,a)=>{let c=Cr(a);return c&&s.push(new Mo(c)),s},[]);return new Tp(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),w1=new W("");function I1(n,e,t){let r=new ul(t);return Promise.resolve(r)}function sE(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var E1=(()=>{class n{constructor(){this.zone=j(me),this.changeDetectionScheduler=j(Ao),this.applicationRef=j(xr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function D1({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new me(xe(V({},DC()),{scheduleInRootZone:t})),[{provide:me,useFactory:n},{provide:Co,multi:!0,useFactory:()=>{let r=j(E1,{optional:!0});return()=>r.initialize()}},{provide:Co,multi:!0,useFactory:()=>{let r=j(C1);return()=>{r.initialize()}}},e===!0?{provide:dC,useValue:!0}:[],{provide:hC,useValue:t??_D}]}function DC(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var C1=(()=>{class n{constructor(){this.subscription=new Be,this.initialized=!1,this.zone=j(me),this.pendingTasks=j(ko)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{me.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{me.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var T1=(()=>{class n{constructor(){this.appRef=j(xr),this.taskService=j(ko),this.ngZone=j(me),this.zonelessEnabled=j(ug),this.disableScheduling=j(dC,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Be,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Xc):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(j(hC,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof el||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?GI:wD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Xc+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,GI(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function b1(){return typeof $localize<"u"&&$localize.locale||ll}var mg=new W("",{providedIn:"root",factory:()=>j(mg,ce.Optional|ce.SkipSelf)||b1()});var dl=new W("");function Fc(n){return!n.moduleRef}function S1(n){let e=Fc(n)?n.r3Injector:n.moduleRef.injector,t=e.get(me);return t.run(()=>{Fc(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Kn,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Fc(n)){let o=()=>e.destroy(),s=n.platformInjector.get(dl);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(dl);s.add(o),n.moduleRef.onDestroy(()=>{Uc(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return v1(r,t,()=>{let o=e.get(IC);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(mg,ll);if(l1(s||ll),Fc(n)){let a=e.get(xr);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return A1(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function A1(n,e){let t=n.injector.get(xr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new X(-403,!1);e.push(n)}var CC=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>ZM(r?.ngZone,xe(V({},DC({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[D1({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:Ao,useExisting:T1}],c=KP(t.moduleType,this.injector,a);return S1({moduleRef:c,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=EC({},r);return I1(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new X(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(dl,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(O(en))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),pa=null,TC=new W("");function x1(n){if(pa&&!pa.get(TC,!1))throw new X(400,!1);g1(),pa=n;let e=n.get(CC);return N1(n),e}function yg(n,e,t=[]){let r=`Platform: ${e}`,i=new W(r);return(o=[])=>{let s=bC();if(!s||s.injector.get(TC,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):x1(R1(a,r))}return M1(i)}}function R1(n=[],e){return en.create({name:e,providers:[{provide:ml,useValue:"platform"},{provide:dl,useValue:new Set([()=>pa=null])},...n]})}function M1(n){let e=bC();if(!e)throw new X(401,!1);return e}function bC(){return pa?.get(CC)??null}function N1(n){n.get(Qp,null)?.forEach(t=>t())}function vg(){return!1}var Ra=(()=>{class n{static{this.__NG_ELEMENT_ID__=P1}}return n})();function P1(n){return k1(xn(),rt(),(n&16)===16)}function k1(n,e,t){if(vl(n)&&!t){let r=Po(n.index,e);return new mi(r,r)}else if(n.type&175){let r=e[bn];return new mi(r,e)}return null}var bp=class{constructor(){}supports(e){return pC(e)}create(e){return new Sp(e)}},O1=(n,e)=>e,Sp=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||O1}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<aE(r,i,o)?t:r,a=aE(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=c-i;if(l!=h){for(let m=0;m<l;m++){let v=m<o.length?o[m]:o[m]=0,b=v+m;h<=b&&b<l&&(o[m]=v+1)}let p=s.previousIndex;o[p]=h-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!pC(e))throw new X(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,QP(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Ap(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new hl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new hl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Ap=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},xp=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},hl=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new xp,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function aE(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function uE(){return new _g([new bp])}var _g=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:uE})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||uE()),deps:[[n,new Np,new No]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new X(901,!1)}}return n})();var SC=yg(null,"core",[]),AC=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(O(xr))}}static{this.\u0275mod=bt({type:n})}static{this.\u0275inj=Tt({})}}return n})();function xC(n){let e=Cr(n);if(!e)return null;let t=new Mo(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var kC=null;function wi(){return kC}function OC(n){kC??=n}var Fl=class{};var kt=new W(""),Dg=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(j1),providedIn:"platform"})}}return n})(),FC=new W(""),j1=(()=>{class n extends Dg{constructor(){super(),this._doc=j(kt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return wi().getBaseHref(this._doc)}onPopState(t){let r=wi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=wi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function Cg(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function RC(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Jn(n){return n&&n[0]!=="?"?"?"+n:n}var Ii=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(Tg),providedIn:"root"})}}return n})(),LC=new W(""),Tg=(()=>{class n extends Ii{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??j(kt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Cg(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Jn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Jn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Jn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(O(Dg),O(LC,8))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),VC=(()=>{class n extends Ii{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Cg(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Jn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Jn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(O(Dg),O(LC,8))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Oo=(()=>{class n{constructor(t){this._subject=new Dt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=$1(RC(MC(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Jn(r))}normalize(t){return n.stripTrailingSlash(B1(this._basePath,MC(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Jn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Jn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Jn}static{this.joinWithSlash=Cg}static{this.stripTrailingSlash=RC}static{this.\u0275fac=function(r){return new(r||n)(O(Ii))}}static{this.\u0275prov=H({token:n,factory:()=>U1(),providedIn:"root"})}}return n})();function U1(){return new Oo(O(Ii))}function B1(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function MC(n){return n.replace(/\/index.html$/,"")}function $1(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function jC(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var wg=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},tn=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new wg(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),NC(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);NC(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Ye(Sa),Ye(ag),Ye(_g))}}static{this.\u0275dir=gl({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function NC(n,e){n.context.$implicit=e.item}var UC=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=bt({type:n})}static{this.\u0275inj=Tt({})}}return n})(),bg="browser",H1="server";function q1(n){return n===bg}function Ei(n){return n===H1}var BC=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>q1(j(Pt))?new Ig(j(kt),window):new Eg})}}return n})(),Ig=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=z1(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function z1(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Eg=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Ll=class{};var xg=class extends Fl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Rg=class n extends xg{static makeCurrent(){OC(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=W1();return t==null?null:K1(t)}resetBaseElement(){Ma=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return jC(document.cookie,e)}},Ma=null;function W1(){return Ma=Ma||document.querySelector("base"),Ma?Ma.getAttribute("href"):null}function K1(n){return new URL(n,document.baseURI).pathname}var Mg=class{addToWindow(e){Qn.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new X(5103,!1);return o},Qn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Qn.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=Qn.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};Qn.frameworkStabilizers||(Qn.frameworkStabilizers=[]),Qn.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?wi().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},Q1=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Ng=new W(""),zC=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new X(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(O(Ng),O(me))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Vl=class{constructor(e){this._doc=e}},Sg="ng-app-id",GC=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ei(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Sg}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(Sg),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Sg,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(O(kt),O(Tl),O(Yp,8),O(Pt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Ag={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},kg=/%COMP%/g,WC="%COMP%",Y1=`_nghost-${WC}`,Z1=`_ngcontent-${WC}`,J1=!0,X1=new W("",{providedIn:"root",factory:()=>J1});function ek(n){return Z1.replace(kg,n)}function tk(n){return Y1.replace(kg,n)}function KC(n,e){return e.map(t=>t.replace(kg,n))}var $C=(()=>{class n{constructor(t,r,i,o,s,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Ei(a),this.defaultRenderer=new Na(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Cn.ShadowDom&&(r=xe(V({},r),{encapsulation:Cn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof jl?i.applyToHost(t):i instanceof Pa&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Cn.Emulated:o=new jl(c,l,r,this.appId,h,s,a,p);break;case Cn.ShadowDom:return new Pg(c,l,t,r,s,a,this.nonce,p);default:o=new Pa(c,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(O(zC),O(GC),O(Tl),O(X1),O(kt),O(Pt),O(me),O(Yp))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Na=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Ag[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(HC(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(HC(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new X(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Ag[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Ag[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(vi.DashCase|vi.Important)?e.style.setProperty(t,r,i&vi.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&vi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=wi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function HC(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Pg=class extends Na{constructor(e,t,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=KC(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Pa=class extends Na{constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?KC(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},jl=class extends Pa{constructor(e,t,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,t,r,o,s,a,c,l),this.contentAttr=ek(l),this.hostAttr=tk(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},nk=(()=>{class n extends Vl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(O(kt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),qC=["alt","control","meta","shift"],rk={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ik={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},ok=(()=>{class n extends Vl{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>wi().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),qC.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=rk[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),qC.forEach(s=>{if(s!==i){let a=ik[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(O(kt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function sk(){Rg.makeCurrent()}function ak(){return new Kn}function uk(){return SD(document),document}var ck=[{provide:Pt,useValue:bg},{provide:Qp,useValue:sk,multi:!0},{provide:kt,useFactory:uk,deps:[]}],QC=yg(SC,"browser",ck),lk=new W(""),dk=[{provide:Aa,useClass:Mg,deps:[]},{provide:fg,useClass:Nl,deps:[me,Pl,Aa]},{provide:Nl,useClass:Nl,deps:[me,Pl,Aa]}],hk=[{provide:ml,useValue:"root"},{provide:Kn,useFactory:ak,deps:[]},{provide:Ng,useClass:nk,multi:!0,deps:[kt,me,Pt]},{provide:Ng,useClass:ok,multi:!0,deps:[kt]},$C,GC,zC,{provide:Ro,useExisting:$C},{provide:Ll,useClass:Q1,deps:[]},[]],YC=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Tl,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(O(lk,12))}}static{this.\u0275mod=bt({type:n})}static{this.\u0275inj=Tt({providers:[...hk,...dk],imports:[UC,AC]})}}return n})();var ZC=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(O(kt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ae="primary",Ka=Symbol("RouteTitle"),jg=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function $o(n){return new jg(n)}function fk(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function pk(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Rn(n[t],e[t]))return!1;return!0}function Rn(n,e){let t=n?Ug(n):void 0,r=e?Ug(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!cT(n[i],e[i]))return!1;return!0}function Ug(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function cT(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function lT(n){return n.length>0?n[n.length-1]:null}function Mr(n){return Nf(n)?n:xa(n)?Ee(Promise.resolve(n)):J(n)}var gk={exact:hT,subset:fT},dT={exact:mk,subset:yk,ignored:()=>!0};function XC(n,e,t){return gk[t.paths](n.root,e.root,t.matrixParams)&&dT[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function mk(n,e){return Rn(n,e)}function hT(n,e,t){if(!Ci(n.segments,e.segments)||!$l(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!hT(n.children[r],e.children[r],t))return!1;return!0}function yk(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>cT(n[t],e[t]))}function fT(n,e,t){return pT(n,e,e.segments,t)}function pT(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ci(i,t)||e.hasChildren()||!$l(i,t,r))}else if(n.segments.length===t.length){if(!Ci(n.segments,t)||!$l(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!fT(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Ci(n.segments,i)||!$l(n.segments,i,r)||!n.children[ae]?!1:pT(n.children[ae],e,o,r)}}function $l(n,e,t){return e.every((r,i)=>dT[t](n[i].parameters,r.parameters))}var er=class{constructor(e=new De([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=$o(this.queryParams),this._queryParamMap}toString(){return wk.serialize(this)}},De=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Hl(this)}},Di=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=$o(this.parameters),this._parameterMap}toString(){return mT(this)}};function vk(n,e){return Ci(n,e)&&n.every((t,r)=>Rn(t.parameters,e[r].parameters))}function Ci(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function _k(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ae&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ae&&(t=t.concat(e(i,r)))}),t}var Qa=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>new Ho,providedIn:"root"})}}return n})(),Ho=class{parse(e){let t=new $g(e);return new er(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${ka(e.root,!0)}`,r=Dk(e.queryParams),i=typeof e.fragment=="string"?`#${Ik(e.fragment)}`:"";return`${t}${r}${i}`}},wk=new Ho;function Hl(n){return n.segments.map(e=>mT(e)).join("/")}function ka(n,e){if(!n.hasChildren())return Hl(n);if(e){let t=n.children[ae]?ka(n.children[ae],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ae&&r.push(`${i}:${ka(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=_k(n,(r,i)=>i===ae?[ka(n.children[ae],!1)]:[`${i}:${ka(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ae]!=null?`${Hl(n)}/${t[0]}`:`${Hl(n)}/(${t.join("//")})`}}function gT(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ul(n){return gT(n).replace(/%3B/gi,";")}function Ik(n){return encodeURI(n)}function Bg(n){return gT(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ql(n){return decodeURIComponent(n)}function eT(n){return ql(n.replace(/\+/g,"%20"))}function mT(n){return`${Bg(n.path)}${Ek(n.parameters)}`}function Ek(n){return Object.entries(n).map(([e,t])=>`;${Bg(e)}=${Bg(t)}`).join("")}function Dk(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Ul(t)}=${Ul(i)}`).join("&"):`${Ul(t)}=${Ul(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var Ck=/^[^\/()?;#]+/;function Og(n){let e=n.match(Ck);return e?e[0]:""}var Tk=/^[^\/()?;=#]+/;function bk(n){let e=n.match(Tk);return e?e[0]:""}var Sk=/^[^=?&#]+/;function Ak(n){let e=n.match(Sk);return e?e[0]:""}var xk=/^[^&#]+/;function Rk(n){let e=n.match(xk);return e?e[0]:""}var $g=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new De([],{}):new De([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ae]=new De(e,t)),r}parseSegment(){let e=Og(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new X(4009,!1);return this.capture(e),new Di(ql(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=bk(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Og(this.remaining);i&&(r=i,this.capture(r))}e[ql(t)]=ql(r)}parseQueryParam(e){let t=Ak(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=Rk(this.remaining);s&&(r=s,this.capture(r))}let i=eT(t),o=eT(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Og(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new X(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ae);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[ae]:new De([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new X(4011,!1)}};function yT(n){return n.segments.length>0?new De([],{[ae]:n}):n}function vT(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=vT(i);if(r===ae&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new De(n.segments,e);return Mk(t)}function Mk(n){if(n.numberOfChildren===1&&n.children[ae]){let e=n.children[ae];return new De(n.segments.concat(e.segments),e.children)}return n}function Ua(n){return n instanceof er}function Nk(n,e,t=null,r=null){let i=_T(n);return wT(i,e,t,r)}function _T(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new De(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=yT(r);return e??i}function wT(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Fg(i,i,i,t,r);let o=Pk(e);if(o.toRoot())return Fg(i,i,new De([],{}),t,r);let s=kk(o,i,n),a=s.processChildren?La(s.segmentGroup,s.index,o.commands):ET(s.segmentGroup,s.index,o.commands);return Fg(i,s.segmentGroup,a,t,r)}function zl(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Ba(n){return typeof n=="object"&&n!=null&&n.outlets}function Fg(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=IT(n,e,t);let a=yT(vT(s));return new er(a,o,i)}function IT(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=IT(o,e,t)}),new De(n.segments,r)}var Gl=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&zl(r[0]))throw new X(4003,!1);let i=r.find(Ba);if(i&&i!==lT(r))throw new X(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Pk(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Gl(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Gl(t,e,r)}var jo=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function kk(n,e,t){if(n.isAbsolute)return new jo(e,!0,0);if(!t)return new jo(e,!1,NaN);if(t.parent===null)return new jo(t,!0,0);let r=zl(n.commands[0])?0:1,i=t.segments.length-1+r;return Ok(t,i,n.numberOfDoubleDots)}function Ok(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new X(4005,!1);i=r.segments.length}return new jo(r,!1,i-o)}function Fk(n){return Ba(n[0])?n[0].outlets:{[ae]:n}}function ET(n,e,t){if(n??=new De([],{}),n.segments.length===0&&n.hasChildren())return La(n,e,t);let r=Lk(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new De(n.segments.slice(0,r.pathIndex),{});return o.children[ae]=new De(n.segments.slice(r.pathIndex),n.children),La(o,0,i)}else return r.match&&i.length===0?new De(n.segments,{}):r.match&&!n.hasChildren()?Hg(n,e,t):r.match?La(n,0,i):Hg(n,e,t)}function La(n,e,t){if(t.length===0)return new De(n.segments,{});{let r=Fk(t),i={};if(Object.keys(r).some(o=>o!==ae)&&n.children[ae]&&n.numberOfChildren===1&&n.children[ae].segments.length===0){let o=La(n.children[ae],e,t);return new De(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=ET(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new De(n.segments,i)}}function Lk(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Ba(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!nT(c,l,s))return o;r+=2}else{if(!nT(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Hg(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Ba(o)){let c=Vk(o.outlets);return new De(r,c)}if(i===0&&zl(t[0])){let c=n.segments[e];r.push(new Di(c.path,tT(t[0]))),i++;continue}let s=Ba(o)?o.outlets[ae]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&zl(a)?(r.push(new Di(s,tT(a))),i+=2):(r.push(new Di(s,{})),i++)}return new De(r,{})}function Vk(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Hg(new De([],{}),0,r))}),e}function tT(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function nT(n,e,t){return n==t.path&&Rn(e,t.parameters)}var Va="imperative",at=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(at||{}),nn=class{constructor(e,t){this.id=e,this.url=t}},qo=class extends nn{constructor(e,t,r="imperative",i=null){super(e,t),this.type=at.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},tr=class extends nn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=at.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},zt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(zt||{}),Wl=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Wl||{}),Xn=class extends nn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=at.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Rr=class extends nn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=at.NavigationSkipped}},$a=class extends nn{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=at.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Kl=class extends nn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=at.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qg=class extends nn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=at.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zg=class extends nn{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=at.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Gg=class extends nn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=at.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wg=class extends nn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=at.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Kg=class{constructor(e){this.route=e,this.type=at.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Qg=class{constructor(e){this.route=e,this.type=at.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Yg=class{constructor(e){this.snapshot=e,this.type=at.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zg=class{constructor(e){this.snapshot=e,this.type=at.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Jg=class{constructor(e){this.snapshot=e,this.type=at.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xg=class{constructor(e){this.snapshot=e,this.type=at.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ql=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=at.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Ha=class{},zo=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function jk(n,e){return n.providers&&!n._injector&&(n._injector=Rl(n.providers,e,`Route: ${n.path}`)),n._injector??e}function fn(n){return n.outlet||ae}function Uk(n,e){let t=n.filter(r=>fn(r)===e);return t.push(...n.filter(r=>fn(r)!==e)),t}function Ya(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var em=class{get injector(){return Ya(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Za(this.rootInjector),this.attachRef=null}},Za=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new em(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(O(Bt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Yl=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=tm(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=tm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=nm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return nm(e,this._root).map(t=>t.value)}};function tm(n,e){if(n===e.value)return e;for(let t of e.children){let r=tm(n,t);if(r)return r}return null}function nm(n,e){if(n===e.value)return[e];for(let t of e.children){let r=nm(n,t);if(r.length)return r.unshift(e),r}return[]}var qt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Vo(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Zl=class extends Yl{constructor(e,t){super(e),this.snapshot=t,dm(this,e)}toString(){return this.snapshot.toString()}};function DT(n){let e=Bk(n),t=new ct([new Di("",{})]),r=new ct({}),i=new ct({}),o=new ct({}),s=new ct(""),a=new Go(t,r,o,s,i,ae,n,e.root);return a.snapshot=e.root,new Zl(new qt(a,[]),e)}function Bk(n){let e={},t={},r={},i="",o=new Uo([],e,r,i,t,ae,n,null,{});return new Xl("",new qt(o,[]))}var Go=class{constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(G(l=>l[Ka]))??J(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(G(e=>$o(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(G(e=>$o(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Jl(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),n.params),data:V(V({},e.data),n.data),resolve:V(V(V(V({},n.data),e.data),i?.data),n._resolvedData)}:r={params:V({},n.params),data:V({},n.data),resolve:V(V({},n.data),n._resolvedData??{})},i&&TT(i)&&(r.resolve[Ka]=i.title),r}var Uo=class{get title(){return this.data?.[Ka]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=$o(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=$o(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Xl=class extends Yl{constructor(e,t){super(t),this.url=e,dm(this,t)}toString(){return CT(this._root)}};function dm(n,e){e.value._routerState=n,e.children.forEach(t=>dm(n,t))}function CT(n){let e=n.children.length>0?` { ${n.children.map(CT).join(", ")} } `:"";return`${n.value}${e}`}function Lg(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Rn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Rn(e.params,t.params)||n.paramsSubject.next(t.params),pk(e.url,t.url)||n.urlSubject.next(t.url),Rn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function rm(n,e){let t=Rn(n.params,e.params)&&vk(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||rm(n.parent,e.parent))}function TT(n){return typeof n.title=="string"||n.title===null}var $k=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ae,this.activateEvents=new Dt,this.deactivateEvents=new Dt,this.attachEvents=new Dt,this.detachEvents=new Dt,this.parentContexts=j(Za),this.location=j(Sa),this.changeDetector=j(Ra),this.inputBinder=j(id,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new X(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new X(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new X(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new X(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new im(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=gl({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[_l]})}}return n})(),im=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Go?this.route:e===Za?this.childContexts:this.parent.get(e,t)}},id=new W(""),rT=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=ca([r.queryParams,r.params,r.data]).pipe($e(([o,s,a],c)=>(a=V(V(V({},o),s),a),c===0?J(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=xC(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function Hk(n,e,t){let r=qa(n,e._root,t?t._root:void 0);return new Zl(r,e)}function qa(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=qk(n,e,t);return new qt(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>qa(n,a)),s}}let r=zk(e.value),i=e.children.map(o=>qa(n,o));return new qt(r,i)}}function qk(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return qa(n,r,i);return qa(n,r)})}function zk(n){return new Go(new ct(n.url),new ct(n.params),new ct(n.queryParams),new ct(n.fragment),new ct(n.data),n.outlet,n.component,n)}var za=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},bT="ngNavigationCancelingError";function ed(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Ua(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=ST(!1,zt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function ST(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[bT]=!0,t.cancellationCode=e,t}function Gk(n){return AT(n)&&Ua(n.url)}function AT(n){return!!n&&n[bT]}var Wk=(n,e,t,r)=>G(i=>(new om(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),om=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Lg(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Vo(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Vo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Vo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Vo(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Xg(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Zg(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Lg(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Lg(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},td=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Bo=class{constructor(e,t){this.component=e,this.route=t}};function Kk(n,e,t){let r=n._root,i=e?e._root:null;return Oa(r,i,t,[r.value])}function Qk(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ko(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!fE(n)?n:e.get(n):r}function Oa(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Vo(e);return n.children.forEach(s=>{Yk(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ja(a,t.getContext(s),i)),i}function Yk(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=Zk(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new td(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Oa(n,e,a?a.children:null,r,i):Oa(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Bo(a.outlet.component,s))}else s&&ja(e,a,i),i.canActivateChecks.push(new td(r)),o.component?Oa(n,null,a?a.children:null,r,i):Oa(n,null,t,r,i);return i}function Zk(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ci(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ci(n.url,e.url)||!Rn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!rm(n,e)||!Rn(n.queryParams,e.queryParams);case"paramsChange":default:return!rm(n,e)}}function ja(n,e,t){let r=Vo(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?ja(s,e.children.getContext(o),t):ja(s,null,t):ja(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Bo(e.outlet.component,i)):t.canDeactivateChecks.push(new Bo(null,i)):t.canDeactivateChecks.push(new Bo(null,i))}function Ja(n){return typeof n=="function"}function Jk(n){return typeof n=="boolean"}function Xk(n){return n&&Ja(n.canLoad)}function eO(n){return n&&Ja(n.canActivate)}function tO(n){return n&&Ja(n.canActivateChild)}function nO(n){return n&&Ja(n.canDeactivate)}function rO(n){return n&&Ja(n.canMatch)}function xT(n){return n instanceof zn||n?.name==="EmptyError"}var Bl=Symbol("INITIAL_VALUE");function Wo(){return $e(n=>ca(n.map(e=>e.pipe(Gn(1),ci(Bl)))).pipe(G(e=>{for(let t of e)if(t!==!0){if(t===Bl)return Bl;if(t===!1||iO(t))return t}return!0}),lt(e=>e!==Bl),Gn(1)))}function iO(n){return Ua(n)||n instanceof za}function oO(n,e){return Qe(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?J(xe(V({},t),{guardsResult:!0})):sO(s,r,i,n).pipe(Qe(a=>a&&Jk(a)?aO(r,o,n,e):J(a)),G(a=>xe(V({},t),{guardsResult:a})))})}function sO(n,e,t,r){return Ee(n).pipe(Qe(i=>hO(i.component,i.route,t,e,r)),Qt(i=>i!==!0,!0))}function aO(n,e,t,r){return Ee(e).pipe(ai(i=>go(cO(i.route.parent,r),uO(i.route,r),dO(n,i.path,t),lO(n,i.route,t))),Qt(i=>i!==!0,!0))}function uO(n,e){return n!==null&&e&&e(new Jg(n)),J(!0)}function cO(n,e){return n!==null&&e&&e(new Yg(n)),J(!0)}function lO(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return J(!0);let i=r.map(o=>Rc(()=>{let s=Ya(e)??t,a=Ko(o,s),c=eO(a)?a.canActivate(e,n):Sn(s,()=>a(e,n));return Mr(c).pipe(Qt())}));return J(i).pipe(Wo())}function dO(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>Qk(s)).filter(s=>s!==null).map(s=>Rc(()=>{let a=s.guards.map(c=>{let l=Ya(s.node)??t,h=Ko(c,l),p=tO(h)?h.canActivateChild(r,n):Sn(l,()=>h(r,n));return Mr(p).pipe(Qt())});return J(a).pipe(Wo())}));return J(o).pipe(Wo())}function hO(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return J(!0);let s=o.map(a=>{let c=Ya(e)??i,l=Ko(a,c),h=nO(l)?l.canDeactivate(n,e,t,r):Sn(c,()=>l(n,e,t,r));return Mr(h).pipe(Qt())});return J(s).pipe(Wo())}function fO(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return J(!0);let o=i.map(s=>{let a=Ko(s,n),c=Xk(a)?a.canLoad(e,t):Sn(n,()=>a(e,t));return Mr(c)});return J(o).pipe(Wo(),RT(r))}function RT(n){return bf(nt(e=>{if(typeof e!="boolean")throw ed(n,e)}),G(e=>e===!0))}function pO(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return J(!0);let o=i.map(s=>{let a=Ko(s,n),c=rO(a)?a.canMatch(e,t):Sn(n,()=>a(e,t));return Mr(c)});return J(o).pipe(Wo(),RT(r))}var Ga=class{constructor(e){this.segmentGroup=e||null}},Wa=class extends Error{constructor(e){super(),this.urlTree=e}};function Lo(n){return po(new Ga(n))}function gO(n){return po(new X(4e3,!1))}function mO(n){return po(ST(!1,zt.GuardRejected))}var sm=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return J(r);if(i.numberOfChildren>1||!i.children[ae])return gO(`${e.redirectTo}`);i=i.children[ae]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,params:v,data:b,title:M}=i,N=Sn(o,()=>a({params:v,data:b,queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,title:M}));if(N instanceof er)throw new Wa(N);t=N}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Wa(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new er(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new De(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new X(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},am={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function yO(n,e,t,r,i){let o=MT(n,e,t);return o.matched?(r=jk(e,r),pO(r,e,t,i).pipe(G(s=>s===!0?o:V({},am)))):J(o)}function MT(n,e,t){if(e.path==="**")return vO(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?V({},am):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||fk)(t,n,e);if(!i)return V({},am);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?V(V({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function vO(n){return{matched:!0,parameters:n.length>0?lT(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function iT(n,e,t,r){return t.length>0&&IO(n,t,r)?{segmentGroup:new De(e,wO(r,new De(t,n.children))),slicedSegments:[]}:t.length===0&&EO(n,t,r)?{segmentGroup:new De(n.segments,_O(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new De(n.segments,n.children),slicedSegments:t}}function _O(n,e,t,r){let i={};for(let o of t)if(od(n,e,o)&&!r[fn(o)]){let s=new De([],{});i[fn(o)]=s}return V(V({},r),i)}function wO(n,e){let t={};t[ae]=e;for(let r of n)if(r.path===""&&fn(r)!==ae){let i=new De([],{});t[fn(r)]=i}return t}function IO(n,e,t){return t.some(r=>od(n,e,r)&&fn(r)!==ae)}function EO(n,e,t){return t.some(r=>od(n,e,r))}function od(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function DO(n,e,t){return e.length===0&&!n.children[t]}var um=class{};function CO(n,e,t,r,i,o,s="emptyOnly"){return new cm(n,e,t,r,i,s,o).recognize()}var TO=31,cm=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new sm(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new X(4002,`'${e.segmentGroup}'`)}recognize(){let e=iT(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(G(({children:t,rootSnapshot:r})=>{let i=new qt(r,t),o=new Xl("",i),s=Nk(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Uo([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ae,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ae,t).pipe(G(r=>({children:r,rootSnapshot:t})),vr(r=>{if(r instanceof Wa)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ga?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(G(s=>s instanceof qt?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ee(o).pipe(ai(s=>{let a=r.children[s],c=Uk(t,s);return this.processSegmentGroup(e,c,a,s,i)}),ui((s,a)=>(s.push(...a),s)),_r(null),Ff(),Qe(s=>{if(s===null)return Lo(r);let a=NT(s);return bO(a),J(a)}))}processSegment(e,t,r,i,o,s,a){return Ee(t).pipe(ai(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(vr(l=>{if(l instanceof Ga)return J(null);throw l}))),Qt(c=>!!c),vr(c=>{if(xT(c))return DO(r,i,o)?J(new um):Lo(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return fn(r)!==s&&(s===ae||!od(i,o,r))?Lo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):Lo(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=MT(t,i,o);if(!c)return Lo(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>TO&&(this.allowRedirects=!1));let v=new Uo(o,l,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,oT(i),fn(i),i.component??i._loadedComponent??null,i,sT(i)),b=Jl(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(b.params),v.data=Object.freeze(b.data);let M=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,v,e);return this.applyRedirects.lineralizeSegments(i,M).pipe(Qe(N=>this.processSegment(e,r,t,N.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=yO(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe($e(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe($e(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:v}=c,b=new Uo(m,p,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,oT(r),fn(r),r.component??r._loadedComponent??null,r,sT(r)),M=Jl(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(M.params),b.data=Object.freeze(M.data);let{segmentGroup:N,slicedSegments:U}=iT(t,m,v,l);if(U.length===0&&N.hasChildren())return this.processChildren(h,l,N,b).pipe(G(F=>new qt(b,F)));if(l.length===0&&U.length===0)return J(new qt(b,[]));let q=fn(r)===o;return this.processSegment(h,l,N,U,q?ae:o,!0,b).pipe(G(F=>new qt(b,F instanceof qt?[F]:[])))}))):Lo(t)))}getChildConfig(e,t,r){return t.children?J({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?J({routes:t._loadedRoutes,injector:t._loadedInjector}):fO(e,t,r,this.urlSerializer).pipe(Qe(i=>i?this.configLoader.loadChildren(e,t).pipe(nt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):mO(t))):J({routes:[],injector:e})}};function bO(n){n.sort((e,t)=>e.value.outlet===ae?-1:t.value.outlet===ae?1:e.value.outlet.localeCompare(t.value.outlet))}function SO(n){let e=n.value.routeConfig;return e&&e.path===""}function NT(n){let e=[],t=new Set;for(let r of n){if(!SO(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=NT(r.children);e.push(new qt(r.value,i))}return e.filter(r=>!t.has(r))}function oT(n){return n.data||{}}function sT(n){return n.resolve||{}}function AO(n,e,t,r,i,o){return Qe(s=>CO(n,e,t,r,s.extractedUrl,i,o).pipe(G(({state:a,tree:c})=>xe(V({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function xO(n,e){return Qe(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return J(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of PT(c))s.add(l);let a=0;return Ee(s).pipe(ai(c=>o.has(c)?RO(c,r,n,e):(c.data=Jl(c,c.parent,n).resolve,J(void 0))),nt(()=>a++),mo(1),Qe(c=>a===s.size?J(t):Et))})}function PT(n){let e=n.children.map(t=>PT(t)).flat();return[n,...e]}function RO(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!TT(i)&&(o[Ka]=i.title),MO(o,n,e,r).pipe(G(s=>(n._resolvedData=s,n.data=Jl(n,n.parent,t).resolve,null)))}function MO(n,e,t,r){let i=Ug(n);if(i.length===0)return J({});let o={};return Ee(i).pipe(Qe(s=>NO(n[s],e,t,r).pipe(Qt(),nt(a=>{if(a instanceof za)throw ed(new Ho,a);o[s]=a}))),mo(1),kf(o),vr(s=>xT(s)?Et:po(s)))}function NO(n,e,t,r){let i=Ya(e)??r,o=Ko(n,i),s=o.resolve?o.resolve(e,t):Sn(i,()=>o(e,t));return Mr(s)}function Vg(n){return $e(e=>{let t=n(e);return t?Ee(t).pipe(G(()=>e)):J(e)})}var kT=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ae);return r}getResolvedTitleForRoute(t){return t.data[Ka]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(PO),providedIn:"root"})}}return n})(),PO=(()=>{class n extends kT{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(O(ZC))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Xa=new W("",{providedIn:"root",factory:()=>({})}),kO=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=st({type:n,selectors:[["ng-component"]],standalone:!0,features:[vC],decls:1,vars:0,template:function(r,i){r&1&&Ne(0,"router-outlet")},dependencies:[$k],encapsulation:2})}}return n})();function hm(n){let e=n.children&&n.children.map(hm),t=e?xe(V({},n),{children:e}):V({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ae&&(t.component=kO),t}var nd=new W(""),fm=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=j(Ol)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return J(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Mr(t.loadComponent()).pipe(G(OT),nt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),la(()=>{this.componentLoaders.delete(t)})),i=new co(r,()=>new qe).pipe(uo());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return J({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=OO(r,this.compiler,t,this.onLoadEndListener).pipe(la(()=>{this.childrenLoaders.delete(r)})),s=new co(o,()=>new qe).pipe(uo());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function OO(n,e,t,r){return Mr(n.loadChildren()).pipe(G(OT),Qe(i=>i instanceof Ea||Array.isArray(i)?J(i):Ee(e.compileModuleAsync(i))),G(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(nd,[],{optional:!0,self:!0}).flat()),{routes:s.map(hm),injector:o}}))}function FO(n){return n&&typeof n=="object"&&"default"in n}function OT(n){return FO(n)?n.default:n}var pm=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(LO),providedIn:"root"})}}return n})(),LO=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),FT=new W(""),LT=new W("");function VO(n,e,t){let r=n.get(LT),i=n.get(kt);return n.get(me).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),jO(n))),{onViewTransitionCreated:c}=r;return c&&Sn(n,()=>c({transition:a,from:e,to:t})),s})}function jO(n){return new Promise(e=>{lg({read:()=>setTimeout(e)},{injector:n})})}var UO=new W(""),gm=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new qe,this.transitionAbortSubject=new qe,this.configLoader=j(fm),this.environmentInjector=j(Bt),this.urlSerializer=j(Qa),this.rootContexts=j(Za),this.location=j(Oo),this.inputBindingEnabled=j(id,{optional:!0})!==null,this.titleStrategy=j(kT),this.options=j(Xa,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=j(pm),this.createViewTransition=j(FT,{optional:!0}),this.navigationErrorHandler=j(UO,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>J(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Kg(i)),r=i=>this.events.next(new Qg(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(xe(V(V({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new ct({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Va,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(lt(o=>o.id!==0),G(o=>xe(V({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),$e(o=>{let s=!1,a=!1;return J(o).pipe($e(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",zt.SupersededByNewNavigation),Et;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?xe(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new Rr(c.id,this.urlSerializer.serialize(c.rawUrl),p,Wl.IgnoredSameUrlNavigation)),c.resolve(!1),Et}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return J(c).pipe($e(p=>{let m=this.transitions?.getValue();return this.events.next(new qo(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?Et:Promise.resolve(p)}),AO(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),nt(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=xe(V({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new Kl(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:m,source:v,restoredState:b,extras:M}=c,N=new qo(p,this.urlSerializer.serialize(m),v,b);this.events.next(N);let U=DT(this.rootComponentType).snapshot;return this.currentTransition=o=xe(V({},c),{targetSnapshot:U,urlAfterRedirects:m,extras:xe(V({},M),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,J(o)}else{let p="";return this.events.next(new Rr(c.id,this.urlSerializer.serialize(c.extractedUrl),p,Wl.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Et}}),nt(c=>{let l=new qg(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),G(c=>(this.currentTransition=o=xe(V({},c),{guards:Kk(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),oO(this.environmentInjector,c=>this.events.next(c)),nt(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw ed(this.urlSerializer,c.guardsResult);let l=new zg(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),lt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",zt.GuardRejected),!1)),Vg(c=>{if(c.guards.canActivateChecks.length)return J(c).pipe(nt(l=>{let h=new Gg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),$e(l=>{let h=!1;return J(l).pipe(xO(this.paramsInheritanceStrategy,this.environmentInjector),nt({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",zt.NoDataFromResolver)}}))}),nt(l=>{let h=new Wg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Vg(c=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(nt(m=>{h.component=m}),G(()=>{})));for(let m of h.children)p.push(...l(m));return p};return ca(l(c.targetSnapshot.root)).pipe(_r(null),Gn(1))}),Vg(()=>this.afterPreactivation()),$e(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return h?Ee(h).pipe(G(()=>o)):J(o)}),G(c=>{let l=Hk(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=xe(V({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),nt(()=>{this.events.next(new Ha)}),Wk(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Gn(1),nt({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new tr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),Vf(this.transitionAbortSubject.pipe(nt(c=>{throw c}))),la(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",zt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),vr(c=>{if(a=!0,AT(c))this.events.next(new Xn(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),Gk(c)?this.events.next(new zo(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let l=new $a(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let h=Sn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof za){let{message:p,cancellationCode:m}=ed(this.urlSerializer,h);this.events.next(new Xn(o.id,this.urlSerializer.serialize(o.extractedUrl),p,m)),this.events.next(new zo(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(c);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return Et}))}))}cancelNavigationTransition(t,r,i){let o=new Xn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function BO(n){return n!==Va}var $O=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(HO),providedIn:"root"})}}return n})(),lm=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},HO=(()=>{class n extends lm{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=zp(n)))(i||n)}})()}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),VT=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(qO),providedIn:"root"})}}return n})(),qO=(()=>{class n extends VT{constructor(){super(...arguments),this.location=j(Oo),this.urlSerializer=j(Qa),this.options=j(Xa,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=j(pm),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new er,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=DT(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof qo)this.stateMemento=this.createStateMemento();else if(t instanceof Rr)this.rawUrlTree=r.initialUrl;else if(t instanceof Kl){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Ha?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Xn&&(t.code===zt.GuardRejected||t.code===zt.NoDataFromResolver)?this.restoreHistory(r):t instanceof $a?this.restoreHistory(r,!0):t instanceof tr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof er?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=V(V({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=V(V({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=zp(n)))(i||n)}})()}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Fa=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Fa||{});function jT(n,e){n.events.pipe(lt(t=>t instanceof tr||t instanceof Xn||t instanceof $a||t instanceof Rr),G(t=>t instanceof tr||t instanceof Rr?Fa.COMPLETE:(t instanceof Xn?t.code===zt.Redirect||t.code===zt.SupersededByNewNavigation:!1)?Fa.REDIRECTING:Fa.FAILED),lt(t=>t!==Fa.REDIRECTING),Gn(1)).subscribe(()=>{e()})}function zO(n){throw n}var GO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},WO={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ti=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=j(Ml),this.stateManager=j(VT),this.options=j(Xa,{optional:!0})||{},this.pendingTasks=j(ko),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=j(gm),this.urlSerializer=j(Qa),this.location=j(Oo),this.urlHandlingStrategy=j(pm),this._events=new qe,this.errorHandler=this.options.errorHandler||zO,this.navigated=!1,this.routeReuseStrategy=j($O),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=j(nd,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!j(id,{optional:!0}),this.eventsSubscription=new Be,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Xn&&r.code!==zt.Redirect&&r.code!==zt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof tr)this.navigated=!0;else if(r instanceof zo){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||BO(i.source)},s);this.scheduleNavigation(a,Va,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}QO(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Va,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=V({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(hm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=V(V({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=_T(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return wT(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Ua(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Va,null,r)}navigate(t,r={skipLocationChange:!1}){return KO(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=V({},GO):r===!1?i=V({},WO):i=r,Ua(t))return XC(this.currentUrlTree,t,i);let o=this.parseUrl(t);return XC(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,c=m});let h=this.pendingTasks.add();return jT(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function KO(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new X(4008,!1)}function QO(n){return!(n instanceof Ha)&&!(n instanceof zo)}var rd=class{};var YO=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(lt(t=>t instanceof tr),ai(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Rl(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Ee(i).pipe(yr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=J(null);let o=i.pipe(Qe(s=>s===null?J(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Ee([o,s]).pipe(yr())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(O(Ti),O(Ol),O(Bt),O(rd),O(fm))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),UT=new W(""),ZO=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof qo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof tr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Rr&&t.code===Wl.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ql&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ql(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){HD()}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function JO(n){return n.routerState.root}function eu(n,e){return{\u0275kind:n,\u0275providers:e}}function XO(){let n=j(en);return e=>{let t=n.get(xr);if(e!==t.components[0])return;let r=n.get(Ti),i=n.get(BT);n.get(mm)===1&&r.initialNavigation(),n.get($T,null,ce.Optional)?.setUpPreloading(),n.get(UT,null,ce.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var BT=new W("",{factory:()=>new qe}),mm=new W("",{providedIn:"root",factory:()=>1});function eF(){return eu(2,[{provide:mm,useValue:0},{provide:kl,multi:!0,deps:[en],useFactory:e=>{let t=e.get(FC,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(Ti),o=e.get(BT);jT(i,()=>{r(!0)}),e.get(gm).afterPreactivation=()=>(r(!0),o.closed?J(void 0):o),i.initialNavigation()}))}}])}function tF(){return eu(3,[{provide:kl,multi:!0,useFactory:()=>{let e=j(Ti);return()=>{e.setUpLocationChangeListener()}}},{provide:mm,useValue:2}])}var $T=new W("");function nF(n){return eu(0,[{provide:$T,useExisting:YO},{provide:rd,useExisting:n}])}function rF(){return eu(8,[rT,{provide:id,useExisting:rT}])}function iF(n){let e=[{provide:FT,useValue:VO},{provide:LT,useValue:V({skipNextTransition:!!n?.skipInitialTransition},n)}];return eu(9,e)}var aT=new W("ROUTER_FORROOT_GUARD"),oF=[Oo,{provide:Qa,useClass:Ho},Ti,Za,{provide:Go,useFactory:JO,deps:[Ti]},fm,[]],ym=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[oF,[],{provide:nd,multi:!0,useValue:t},{provide:aT,useFactory:cF,deps:[[Ti,new No,new Np]]},{provide:Xa,useValue:r||{}},r?.useHash?aF():uF(),sF(),r?.preloadingStrategy?nF(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?lF(r):[],r?.bindToComponentInputs?rF().\u0275providers:[],r?.enableViewTransitions?iF().\u0275providers:[],dF()]}}static forChild(t){return{ngModule:n,providers:[{provide:nd,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(O(aT,8))}}static{this.\u0275mod=bt({type:n})}static{this.\u0275inj=Tt({})}}return n})();function sF(){return{provide:UT,useFactory:()=>{let n=j(BC),e=j(me),t=j(Xa),r=j(gm),i=j(Qa);return t.scrollOffset&&n.setOffset(t.scrollOffset),new ZO(i,r,n,e,t)}}}function aF(){return{provide:Ii,useClass:VC}}function uF(){return{provide:Ii,useClass:Tg}}function cF(n){return"guarded"}function lF(n){return[n.initialNavigation==="disabled"?tF().\u0275providers:[],n.initialNavigation==="enabledBlocking"?eF().\u0275providers:[]]}var uT=new W("");function dF(){return[{provide:uT,useFactory:XO},{provide:gg,multi:!0,useExisting:uT}]}var hF=[],HT=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=bt({type:n})}static{this.\u0275inj=Tt({imports:[ym.forRoot(hF),ym]})}}return n})();var sd=class{constructor(){this.name="name",this.goalLife="goal",this.photoUrl="photo",this.email="email@domain.com",this.phoneNumber="999-999-9999",this.location="city, country",this.socialNetwork="@facebook"}};var fF="firebase",pF="10.14.1";mr(fF,pF,"app");var tu=new Ar("ANGULARFIRE2_VERSION");var gF=(n,e)=>{let t=e?[e]:Zw(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},bi=class{constructor(){return gF(mF)}},mF="app-check";function vm(){}var ad=class{zone;delegate;constructor(e,t=Rf){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},_m=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vm,{},vm,vm)),t.pipe(nt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},ud=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new ad(Zone.current)),this.insideAngular=t.run(()=>new ad(Zone.current,ua)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(O(me))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yF(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Ot(n){return vF(yF())(n)}function vF(n){return function(t){return t=t.lift(new _m(n.ngZone)),t.pipe(cn(n.outsideAngular),Kt(n.insideAngular))}}var IF=new Map,EF={activated:!1,tokenObservers:[]},DF={initialized:!1,enabled:!1};function pn(n){return IF.get(n)||Object.assign({},EF)}function QT(){return DF}var CF="https://content-firebaseappcheck.googleapis.com/v1";var TF="exchangeDebugToken",zT={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},a9=24*60*60*1e3;var Im=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return R(this,null,function*(){this.stop();try{this.pending=new cf,this.pending.promise.catch(t=>{}),yield bF(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new cf,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function bF(n){return new Promise(e=>{setTimeout(e,n)})}var SF={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Nr=new Qw("appCheck","AppCheck",SF);function YT(n){if(!pn(n).activated)throw Nr.create("use-before-activation",{appName:n.name})}function ZT(r,i){return R(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let v=yield s.getHeartbeatsHeader();v&&(o["X-Firebase-Client"]=v)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(v){throw Nr.create("fetch-network-error",{originalErrorMessage:v?.message})}if(c.status!==200)throw Nr.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(v){throw Nr.create("fetch-parse-error",{originalErrorMessage:v?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Nr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function JT(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${CF}/projects/${t}/apps/${r}:${TF}?key=${i}`,body:{debug_token:e}}}var AF="firebase-app-check-database",xF=1,Em="firebase-app-check-store";var cd=null;function RF(){return cd||(cd=new Promise((n,e)=>{try{let t=indexedDB.open(AF,xF);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Nr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Em,{keyPath:"compositeKey"})}}}catch(t){e(Nr.create("storage-open",{originalErrorMessage:t?.message}))}}),cd)}function MF(n,e){return NF(PF(n),e)}function NF(n,e){return R(this,null,function*(){let r=(yield RF()).transaction(Em,"readwrite"),o=r.objectStore(Em).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(Nr.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function PF(n){return`${n.options.appId}-${n.name}`}var Dm=new lc("@firebase/app-check");function wm(n,e){return cc()?MF(n,e).catch(t=>{Dm.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function XT(){return QT().enabled}function e0(){return R(this,null,function*(){let n=QT();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var kF={error:"UNKNOWN_ERROR"};function OF(n){return Gw.encodeString(JSON.stringify(n),!1)}function Cm(n,e=!1){return R(this,null,function*(){let t=n.app;YT(t);let r=pn(t),i=r.token,o;if(i&&!nu(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(nu(c)?i=c:yield wm(t,void 0))}if(!e&&i&&nu(i))return{token:i.token};let s=!1;if(XT()){r.exchangeTokenPromise||(r.exchangeTokenPromise=ZT(JT(t,yield e0()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield wm(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield pn(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?Dm.warn(c.message):Dm.error(c),o=c}let a;return i?o?nu(i)?a={token:i.token,internalError:o}:a=WT(o):(a={token:i.token},r.token=i,yield wm(t,i)):a=WT(o),s&&jF(t,a),a})}function FF(n){return R(this,null,function*(){let e=n.app;YT(e);let{provider:t}=pn(e);if(XT()){let r=yield e0(),{token:i}=yield ZT(JT(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function LF(n,e,t,r){let{app:i}=n,o=pn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&nu(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),GT(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>GT(n))}function t0(n,e){let t=pn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function GT(n){let{app:e}=n,t=pn(e),r=t.tokenRefresher;r||(r=VF(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function VF(n){let{app:e}=n;return new Im(()=>R(this,null,function*(){let t=pn(e),r;if(t.token?r=yield Cm(n,!0):r=yield Cm(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=pn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},zT.RETRIAL_MIN_WAIT,zT.RETRIAL_MAX_WAIT)}function jF(n,e){let t=pn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function nu(n){return n.expireTimeMillis-Date.now()>0}function WT(n){return{token:OF(kF),error:n}}var Tm=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=pn(this.app);for(let t of e)t0(this.app,t.next);return Promise.resolve()}};function UF(n,e){return new Tm(n,e)}function BF(n){return{getToken:e=>Cm(n,e),getLimitedUseToken:()=>FF(n),addTokenListener:e=>LF(n,"INTERNAL",e),removeTokenListener:e=>t0(n.app,e)}}var $F="@firebase/app-check",HF="0.8.8";var qF="app-check",KT="app-check-internal";function zF(){ia(new ri(qF,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return UF(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(KT).initialize()})),ia(new ri(KT,n=>{let e=n.getProvider("app-check").getImmediate();return BF(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),mr($F,HF)}zF();var GF=["localhost","0.0.0.0","127.0.0.1"],_9=typeof window<"u"&&GF.includes(window.location.hostname);var WF="firebase",KF="10.14.1";jt.registerVersion(WF,KF,"app-compat");var QF=["ngOnDestroy"],i0=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(QF.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(h=>{let p=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var ld=class{constructor(e){return e}},Qo=new W("angularfire2.app.options"),Yo=new W("angularfire2.app.name");function ru(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=jt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>jt.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;YF("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new ld(s)}var YF=(n,...e)=>{vg()&&typeof console<"u"&&console[n](...e)},ZF={provide:ld,useFactory:ru,deps:[Qo,me,[new No,Yo]]},bm=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Qo,useValue:t},{provide:Yo,useValue:r}]}}constructor(t){jt.registerVersion("angularfire",tu.full,"core"),jt.registerVersion("angularfire",tu.full,"app-compat"),jt.registerVersion("angular",_C.full,t.toString())}static \u0275fac=function(r){return new(r||n)(O(Pt))};static \u0275mod=bt({type:n});static \u0275inj=Tt({providers:[ZF]})}return n})();function dd(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return JF(i,s)||(r0("error",`${e} was already initialized on the ${t} Firebase App with different settings.${XF?" You may need to reload as Firebase is not HMR aware.":""}`),r0("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function JF(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var XF=typeof module<"u"&&!!module.hot,r0=(n,...e)=>{vg()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Sm=new W("angularfire2.auth.use-emulator"),Am=new W("angularfire2.auth.settings"),xm=new W("angularfire2.auth.tenant-id"),Rm=new W("angularfire2.auth.langugage-code"),Mm=new W("angularfire2.auth.use-device-language"),Nm=new W("angularfire.auth.persistence"),Pm=(n,e,t,r,i,o,s,a)=>dd(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))c.settings[l]=h;return a&&c.setPersistence(a),c},[t,r,i,o,s,a]),o0=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,c,l,h,p,m,v){let b=new qe,M=J(void 0).pipe(Kt(s.outsideAngular),$e(()=>o.runOutsideAngular(()=>import("./chunk-DT56ZVVI.js"))),G(()=>ru(t,o,r)),G(N=>Pm(N,o,a,l,h,p,c,m)),Nc({bufferSize:1,refCount:!1}));if(Ei(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=J(null);else{M.pipe(Qt()).subscribe();let N=M.pipe($e(F=>F.getRedirectResult().then(Y=>Y,()=>null)),Ot,Nc({bufferSize:1,refCount:!1})),U=M.pipe($e(F=>new fe(Y=>({unsubscribe:o.runOutsideAngular(()=>F.onAuthStateChanged(ee=>Y.next(ee),ee=>Y.error(ee),()=>Y.complete()))})))),q=M.pipe($e(F=>new fe(Y=>({unsubscribe:o.runOutsideAngular(()=>F.onIdTokenChanged(ee=>Y.next(ee),ee=>Y.error(ee),()=>Y.complete()))}))));this.authState=N.pipe(Pc(U),cn(s.outsideAngular),Kt(s.insideAngular)),this.user=N.pipe(Pc(q),cn(s.outsideAngular),Kt(s.insideAngular)),this.idToken=this.user.pipe($e(F=>F?Ee(F.getIdToken()):J(null))),this.idTokenResult=this.user.pipe($e(F=>F?Ee(F.getIdTokenResult()):J(null))),this.credential=Pf(N,b,this.authState.pipe(lt(F=>!F))).pipe(G(F=>F?.user?F:null),cn(s.outsideAngular),Kt(s.insideAngular))}return i0(this,M,o,{spy:{apply:(N,U,q)=>{(N.startsWith("signIn")||N.startsWith("createUser"))&&q.then(F=>b.next(F))}}})}static \u0275fac=function(r){return new(r||n)(O(Qo),O(Yo,8),O(Pt),O(me),O(ud),O(Sm,8),O(Am,8),O(xm,8),O(Rm,8),O(Mm,8),O(Nm,8),O(bi,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var s0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},a0={};var Pr,km;(function(){var n;function e(I,y){function w(){}w.prototype=y.prototype,I.D=y.prototype,I.prototype=new w,I.prototype.constructor=I,I.C=function(E,D,T){for(var _=Array(arguments.length-2),Bn=2;Bn<arguments.length;Bn++)_[Bn-2]=arguments[Bn];return y.prototype[D].apply(E,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,y,w){w||(w=0);var E=Array(16);if(typeof y=="string")for(var D=0;16>D;++D)E[D]=y.charCodeAt(w++)|y.charCodeAt(w++)<<8|y.charCodeAt(w++)<<16|y.charCodeAt(w++)<<24;else for(D=0;16>D;++D)E[D]=y[w++]|y[w++]<<8|y[w++]<<16|y[w++]<<24;y=I.g[0],w=I.g[1],D=I.g[2];var T=I.g[3],_=y+(T^w&(D^T))+E[0]+3614090360&4294967295;y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[1]+3905402710&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[2]+606105819&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[3]+3250441966&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(T^w&(D^T))+E[4]+4118548399&4294967295,y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[5]+1200080426&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[6]+2821735955&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[7]+4249261313&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(T^w&(D^T))+E[8]+1770035416&4294967295,y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[9]+2336552879&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[10]+4294925233&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[11]+2304563134&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(T^w&(D^T))+E[12]+1804603682&4294967295,y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[13]+4254626195&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[14]+2792965006&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[15]+1236535329&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(D^T&(w^D))+E[1]+4129170786&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[6]+3225465664&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[11]+643717713&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[0]+3921069994&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(w^D))+E[5]+3593408605&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[10]+38016083&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[15]+3634488961&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[4]+3889429448&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(w^D))+E[9]+568446438&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[14]+3275163606&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[3]+4107603335&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[8]+1163531501&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(w^D))+E[13]+2850285829&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[2]+4243563512&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[7]+1735328473&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[12]+2368359562&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(w^D^T)+E[5]+4294588738&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[8]+2272392833&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[11]+1839030562&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[14]+4259657740&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(w^D^T)+E[1]+2763975236&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[4]+1272893353&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[7]+4139469664&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[10]+3200236656&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(w^D^T)+E[13]+681279174&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[0]+3936430074&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[3]+3572445317&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[6]+76029189&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(w^D^T)+E[9]+3654602809&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[12]+3873151461&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[15]+530742520&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[2]+3299628645&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(D^(w|~T))+E[0]+4096336452&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[7]+1126891415&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[14]+2878612391&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[5]+4237533241&4294967295,w=D+(_<<21&4294967295|_>>>11),_=y+(D^(w|~T))+E[12]+1700485571&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[3]+2399980690&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[10]+4293915773&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[1]+2240044497&4294967295,w=D+(_<<21&4294967295|_>>>11),_=y+(D^(w|~T))+E[8]+1873313359&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[15]+4264355552&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[6]+2734768916&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[13]+1309151649&4294967295,w=D+(_<<21&4294967295|_>>>11),_=y+(D^(w|~T))+E[4]+4149444226&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[11]+3174756917&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[2]+718787259&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[9]+3951481745&4294967295,I.g[0]=I.g[0]+y&4294967295,I.g[1]=I.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+T&4294967295}r.prototype.u=function(I,y){y===void 0&&(y=I.length);for(var w=y-this.blockSize,E=this.B,D=this.h,T=0;T<y;){if(D==0)for(;T<=w;)i(this,I,T),T+=this.blockSize;if(typeof I=="string"){for(;T<y;)if(E[D++]=I.charCodeAt(T++),D==this.blockSize){i(this,E),D=0;break}}else for(;T<y;)if(E[D++]=I[T++],D==this.blockSize){i(this,E),D=0;break}}this.h=D,this.o+=y},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var y=1;y<I.length-8;++y)I[y]=0;var w=8*this.o;for(y=I.length-8;y<I.length;++y)I[y]=w&255,w/=256;for(this.u(I),I=Array(16),y=w=0;4>y;++y)for(var E=0;32>E;E+=8)I[w++]=this.g[y]>>>E&255;return I};function o(I,y){var w=a;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=y(I)}function s(I,y){this.h=y;for(var w=[],E=!0,D=I.length-1;0<=D;D--){var T=I[D]|0;E&&T==y||(w[D]=T,E=!1)}this.g=w}var a={};function c(I){return-128<=I&&128>I?o(I,function(y){return new s([y|0],0>y?-1:0)}):new s([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return N(l(-I));for(var y=[],w=1,E=0;I>=w;E++)y[E]=I/w|0,w*=4294967296;return new s(y,0)}function h(I,y){if(I.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(I.charAt(0)=="-")return N(h(I.substring(1),y));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(y,8)),E=p,D=0;D<I.length;D+=8){var T=Math.min(8,I.length-D),_=parseInt(I.substring(D,D+T),y);8>T?(T=l(Math.pow(y,T)),E=E.j(T).add(l(_))):(E=E.j(w),E=E.add(l(_)))}return E}var p=c(0),m=c(1),v=c(16777216);n=s.prototype,n.m=function(){if(M(this))return-N(this).m();for(var I=0,y=1,w=0;w<this.g.length;w++){var E=this.i(w);I+=(0<=E?E:4294967296+E)*y,y*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(b(this))return"0";if(M(this))return"-"+N(this).toString(I);for(var y=l(Math.pow(I,6)),w=this,E="";;){var D=Y(w,y).g;w=U(w,D.j(y));var T=((0<w.g.length?w.g[0]:w.h)>>>0).toString(I);if(w=D,b(w))return T+E;for(;6>T.length;)T="0"+T;E=T+E}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function b(I){if(I.h!=0)return!1;for(var y=0;y<I.g.length;y++)if(I.g[y]!=0)return!1;return!0}function M(I){return I.h==-1}n.l=function(I){return I=U(this,I),M(I)?-1:b(I)?0:1};function N(I){for(var y=I.g.length,w=[],E=0;E<y;E++)w[E]=~I.g[E];return new s(w,~I.h).add(m)}n.abs=function(){return M(this)?N(this):this},n.add=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0,D=0;D<=y;D++){var T=E+(this.i(D)&65535)+(I.i(D)&65535),_=(T>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);E=_>>>16,T&=65535,_&=65535,w[D]=_<<16|T}return new s(w,w[w.length-1]&-2147483648?-1:0)};function U(I,y){return I.add(N(y))}n.j=function(I){if(b(this)||b(I))return p;if(M(this))return M(I)?N(this).j(N(I)):N(N(this).j(I));if(M(I))return N(this.j(N(I)));if(0>this.l(v)&&0>I.l(v))return l(this.m()*I.m());for(var y=this.g.length+I.g.length,w=[],E=0;E<2*y;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var D=0;D<I.g.length;D++){var T=this.i(E)>>>16,_=this.i(E)&65535,Bn=I.i(D)>>>16,Vs=I.i(D)&65535;w[2*E+2*D]+=_*Vs,q(w,2*E+2*D),w[2*E+2*D+1]+=T*Vs,q(w,2*E+2*D+1),w[2*E+2*D+1]+=_*Bn,q(w,2*E+2*D+1),w[2*E+2*D+2]+=T*Bn,q(w,2*E+2*D+2)}for(E=0;E<y;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=y;E<2*y;E++)w[E]=0;return new s(w,0)};function q(I,y){for(;(I[y]&65535)!=I[y];)I[y+1]+=I[y]>>>16,I[y]&=65535,y++}function F(I,y){this.g=I,this.h=y}function Y(I,y){if(b(y))throw Error("division by zero");if(b(I))return new F(p,p);if(M(I))return y=Y(N(I),y),new F(N(y.g),N(y.h));if(M(y))return y=Y(I,N(y)),new F(N(y.g),y.h);if(30<I.g.length){if(M(I)||M(y))throw Error("slowDivide_ only works with positive integers.");for(var w=m,E=y;0>=E.l(I);)w=ee(w),E=ee(E);var D=Z(w,1),T=Z(E,1);for(E=Z(E,2),w=Z(w,2);!b(E);){var _=T.add(E);0>=_.l(I)&&(D=D.add(w),T=_),E=Z(E,1),w=Z(w,1)}return y=U(I,D.j(y)),new F(D,y)}for(D=p;0<=I.l(y);){for(w=Math.max(1,Math.floor(I.m()/y.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),T=l(w),_=T.j(y);M(_)||0<_.l(I);)w-=E,T=l(w),_=T.j(y);b(T)&&(T=m),D=D.add(T),I=U(I,_)}return new F(D,I)}n.A=function(I){return Y(this,I).h},n.and=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)&I.i(E);return new s(w,this.h&I.h)},n.or=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)|I.i(E);return new s(w,this.h|I.h)},n.xor=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)^I.i(E);return new s(w,this.h^I.h)};function ee(I){for(var y=I.g.length+1,w=[],E=0;E<y;E++)w[E]=I.i(E)<<1|I.i(E-1)>>>31;return new s(w,I.h)}function Z(I,y){var w=y>>5;y%=32;for(var E=I.g.length-w,D=[],T=0;T<E;T++)D[T]=0<y?I.i(T+w)>>>y|I.i(T+w+1)<<32-y:I.i(T+w);return new s(D,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,km=a0.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Pr=a0.Integer=s}).apply(typeof s0<"u"?s0:typeof self<"u"?self:typeof window<"u"?window:{});var hd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},nr={};var Om,tL,Zo,Fm,iu,fd,Lm,Vm,jm;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,f){return u==Array.prototype||u==Object.prototype||(u[d]=f.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof hd=="object"&&hd];for(var d=0;d<u.length;++d){var f=u[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(u,d){if(d)e:{var f=r;u=u.split(".");for(var g=0;g<u.length-1;g++){var C=u[g];if(!(C in f))break e;f=f[C]}u=u[u.length-1],g=f[u],d=d(g),d!=g&&d!=null&&e(f,u,{configurable:!0,writable:!0,value:d})}}function o(u,d){u instanceof String&&(u+="");var f=0,g=!1,C={next:function(){if(!g&&f<u.length){var A=f++;return{value:d(A,u[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(u){return u||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function c(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function l(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,f){return u.call.apply(u.bind,arguments)}function p(u,d,f){if(!u)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),u.apply(d,C)}}return function(){return u.apply(d,arguments)}}function m(u,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function v(u,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),u.apply(this,g)}}function b(u,d){function f(){}f.prototype=d.prototype,u.aa=d.prototype,u.prototype=new f,u.prototype.constructor=u,u.Qb=function(g,C,A){for(var L=Array(arguments.length-2),be=2;be<arguments.length;be++)L[be-2]=arguments[be];return d.prototype[C].apply(g,L)}}function M(u){let d=u.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=u[g];return f}return[]}function N(u,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(c(g)){let C=u.length||0,A=g.length||0;u.length=C+A;for(let L=0;L<A;L++)u[C+L]=g[L]}else u.push(g)}}class U{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function q(u){return/^[\s\xa0]*$/.test(u)}function F(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function Y(u){return Y[" "](u),u}Y[" "]=function(){};var ee=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function Z(u,d,f){for(let g in u)d.call(f,u[g],g,u)}function I(u,d){for(let f in u)d.call(void 0,u[f],f,u)}function y(u){let d={};for(let f in u)d[f]=u[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(u,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)u[f]=g[f];for(let A=0;A<w.length;A++)f=w[A],Object.prototype.hasOwnProperty.call(g,f)&&(u[f]=g[f])}}function D(u){var d=1;u=u.split(":");let f=[];for(;0<d&&u.length;)f.push(u.shift()),d--;return u.length&&f.push(u.join(":")),f}function T(u){a.setTimeout(()=>{throw u},0)}function _(){var u=Fh;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class Bn{constructor(){this.h=this.g=null}add(d,f){let g=Vs.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Vs=new U(()=>new tx,u=>u.reset());class tx{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let js,Us=!1,Fh=new Bn,$_=()=>{let u=a.Promise.resolve(void 0);js=()=>{u.then(nx)}};var nx=()=>{for(var u;u=_();){try{u.h.call(u.g)}catch(f){T(f)}var d=Vs;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}Us=!1};function hr(){this.s=this.s,this.C=this.C}hr.prototype.s=!1,hr.prototype.ma=function(){this.s||(this.s=!0,this.N())},hr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ft(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}ft.prototype.h=function(){this.defaultPrevented=!0};var rx=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return u}();function Bs(u,d){if(ft.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var f=this.type=u.type,g=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(ee){e:{try{Y(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=u.fromElement:f=="mouseout"&&(d=u.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ix[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Bs.aa.h.call(this)}}b(Bs,ft);var ix={2:"touch",3:"pen",4:"mouse"};Bs.prototype.h=function(){Bs.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var $s="closure_listenable_"+(1e6*Math.random()|0),ox=0;function sx(u,d,f,g,C){this.listener=u,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++ox,this.da=this.fa=!1}function zu(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Gu(u){this.src=u,this.g={},this.h=0}Gu.prototype.add=function(u,d,f,g,C){var A=u.toString();u=this.g[A],u||(u=this.g[A]=[],this.h++);var L=Vh(u,d,g,C);return-1<L?(d=u[L],f||(d.fa=!1)):(d=new sx(d,this.src,A,!!g,C),d.fa=f,u.push(d)),d};function Lh(u,d){var f=d.type;if(f in u.g){var g=u.g[f],C=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=C)&&Array.prototype.splice.call(g,C,1),A&&(zu(d),u.g[f].length==0&&(delete u.g[f],u.h--))}}function Vh(u,d,f,g){for(var C=0;C<u.length;++C){var A=u[C];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return C}return-1}var jh="closure_lm_"+(1e6*Math.random()|0),Uh={};function H_(u,d,f,g,C){if(g&&g.once)return z_(u,d,f,g,C);if(Array.isArray(d)){for(var A=0;A<d.length;A++)H_(u,d[A],f,g,C);return null}return f=qh(f),u&&u[$s]?u.K(d,f,l(g)?!!g.capture:!!g,C):q_(u,d,f,!1,g,C)}function q_(u,d,f,g,C,A){if(!d)throw Error("Invalid event type");var L=l(C)?!!C.capture:!!C,be=$h(u);if(be||(u[jh]=be=new Gu(u)),f=be.add(d,f,g,L,A),f.proxy)return f;if(g=ax(),f.proxy=g,g.src=u,g.listener=f,u.addEventListener)rx||(C=L),C===void 0&&(C=!1),u.addEventListener(d.toString(),g,C);else if(u.attachEvent)u.attachEvent(W_(d.toString()),g);else if(u.addListener&&u.removeListener)u.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function ax(){function u(f){return d.call(u.src,u.listener,f)}let d=ux;return u}function z_(u,d,f,g,C){if(Array.isArray(d)){for(var A=0;A<d.length;A++)z_(u,d[A],f,g,C);return null}return f=qh(f),u&&u[$s]?u.L(d,f,l(g)?!!g.capture:!!g,C):q_(u,d,f,!0,g,C)}function G_(u,d,f,g,C){if(Array.isArray(d))for(var A=0;A<d.length;A++)G_(u,d[A],f,g,C);else g=l(g)?!!g.capture:!!g,f=qh(f),u&&u[$s]?(u=u.i,d=String(d).toString(),d in u.g&&(A=u.g[d],f=Vh(A,f,g,C),-1<f&&(zu(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete u.g[d],u.h--)))):u&&(u=$h(u))&&(d=u.g[d.toString()],u=-1,d&&(u=Vh(d,f,g,C)),(f=-1<u?d[u]:null)&&Bh(f))}function Bh(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[$s])Lh(d.i,u);else{var f=u.type,g=u.proxy;d.removeEventListener?d.removeEventListener(f,g,u.capture):d.detachEvent?d.detachEvent(W_(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=$h(d))?(Lh(f,u),f.h==0&&(f.src=null,d[jh]=null)):zu(u)}}}function W_(u){return u in Uh?Uh[u]:Uh[u]="on"+u}function ux(u,d){if(u.da)u=!0;else{d=new Bs(d,this);var f=u.listener,g=u.ha||u.src;u.fa&&Bh(u),u=f.call(g,d)}return u}function $h(u){return u=u[jh],u instanceof Gu?u:null}var Hh="__closure_events_fn_"+(1e9*Math.random()>>>0);function qh(u){return typeof u=="function"?u:(u[Hh]||(u[Hh]=function(d){return u.handleEvent(d)}),u[Hh])}function pt(){hr.call(this),this.i=new Gu(this),this.M=this,this.F=null}b(pt,hr),pt.prototype[$s]=!0,pt.prototype.removeEventListener=function(u,d,f,g){G_(this,u,d,f,g)};function _t(u,d){var f,g=u.F;if(g)for(f=[];g;g=g.F)f.push(g);if(u=u.M,g=d.type||d,typeof d=="string")d=new ft(d,u);else if(d instanceof ft)d.target=d.target||u;else{var C=d;d=new ft(g,u),E(d,C)}if(C=!0,f)for(var A=f.length-1;0<=A;A--){var L=d.g=f[A];C=Wu(L,g,!0,d)&&C}if(L=d.g=u,C=Wu(L,g,!0,d)&&C,C=Wu(L,g,!1,d)&&C,f)for(A=0;A<f.length;A++)L=d.g=f[A],C=Wu(L,g,!1,d)&&C}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var f=u.g[d],g=0;g<f.length;g++)zu(f[g]);delete u.g[d],u.h--}}this.F=null},pt.prototype.K=function(u,d,f,g){return this.i.add(String(u),d,!1,f,g)},pt.prototype.L=function(u,d,f,g){return this.i.add(String(u),d,!0,f,g)};function Wu(u,d,f,g){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,A=0;A<d.length;++A){var L=d[A];if(L&&!L.da&&L.capture==f){var be=L.listener,ut=L.ha||L.src;L.fa&&Lh(u.i,L),C=be.call(ut,g)!==!1&&C}}return C&&!g.defaultPrevented}function K_(u,d,f){if(typeof u=="function")f&&(u=m(u,f));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function Q_(u){u.g=K_(()=>{u.g=null,u.i&&(u.i=!1,Q_(u))},u.l);let d=u.h;u.h=null,u.m.apply(null,d)}class cx extends hr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Q_(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hs(u){hr.call(this),this.h=u,this.g={}}b(Hs,hr);var Y_=[];function Z_(u){Z(u.g,function(d,f){this.g.hasOwnProperty(f)&&Bh(d)},u),u.g={}}Hs.prototype.N=function(){Hs.aa.N.call(this),Z_(this)},Hs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zh=a.JSON.stringify,lx=a.JSON.parse,dx=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Gh(){}Gh.prototype.h=null;function J_(u){return u.h||(u.h=u.i())}function X_(){}var qs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Wh(){ft.call(this,"d")}b(Wh,ft);function Kh(){ft.call(this,"c")}b(Kh,ft);var Xr={},ew=null;function Ku(){return ew=ew||new pt}Xr.La="serverreachability";function tw(u){ft.call(this,Xr.La,u)}b(tw,ft);function zs(u){let d=Ku();_t(d,new tw(d))}Xr.STAT_EVENT="statevent";function nw(u,d){ft.call(this,Xr.STAT_EVENT,u),this.stat=d}b(nw,ft);function wt(u){let d=Ku();_t(d,new nw(d,u))}Xr.Ma="timingevent";function rw(u,d){ft.call(this,Xr.Ma,u),this.size=d}b(rw,ft);function Gs(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function Ws(){this.g=!0}Ws.prototype.xa=function(){this.g=!1};function hx(u,d,f,g,C,A){u.info(function(){if(u.g)if(A)for(var L="",be=A.split("&"),ut=0;ut<be.length;ut++){var we=be[ut].split("=");if(1<we.length){var gt=we[0];we=we[1];var mt=gt.split("_");L=2<=mt.length&&mt[1]=="type"?L+(gt+"="+we+"&"):L+(gt+"=redacted&")}}else L=null;else L=A;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+L})}function fx(u,d,f,g,C,A,L){u.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+A+" "+L})}function eo(u,d,f,g){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+gx(u,f)+(g?" "+g:"")})}function px(u,d){u.info(function(){return"TIMEOUT: "+d})}Ws.prototype.info=function(){};function gx(u,d){if(!u.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(u=0;u<f.length;u++)if(Array.isArray(f[u])){var g=f[u];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var A=C[0];if(A!="noop"&&A!="stop"&&A!="close")for(var L=1;L<C.length;L++)C[L]=""}}}}return zh(f)}catch{return d}}var Qu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},iw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Qh;function Yu(){}b(Yu,Gh),Yu.prototype.g=function(){return new XMLHttpRequest},Yu.prototype.i=function(){return{}},Qh=new Yu;function fr(u,d,f,g){this.j=u,this.i=d,this.l=f,this.R=g||1,this.U=new Hs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ow}function ow(){this.i=null,this.g="",this.h=!1}var sw={},Yh={};function Zh(u,d,f){u.L=1,u.v=ec($n(d)),u.m=f,u.P=!0,aw(u,null)}function aw(u,d){u.F=Date.now(),Zu(u),u.A=$n(u.v);var f=u.A,g=u.R;Array.isArray(g)||(g=[String(g)]),Iw(f.i,"t",g),u.C=0,f=u.j.J,u.h=new ow,u.g=jw(u.j,f?d:null,!u.m),0<u.O&&(u.M=new cx(m(u.Y,u,u.g),u.O)),d=u.U,f=u.g,g=u.ca;var C="readystatechange";Array.isArray(C)||(C&&(Y_[0]=C.toString()),C=Y_);for(var A=0;A<C.length;A++){var L=H_(f,C[A],g||d.handleEvent,!1,d.h||d);if(!L)break;d.g[L.key]=L}d=u.H?y(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),zs(),hx(u.i,u.u,u.A,u.l,u.R,u.m)}fr.prototype.ca=function(u){u=u.target;let d=this.M;d&&Hn(u)==3?d.j():this.Y(u)},fr.prototype.Y=function(u){try{if(u==this.g)e:{let mt=Hn(this.g);var d=this.g.Ba();let ro=this.g.Z();if(!(3>mt)&&(mt!=3||this.g&&(this.h.h||this.g.oa()||Aw(this.g)))){this.J||mt!=4||d==7||(d==8||0>=ro?zs(3):zs(2)),Jh(this);var f=this.g.Z();this.X=f;t:if(uw(this)){var g=Aw(this.g);u="";var C=g.length,A=Hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ei(this),Ks(this);var L="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,u+=this.h.i.decode(g[d],{stream:!(A&&d==C-1)});g.length=0,this.h.g+=u,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=f==200,fx(this.i,this.u,this.A,this.l,this.R,mt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var be,ut=this.g;if((be=ut.g?ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(be)){var we=be;break t}}we=null}if(f=we)eo(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xh(this,f);else{this.o=!1,this.s=3,wt(12),ei(this),Ks(this);break e}}if(this.P){f=!0;let an;for(;!this.J&&this.C<L.length;)if(an=mx(this,L),an==Yh){mt==4&&(this.s=4,wt(14),f=!1),eo(this.i,this.l,null,"[Incomplete Response]");break}else if(an==sw){this.s=4,wt(15),eo(this.i,this.l,L,"[Invalid Chunk]"),f=!1;break}else eo(this.i,this.l,an,null),Xh(this,an);if(uw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mt!=4||L.length!=0||this.h.h||(this.s=1,wt(16),f=!1),this.o=this.o&&f,!f)eo(this.i,this.l,L,"[Invalid Chunked Response]"),ei(this),Ks(this);else if(0<L.length&&!this.W){this.W=!0;var gt=this.j;gt.g==this&&gt.ba&&!gt.M&&(gt.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),sf(gt),gt.M=!0,wt(11))}}else eo(this.i,this.l,L,null),Xh(this,L);mt==4&&ei(this),this.o&&!this.J&&(mt==4?Ow(this.j,this):(this.o=!1,Zu(this)))}else Px(this.g),f==400&&0<L.indexOf("Unknown SID")?(this.s=3,wt(12)):(this.s=0,wt(13)),ei(this),Ks(this)}}}catch{}finally{}};function uw(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function mx(u,d){var f=u.C,g=d.indexOf(`
`,f);return g==-1?Yh:(f=Number(d.substring(f,g)),isNaN(f)?sw:(g+=1,g+f>d.length?Yh:(d=d.slice(g,g+f),u.C=g+f,d)))}fr.prototype.cancel=function(){this.J=!0,ei(this)};function Zu(u){u.S=Date.now()+u.I,cw(u,u.I)}function cw(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Gs(m(u.ba,u),d)}function Jh(u){u.B&&(a.clearTimeout(u.B),u.B=null)}fr.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(px(this.i,this.A),this.L!=2&&(zs(),wt(17)),ei(this),this.s=2,Ks(this)):cw(this,this.S-u)};function Ks(u){u.j.G==0||u.J||Ow(u.j,u)}function ei(u){Jh(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,Z_(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function Xh(u,d){try{var f=u.j;if(f.G!=0&&(f.g==u||ef(f.h,u))){if(!u.K&&ef(f.h,u)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<u.F)oc(f),rc(f);else break e;of(f),wt(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=Gs(m(f.Za,f),6e3));if(1>=hw(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ni(f,11)}else if((u.K||f.g==u)&&oc(f),!q(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let we=C[d];if(f.T=we[0],we=we[1],f.G==2)if(we[0]=="c"){f.K=we[1],f.ia=we[2];let gt=we[3];gt!=null&&(f.la=gt,f.j.info("VER="+f.la));let mt=we[4];mt!=null&&(f.Aa=mt,f.j.info("SVER="+f.Aa));let ro=we[5];ro!=null&&typeof ro=="number"&&0<ro&&(g=1.5*ro,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let an=u.g;if(an){let ac=an.g?an.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ac){var A=g.h;A.g||ac.indexOf("spdy")==-1&&ac.indexOf("quic")==-1&&ac.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(tf(A,A.h),A.h=null))}if(g.D){let af=an.g?an.g.getResponseHeader("X-HTTP-Session-Id"):null;af&&(g.ya=af,Me(g.I,g.D,af))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-u.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var L=u;if(g.qa=Vw(g,g.J?g.ia:null,g.W),L.K){fw(g.h,L);var be=L,ut=g.L;ut&&(be.I=ut),be.B&&(Jh(be),Zu(be)),g.g=L}else Pw(g);0<f.i.length&&ic(f)}else we[0]!="stop"&&we[0]!="close"||ni(f,7);else f.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?ni(f,7):rf(f):we[0]!="noop"&&f.l&&f.l.ta(we),f.v=0)}}zs(4)}catch{}}var yx=class{constructor(u,d){this.g=u,this.map=d}};function lw(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function dw(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function hw(u){return u.h?1:u.g?u.g.size:0}function ef(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function tf(u,d){u.g?u.g.add(d):u.h=d}function fw(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}lw.prototype.cancel=function(){if(this.i=pw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function pw(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(let f of u.g.values())d=d.concat(f.D);return d}return M(u.i)}function vx(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var d=[],f=u.length,g=0;g<f;g++)d.push(u[g]);return d}d=[],f=0;for(g in u)d[f++]=u[g];return d}function _x(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var d=[];u=u.length;for(var f=0;f<u;f++)d.push(f);return d}d=[],f=0;for(let g in u)d[f++]=g;return d}}}function gw(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var f=_x(u),g=vx(u),C=g.length,A=0;A<C;A++)d.call(void 0,g[A],f&&f[A],u)}var mw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wx(u,d){if(u){u=u.split("&");for(var f=0;f<u.length;f++){var g=u[f].indexOf("="),C=null;if(0<=g){var A=u[f].substring(0,g);C=u[f].substring(g+1)}else A=u[f];d(A,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function ti(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ti){this.h=u.h,Ju(this,u.j),this.o=u.o,this.g=u.g,Xu(this,u.s),this.l=u.l;var d=u.i,f=new Zs;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),yw(this,f),this.m=u.m}else u&&(d=String(u).match(mw))?(this.h=!1,Ju(this,d[1]||"",!0),this.o=Qs(d[2]||""),this.g=Qs(d[3]||"",!0),Xu(this,d[4]),this.l=Qs(d[5]||"",!0),yw(this,d[6]||"",!0),this.m=Qs(d[7]||"")):(this.h=!1,this.i=new Zs(null,this.h))}ti.prototype.toString=function(){var u=[],d=this.j;d&&u.push(Ys(d,vw,!0),":");var f=this.g;return(f||d=="file")&&(u.push("//"),(d=this.o)&&u.push(Ys(d,vw,!0),"@"),u.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&u.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&u.push("/"),u.push(Ys(f,f.charAt(0)=="/"?Dx:Ex,!0))),(f=this.i.toString())&&u.push("?",f),(f=this.m)&&u.push("#",Ys(f,Tx)),u.join("")};function $n(u){return new ti(u)}function Ju(u,d,f){u.j=f?Qs(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function Xu(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function yw(u,d,f){d instanceof Zs?(u.i=d,bx(u.i,u.h)):(f||(d=Ys(d,Cx)),u.i=new Zs(d,u.h))}function Me(u,d,f){u.i.set(d,f)}function ec(u){return Me(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Qs(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ys(u,d,f){return typeof u=="string"?(u=encodeURI(u).replace(d,Ix),f&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Ix(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var vw=/[#\/\?@]/g,Ex=/[#\?:]/g,Dx=/[#\?]/g,Cx=/[#\?@]/g,Tx=/#/g;function Zs(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function pr(u){u.g||(u.g=new Map,u.h=0,u.i&&wx(u.i,function(d,f){u.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Zs.prototype,n.add=function(u,d){pr(this),this.i=null,u=to(this,u);var f=this.g.get(u);return f||this.g.set(u,f=[]),f.push(d),this.h+=1,this};function _w(u,d){pr(u),d=to(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function ww(u,d){return pr(u),d=to(u,d),u.g.has(d)}n.forEach=function(u,d){pr(this),this.g.forEach(function(f,g){f.forEach(function(C){u.call(d,C,g,this)},this)},this)},n.na=function(){pr(this);let u=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=u[g];for(let A=0;A<C.length;A++)f.push(d[g])}return f},n.V=function(u){pr(this);let d=[];if(typeof u=="string")ww(this,u)&&(d=d.concat(this.g.get(to(this,u))));else{u=Array.from(this.g.values());for(let f=0;f<u.length;f++)d=d.concat(u[f])}return d},n.set=function(u,d){return pr(this),this.i=null,u=to(this,u),ww(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},n.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function Iw(u,d,f){_w(u,d),0<f.length&&(u.i=null,u.g.set(to(u,d),M(f)),u.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),L=this.V(g);for(g=0;g<L.length;g++){var C=A;L[g]!==""&&(C+="="+encodeURIComponent(String(L[g]))),u.push(C)}}return this.i=u.join("&")};function to(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function bx(u,d){d&&!u.j&&(pr(u),u.i=null,u.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(_w(this,g),Iw(this,C,f))},u)),u.j=d}function Sx(u,d){let f=new Ws;if(a.Image){let g=new Image;g.onload=v(gr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=v(gr,f,"TestLoadImage: error",!1,d,g),g.onabort=v(gr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=v(gr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=u}else d(!1)}function Ax(u,d){let f=new Ws,g=new AbortController,C=setTimeout(()=>{g.abort(),gr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:g.signal}).then(A=>{clearTimeout(C),A.ok?gr(f,"TestPingServer: ok",!0,d):gr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),gr(f,"TestPingServer: error",!1,d)})}function gr(u,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function xx(){this.g=new dx}function Rx(u,d,f){let g=f||"";try{gw(u,function(C,A){let L=C;l(C)&&(L=zh(C)),d.push(g+A+"="+encodeURIComponent(L))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function Js(u){this.l=u.Ub||null,this.j=u.eb||!1}b(Js,Gh),Js.prototype.g=function(){return new tc(this.l,this.j)},Js.prototype.i=function(u){return function(){return u}}({});function tc(u,d){pt.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(tc,pt),n=tc.prototype,n.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,ea(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xs(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ea(this)),this.g&&(this.readyState=3,ea(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ew(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ew(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?Xs(this):ea(this),this.readyState==3&&Ew(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Xs(this))},n.Qa=function(u){this.g&&(this.response=u,Xs(this))},n.ga=function(){this.g&&Xs(this)};function Xs(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ea(u)}n.setRequestHeader=function(u,d){this.u.append(u,d)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,u.push(f[0]+": "+f[1]),f=d.next();return u.join(`\r
`)};function ea(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(tc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Dw(u){let d="";return Z(u,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function nf(u,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Dw(f),typeof u=="string"?f!=null&&encodeURIComponent(String(f)):Me(u,d,f))}function Ue(u){pt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Ue,pt);var Mx=/^https?$/i,Nx=["POST","PUT"];n=Ue.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Qh.g(),this.v=this.o?J_(this.o):J_(Qh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(A){Cw(this,A);return}if(u=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),C=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Nx,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,L]of f)this.g.setRequestHeader(A,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Sw(this),this.u=!0,this.g.send(u),this.u=!1}catch(A){Cw(this,A)}};function Cw(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,Tw(u),nc(u)}function Tw(u){u.A||(u.A=!0,_t(u,"complete"),_t(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,_t(this,"complete"),_t(this,"abort"),nc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),nc(this,!0)),Ue.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?bw(this):this.bb())},n.bb=function(){bw(this)};function bw(u){if(u.h&&typeof s<"u"&&(!u.v[1]||Hn(u)!=4||u.Z()!=2)){if(u.u&&Hn(u)==4)K_(u.Ea,0,u);else if(_t(u,"readystatechange"),Hn(u)==4){u.h=!1;try{let L=u.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=L===0){var C=String(u.D).match(mw)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!Mx.test(C?C.toLowerCase():"")}f=g}if(f)_t(u,"complete"),_t(u,"success");else{u.m=6;try{var A=2<Hn(u)?u.g.statusText:""}catch{A=""}u.l=A+" ["+u.Z()+"]",Tw(u)}}finally{nc(u)}}}}function nc(u,d){if(u.g){Sw(u);let f=u.g,g=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||_t(u,"ready");try{f.onreadystatechange=g}catch{}}}function Sw(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Hn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Hn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),lx(d)}};function Aw(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Px(u){let d={};u=(u.g&&2<=Hn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<u.length;g++){if(q(u[g]))continue;var f=D(u[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[C]||[];d[C]=A,A.push(f)}I(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ta(u,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[u]||d}function xw(u){this.Aa=0,this.i=[],this.j=new Ws,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ta("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ta("baseRetryDelayMs",5e3,u),this.cb=ta("retryDelaySeedMs",1e4,u),this.Wa=ta("forwardChannelMaxRetries",2,u),this.wa=ta("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new lw(u&&u.concurrentRequestLimit),this.Da=new xx,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=xw.prototype,n.la=8,n.G=1,n.connect=function(u,d,f,g){wt(0),this.W=u,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Vw(this,null,this.W),ic(this)};function rf(u){if(Rw(u),u.G==3){var d=u.U++,f=$n(u.I);if(Me(f,"SID",u.K),Me(f,"RID",d),Me(f,"TYPE","terminate"),na(u,f),d=new fr(u,u.j,d),d.L=2,d.v=ec($n(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=jw(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Zu(d)}Lw(u)}function rc(u){u.g&&(sf(u),u.g.cancel(),u.g=null)}function Rw(u){rc(u),u.u&&(a.clearTimeout(u.u),u.u=null),oc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function ic(u){if(!dw(u.h)&&!u.s){u.s=!0;var d=u.Ga;js||$_(),Us||(js(),Us=!0),Fh.add(d,u),u.B=0}}function kx(u,d){return hw(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Gs(m(u.Ga,u,d),Fw(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let C=new fr(this,this.j,u),A=this.o;if(this.S&&(A?(A=y(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(C.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Nw(this,C,d),f=$n(this.I),Me(f,"RID",u),Me(f,"CVER",22),this.D&&Me(f,"X-HTTP-Session-Id",this.D),na(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(Dw(A)))+"&"+d:this.m&&nf(f,this.m,A)),tf(this.h,C),this.Ua&&Me(f,"TYPE","init"),this.P?(Me(f,"$req",d),Me(f,"SID","null"),C.T=!0,Zh(C,f,null)):Zh(C,f,d),this.G=2}}else this.G==3&&(u?Mw(this,u):this.i.length==0||dw(this.h)||Mw(this))};function Mw(u,d){var f;d?f=d.l:f=u.U++;let g=$n(u.I);Me(g,"SID",u.K),Me(g,"RID",f),Me(g,"AID",u.T),na(u,g),u.m&&u.o&&nf(g,u.m,u.o),f=new fr(u,u.j,f,u.B+1),u.m===null&&(f.H=u.o),d&&(u.i=d.D.concat(u.i)),d=Nw(u,f,1e3),f.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),tf(u.h,f),Zh(f,g,d)}function na(u,d){u.H&&Z(u.H,function(f,g){Me(d,g,f)}),u.l&&gw({},function(f,g){Me(d,g,f)})}function Nw(u,d,f){f=Math.min(u.i.length,f);var g=u.l?m(u.l.Na,u.l,u):null;e:{var C=u.i;let A=-1;for(;;){let L=["count="+f];A==-1?0<f?(A=C[0].g,L.push("ofs="+A)):A=0:L.push("ofs="+A);let be=!0;for(let ut=0;ut<f;ut++){let we=C[ut].g,gt=C[ut].map;if(we-=A,0>we)A=Math.max(0,C[ut].g-100),be=!1;else try{Rx(gt,L,"req"+we+"_")}catch{g&&g(gt)}}if(be){g=L.join("&");break e}}}return u=u.i.splice(0,f),d.D=u,g}function Pw(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;js||$_(),Us||(js(),Us=!0),Fh.add(d,u),u.v=0}}function of(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Gs(m(u.Fa,u),Fw(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,kw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Gs(m(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wt(10),rc(this),kw(this))};function sf(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function kw(u){u.g=new fr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=$n(u.qa);Me(d,"RID","rpc"),Me(d,"SID",u.K),Me(d,"AID",u.T),Me(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&Me(d,"TO",u.ja),Me(d,"TYPE","xmlhttp"),na(u,d),u.m&&u.o&&nf(d,u.m,u.o),u.L&&(u.g.I=u.L);var f=u.g;u=u.ia,f.L=1,f.v=ec($n(d)),f.m=null,f.P=!0,aw(f,u)}n.Za=function(){this.C!=null&&(this.C=null,rc(this),of(this),wt(19))};function oc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Ow(u,d){var f=null;if(u.g==d){oc(u),sf(u),u.g=null;var g=2}else if(ef(u.h,d))f=d.D,fw(u.h,d),g=1;else return;if(u.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=u.B;g=Ku(),_t(g,new rw(g,f)),ic(u)}else Pw(u);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&kx(u,d)||g==2&&of(u)))switch(f&&0<f.length&&(d=u.h,d.i=d.i.concat(f)),C){case 1:ni(u,5);break;case 4:ni(u,10);break;case 3:ni(u,6);break;default:ni(u,2)}}}function Fw(u,d){let f=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(f*=2),f*d}function ni(u,d){if(u.j.info("Error code "+d),d==2){var f=m(u.fb,u),g=u.Xa;let C=!g;g=new ti(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ju(g,"https"),ec(g),C?Sx(g.toString(),f):Ax(g.toString(),f)}else wt(2);u.G=0,u.l&&u.l.sa(d),Lw(u),Rw(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Lw(u){if(u.G=0,u.ka=[],u.l){let d=pw(u.h);(d.length!=0||u.i.length!=0)&&(N(u.ka,d),N(u.ka,u.i),u.h.i.length=0,M(u.i),u.i.length=0),u.l.ra()}}function Vw(u,d,f){var g=f instanceof ti?$n(f):new ti(f);if(g.g!="")d&&(g.g=d+"."+g.g),Xu(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var A=new ti(null);g&&Ju(A,g),d&&(A.g=d),C&&Xu(A,C),f&&(A.l=f),g=A}return f=u.D,d=u.ya,f&&d&&Me(g,f,d),Me(g,"VER",u.la),na(u,g),g}function jw(u,d,f){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new Ue(new Js({eb:f})):new Ue(u.pa),d.Ha(u.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Uw(){}n=Uw.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function sc(){}sc.prototype.g=function(u,d){return new Vt(u,d)};function Vt(u,d){pt.call(this),this.g=new xw(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!q(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!q(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new no(this)}b(Vt,pt),Vt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vt.prototype.close=function(){rf(this.g)},Vt.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var f={};f.__data__=u,u=f}else this.u&&(f={},f.__data__=zh(u),u=f);d.i.push(new yx(d.Ya++,u)),d.G==3&&ic(d)},Vt.prototype.N=function(){this.g.l=null,delete this.j,rf(this.g),delete this.g,Vt.aa.N.call(this)};function Bw(u){Wh.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(let f in d){u=f;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}b(Bw,Wh);function $w(){Kh.call(this),this.status=1}b($w,Kh);function no(u){this.g=u}b(no,Uw),no.prototype.ua=function(){_t(this.g,"a")},no.prototype.ta=function(u){_t(this.g,new Bw(u))},no.prototype.sa=function(u){_t(this.g,new $w)},no.prototype.ra=function(){_t(this.g,"b")},sc.prototype.createWebChannel=sc.prototype.g,Vt.prototype.send=Vt.prototype.o,Vt.prototype.open=Vt.prototype.m,Vt.prototype.close=Vt.prototype.close,jm=nr.createWebChannelTransport=function(){return new sc},Vm=nr.getStatEventTarget=function(){return Ku()},Lm=nr.Event=Xr,fd=nr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qu.NO_ERROR=0,Qu.TIMEOUT=8,Qu.HTTP_ERROR=6,iu=nr.ErrorCode=Qu,iw.COMPLETE="complete",Fm=nr.EventType=iw,X_.EventType=qs,qs.OPEN="a",qs.CLOSE="b",qs.ERROR="c",qs.MESSAGE="d",pt.prototype.listen=pt.prototype.K,Zo=nr.WebChannel=X_,tL=nr.FetchXmlHttpFactory=Js,Ue.prototype.listenOnce=Ue.prototype.L,Ue.prototype.getLastError=Ue.prototype.Ka,Ue.prototype.getLastErrorCode=Ue.prototype.Ba,Ue.prototype.getStatus=Ue.prototype.Z,Ue.prototype.getResponseJson=Ue.prototype.Oa,Ue.prototype.getResponseText=Ue.prototype.oa,Ue.prototype.send=Ue.prototype.ea,Ue.prototype.setWithCredentials=Ue.prototype.Ha,Om=nr.XhrIo=Ue}).apply(typeof hd<"u"?hd:typeof self<"u"?self:typeof window<"u"?window:{});var u0="@firebase/firestore";var et=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};et.UNAUTHENTICATED=new et(null),et.GOOGLE_CREDENTIALS=new et("google-credentials-uid"),et.FIRST_PARTY=new et("first-party-uid"),et.MOCK_USER=new et("mock-user");var As="10.14.0";var Ur=new lc("@firebase/firestore");function ns(){return Ur.logLevel}function db(n){Ur.setLogLevel(n)}function k(n,...e){if(Ur.logLevel<=wn.DEBUG){let t=e.map(qv);Ur.debug(`Firestore (${As}): ${n}`,...t)}}function ze(n,...e){if(Ur.logLevel<=wn.ERROR){let t=e.map(qv);Ur.error(`Firestore (${As}): ${n}`,...t)}}function gn(n,...e){if(Ur.logLevel<=wn.WARN){let t=e.map(qv);Ur.warn(`Firestore (${As}): ${n}`,...t)}}function qv(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function z(n="Unexpected state"){let e=`FIRESTORE (${As}) INTERNAL ASSERTION FAILED: `+n;throw ze(e),new Error(e)}function K(n,e){n||z()}function hb(n,e){n||z()}function B(n,e){return n}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},P=class extends Kw{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var it=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Dd=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},zm=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(et.UNAUTHENTICATED))}shutdown(){}},Gm=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Wm=class{constructor(e){this.t=e,this.currentUser=et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){K(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new it;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new it,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>R(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new it)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(K(typeof r.accessToken=="string"),new Dd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return K(e===null||typeof e=="string"),new et(e)}},Km=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=et.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Qm=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Km(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(et.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Ym=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Zm=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){K(this.o===void 0);let r=o=>{o.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,k("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(K(typeof t.token=="string"),this.R=t.token,new Ym(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function nL(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Cd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=nL(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function ie(n,e){return n<e?-1:n>e?1:0}function ds(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function fb(n){return n+"\0"}var Ve=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Q=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Ve(0,0))}static max(){return new n(new Ve(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Td=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&z(),r===void 0?r=e.length-t:r>e.length-t&&z(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},ve=class n extends Td{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},rL=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ge=class n extends Td{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return rL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new P(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new P(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new P(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var $=class n{constructor(e){this.path=e}static fromPath(e){return new n(ve.fromString(e))}static fromName(e){return new n(ve.fromString(e).popFirst(5))}static empty(){return new n(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ve.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ve(e.slice()))}};var hs=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function Jm(n){return n.fields.find(e=>e.kind===2)}function Ai(n){return n.fields.filter(e=>e.kind!==2)}hs.UNKNOWN_ID=-1;var us=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var mu=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,on.min())}};function pb(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Q.fromTimestamp(r===1e9?new Ve(t+1,0):new Ve(t,r));return new on(i,$.empty(),e)}function gb(n){return new on(n.readTime,n.key,-1)}var on=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Q.min(),$.empty(),-1)}static max(){return new n(Q.max(),$.empty(),-1)}};function zv(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$.comparator(n.documentKey,e.documentKey),t!==0?t:ie(n.largestBatchId,e.largestBatchId))}var mb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",bd=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Yr(n){return R(this,null,function*(){if(n.code!==x.FAILED_PRECONDITION||n.message!==mb)throw n;k("LocalStore","Unexpectedly lost primary lease")})}var S=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var Sd=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new it,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new ki(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Gv(r.target.error);this.V.reject(new ki(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new ki(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(k("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new ey(t)}},Br=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(ra())===12.2&&ze("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return k("SimpleDb","Removing database:",e),xi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!cc())return!1;if(n.v())return!0;let e=ra(),t=n.S(e),r=0<t&&t<10,i=yb(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return R(this,null,function*(){return this.db||(k("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new ki(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new P(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new P(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new ki(e,s))},i.onupgradeneeded=o=>{k("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{k("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return R(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=Sd.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(k("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function yb(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var Xm=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return xi(this.B.delete())}},ki=class extends P{constructor(e,t){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Zr(n){return n.name==="IndexedDbTransactionError"}var ey=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(k("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(k("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),xi(r)}add(e){return k("SimpleDb","ADD",this.store.name,e,e),xi(this.store.add(e))}get(e){return xi(this.store.get(e)).next(t=>(t===void 0&&(t=null),k("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return k("SimpleDb","DELETE",this.store.name,e),xi(this.store.delete(e))}count(){return k("SimpleDb","COUNT",this.store.name),xi(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new S((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new S((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){k("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new S((r,i)=>{t.onerror=o=>{let s=Gv(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new S((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new Xm(a),l=t(a.primaryKey,a.value,c);if(l instanceof S){let h=l.catch(p=>(c.done(),S.reject(p)));r.push(h)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>S.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function xi(n){return new S((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=Gv(r.target.error);t(i)}})}var c0=!1;function Gv(n){let e=Br.S(ra());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new P("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return c0||(c0=!0,setTimeout(()=>{throw r},0)),r}}return n}var ty=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){k("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>R(this,null,function*(){this.task=null;try{k("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){Zr(t)?k("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield Yr(t)}yield this.X(6e4)}))}},ny=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return R(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return S.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return k("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(k("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=gb(o);zv(s,r)>0&&(r=s)}),new on(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Gt=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Lu(n){return n==null}function yu(n){return n===0&&1/n==-1/0}function vb(n){return typeof n=="number"&&Number.isInteger(n)&&!yu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function At(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=l0(e)),e=iL(n.get(t),e);return l0(e)}function iL(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function l0(n){return n+""}function Mn(n){let e=n.length;if(K(e>=2),e===2)return K(n.charAt(0)===""&&n.charAt(1)===""),ve.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&z(),n.charAt(s+1)){case"":let a=n.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:z()}o=s+2}return new ve(r)}var d0=["userId","batchId"];function vd(n,e){return[n,At(e)]}function _b(n,e,t){return[n,At(e),t]}var oL={},sL=["prefixPath","collectionGroup","readTime","documentId"],aL=["prefixPath","collectionGroup","documentId"],uL=["collectionGroup","readTime","prefixPath","documentId"],cL=["canonicalId","targetId"],lL=["targetId","path"],dL=["path","targetId"],hL=["collectionId","parent"],fL=["indexId","uid"],pL=["uid","sequenceNumber"],gL=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],mL=["indexId","uid","orderedDocumentKey"],yL=["userId","collectionPath","documentId"],vL=["userId","collectionPath","largestBatchId"],_L=["userId","collectionGroup","largestBatchId"],wb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],wL=[...wb,"documentOverlays"],Ib=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Eb=Ib,Wv=[...Eb,"indexConfiguration","indexState","indexEntries"],IL=Wv,EL=[...Wv,"globals"];var vu=class extends bd{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function ot(n,e){let t=B(n);return Br.F(t._e,e)}function h0(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Gi(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Db(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Pe=class n{constructor(e,t){this.comparator=e,this.root=t||Pn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new as(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new as(this.root,e,this.comparator,!1)}getReverseIterator(){return new as(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new as(this.root,e,this.comparator,!0)}},as=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Pn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();let e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}};Pn.EMPTY=null,Pn.RED=!0,Pn.BLACK=!1;Pn.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Pn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ae=class n{constructor(e){this.comparator=e,this.data=new Pe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ad(this.data.getIterator())}getIteratorFrom(e){return new Ad(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Ad=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Jo(n){return n.hasNext()?n.getNext():void 0}var Wt=class n{constructor(e){this.fields=e,e.sort(Ge.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ae(Ge.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ds(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var xd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function Cb(){return typeof atob<"u"}var Ke=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new xd("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ke.EMPTY_BYTE_STRING=new Ke("");var DL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function or(n){if(K(!!n),typeof n=="string"){let e=0,t=DL.exec(n);if(K(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Oe(n.seconds),nanos:Oe(n.nanos)}}function Oe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function $r(n){return typeof n=="string"?Ke.fromBase64String(n):Ke.fromUint8Array(n)}function wh(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Kv(n){let e=n.mapValue.fields.__previous_value__;return wh(e)?Kv(e):e}function _u(n){let e=or(n.mapValue.fields.__local_write_time__.timestampValue);return new Ve(e.seconds,e.nanos)}var ry=class{constructor(e,t,r,i,o,s,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Hr=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Vr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},_d={nullValue:"NULL_VALUE"};function Oi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?wh(n)?4:Tb(n)?9007199254740991:Ih(n)?10:11:z()}function Fn(n,e){if(n===e)return!0;let t=Oi(n);if(t!==Oi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return _u(n).isEqual(_u(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=or(i.timestampValue),a=or(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return $r(i.bytesValue).isEqual($r(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Oe(i.geoPointValue.latitude)===Oe(o.geoPointValue.latitude)&&Oe(i.geoPointValue.longitude)===Oe(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Oe(i.integerValue)===Oe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Oe(i.doubleValue),a=Oe(o.doubleValue);return s===a?yu(s)===yu(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return ds(n.arrayValue.values||[],e.arrayValue.values||[],Fn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(h0(s)!==h0(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Fn(s[c],a[c])))return!1;return!0}(n,e);default:return z()}}function wu(n,e){return(n.values||[]).find(t=>Fn(t,e))!==void 0}function qr(n,e){if(n===e)return 0;let t=Oi(n),r=Oi(e);if(t!==r)return ie(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ie(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Oe(o.integerValue||o.doubleValue),c=Oe(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return f0(n.timestampValue,e.timestampValue);case 4:return f0(_u(n),_u(e));case 5:return ie(n.stringValue,e.stringValue);case 6:return function(o,s){let a=$r(o),c=$r(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=ie(a[l],c[l]);if(h!==0)return h}return ie(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ie(Oe(o.latitude),Oe(s.latitude));return a!==0?a:ie(Oe(o.longitude),Oe(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return p0(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,l,h;let p=o.fields||{},m=s.fields||{},v=(a=p.value)===null||a===void 0?void 0:a.arrayValue,b=(c=m.value)===null||c===void 0?void 0:c.arrayValue,M=ie(((l=v?.values)===null||l===void 0?void 0:l.length)||0,((h=b?.values)===null||h===void 0?void 0:h.length)||0);return M!==0?M:p0(v,b)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Vr.mapValue&&s===Vr.mapValue)return 0;if(o===Vr.mapValue)return 1;if(s===Vr.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let m=ie(c[p],h[p]);if(m!==0)return m;let v=qr(a[c[p]],l[h[p]]);if(v!==0)return v}return ie(c.length,h.length)}(n.mapValue,e.mapValue);default:throw z()}}function f0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ie(n,e);let t=or(n),r=or(e),i=ie(t.seconds,r.seconds);return i!==0?i:ie(t.nanos,r.nanos)}function p0(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=qr(t[i],r[i]);if(o)return o}return ie(t.length,r.length)}function fs(n){return iy(n)}function iy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=or(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return $r(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=iy(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${iy(t.fields[s])}`;return i+"}"}(n.mapValue):z()}function Fi(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function oy(n){return!!n&&"integerValue"in n}function Iu(n){return!!n&&"arrayValue"in n}function g0(n){return!!n&&"nullValue"in n}function m0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function wd(n){return!!n&&"mapValue"in n}function Ih(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function du(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Gi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=du(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=du(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Tb(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var bb={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function CL(n){return"nullValue"in n?_d:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Fi(Hr.empty(),$.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Ih(n)?bb:{mapValue:{}}:z()}function TL(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Fi(Hr.empty(),$.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?bb:"mapValue"in n?Ih(n)?{mapValue:{}}:Vr:z()}function y0(n,e){let t=qr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function v0(n,e){let t=qr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var vt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!wd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=du(t)}setAll(e){let t=Ge.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=du(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());wd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];wd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Gi(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(du(this.value))}};function Sb(n){let e=[];return Gi(n.fields,(t,r)=>{let i=new Ge([t]);if(wd(r)){let o=Sb(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Wt(e)}var tt=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Q.min(),Q.min(),Q.min(),vt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Q.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Q.min(),Q.min(),vt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Q.min(),Q.min(),vt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ln=class{constructor(e,t){this.position=e,this.inclusive=t}};function _0(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=$.comparator($.fromName(s.referenceValue),t.key):r=qr(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function w0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Fn(n.position[t],e.position[t]))return!1;return!0}var Li=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function bL(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Rd=class{},he=class n extends Rd{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new uy(e,t,r):t==="array-contains"?new dy(e,r):t==="in"?new Md(e,r):t==="not-in"?new hy(e,r):t==="array-contains-any"?new fy(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new cy(e,r):new ly(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(qr(t,this.value)):t!==null&&Oi(this.value)===Oi(t)&&this.matchesComparison(qr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Te=class n extends Rd{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return ps(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function ps(n){return n.op==="and"}function sy(n){return n.op==="or"}function Qv(n){return Ab(n)&&ps(n)}function Ab(n){for(let e of n.filters)if(e instanceof Te)return!1;return!0}function ay(n){if(n instanceof he)return n.field.canonicalString()+n.op.toString()+fs(n.value);if(Qv(n))return n.filters.map(e=>ay(e)).join(",");{let e=n.filters.map(t=>ay(t)).join(",");return`${n.op}(${e})`}}function xb(n,e){return n instanceof he?function(r,i){return i instanceof he&&r.op===i.op&&r.field.isEqual(i.field)&&Fn(r.value,i.value)}(n,e):n instanceof Te?function(r,i){return i instanceof Te&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&xb(s,i.filters[a]),!0):!1}(n,e):void z()}function Rb(n,e){let t=n.filters.concat(e);return Te.create(t,n.op)}function Mb(n){return n instanceof he?function(t){return`${t.field.canonicalString()} ${t.op} ${fs(t.value)}`}(n):n instanceof Te?function(t){return t.op.toString()+" {"+t.getFilters().map(Mb).join(" ,")+"}"}(n):"Filter"}var uy=class extends he{constructor(e,t,r){super(e,t,r),this.key=$.fromName(r.referenceValue)}matches(e){let t=$.comparator(e.key,this.key);return this.matchesComparison(t)}},cy=class extends he{constructor(e,t){super(e,"in",t),this.keys=Nb("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},ly=class extends he{constructor(e,t){super(e,"not-in",t),this.keys=Nb("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Nb(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>$.fromName(r.referenceValue))}var dy=class extends he{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Iu(t)&&wu(t.arrayValue,this.value)}},Md=class extends he{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&wu(this.value.arrayValue,t)}},hy=class extends he{constructor(e,t){super(e,"not-in",t)}matches(e){if(wu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!wu(this.value.arrayValue,t)}},fy=class extends he{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Iu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>wu(this.value.arrayValue,r))}};var py=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function gy(n,e=null,t=[],r=[],i=null,o=null,s=null){return new py(n,e,t,r,i,o,s)}function Vi(n){let e=B(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>ay(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Lu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>fs(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>fs(r)).join(",")),e.ue=t}return e.ue}function Vu(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!bL(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!xb(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!w0(n.startAt,e.startAt)&&w0(n.endAt,e.endAt)}function Nd(n){return $.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Pd(n,e){return n.filters.filter(t=>t instanceof he&&t.field.isEqual(e))}function I0(n,e,t){let r=_d,i=!0;for(let o of Pd(n,e)){let s=_d,a=!0;switch(o.op){case"<":case"<=":s=CL(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=_d}y0({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];y0({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function E0(n,e,t){let r=Vr,i=!0;for(let o of Pd(n,e)){let s=Vr,a=!0;switch(o.op){case">=":case">":s=TL(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Vr}v0({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];v0({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var mn=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Pb(n,e,t,r,i,o,s,a){return new mn(n,e,t,r,i,o,s,a)}function xs(n){return new mn(n)}function D0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Yv(n){return n.collectionGroup!==null}function cs(n){let e=B(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ae(Ge.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Li(o,r))}),t.has(Ge.keyField().canonicalString())||e.ce.push(new Li(Ge.keyField(),r))}return e.ce}function xt(n){let e=B(n);return e.le||(e.le=SL(e,cs(n))),e.le}function SL(n,e){if(n.limitType==="F")return gy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Li(i.field,o)});let t=n.endAt?new Ln(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ln(n.startAt.position,n.startAt.inclusive):null;return gy(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function my(n,e){let t=n.filters.concat([e]);return new mn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function kd(n,e,t){return new mn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ju(n,e){return Vu(xt(n),xt(e))&&n.limitType===e.limitType}function kb(n){return`${Vi(xt(n))}|lt:${n.limitType}`}function rs(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Mb(i)).join(", ")}]`),Lu(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>fs(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>fs(i)).join(",")),`Target(${r})`}(xt(n))}; limitType=${n.limitType})`}function Uu(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of cs(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=_0(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,cs(r),i)||r.endAt&&!function(s,a,c){let l=_0(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,cs(r),i))}(n,e)}function Ob(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Fb(n){return(e,t)=>{let r=!1;for(let i of cs(n)){let o=AL(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function AL(n,e,t){let r=n.field.isKeyField()?$.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?qr(c,l):z()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}var Vn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Gi(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return Db(this.inner)}size(){return this.innerSize}};var xL=new Pe($.comparator);function Ft(){return xL}var Lb=new Pe($.comparator);function cu(...n){let e=Lb;for(let t of n)e=e.insert(t.key,t);return e}function Vb(n){let e=Lb;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Nn(){return hu()}function jb(){return hu()}function hu(){return new Vn(n=>n.toString(),(n,e)=>n.isEqual(e))}var RL=new Pe($.comparator),ML=new Ae($.comparator);function oe(...n){let e=ML;for(let t of n)e=e.add(t);return e}var NL=new Ae(ie);function Zv(){return NL}function Jv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yu(e)?"-0":e}}function Ub(n){return{integerValue:""+n}}function Bb(n,e){return vb(e)?Ub(e):Jv(n,e)}var gs=class{constructor(){this._=void 0}};function PL(n,e,t){return n instanceof zr?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&wh(o)&&(o=Kv(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof sr?Hb(n,e):n instanceof ar?qb(n,e):function(i,o){let s=$b(i,o),a=C0(s)+C0(i.Pe);return oy(s)&&oy(i.Pe)?Ub(a):Jv(i.serializer,a)}(n,e)}function kL(n,e,t){return n instanceof sr?Hb(n,e):n instanceof ar?qb(n,e):t}function $b(n,e){return n instanceof Gr?function(r){return oy(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var zr=class extends gs{},sr=class extends gs{constructor(e){super(),this.elements=e}};function Hb(n,e){let t=zb(e);for(let r of n.elements)t.some(i=>Fn(i,r))||t.push(r);return{arrayValue:{values:t}}}var ar=class extends gs{constructor(e){super(),this.elements=e}};function qb(n,e){let t=zb(e);for(let r of n.elements)t=t.filter(i=>!Fn(i,r));return{arrayValue:{values:t}}}var Gr=class extends gs{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function C0(n){return Oe(n.integerValue||n.doubleValue)}function zb(n){return Iu(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var ji=class{constructor(e,t){this.field=e,this.transform=t}};function OL(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof sr&&i instanceof sr||r instanceof ar&&i instanceof ar?ds(r.elements,i.elements,Fn):r instanceof Gr&&i instanceof Gr?Fn(r.Pe,i.Pe):r instanceof zr&&i instanceof zr}(n.transform,e.transform)}var yy=class{constructor(e,t){this.version=e,this.transformResults=t}},He=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Id(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ms=class{};function Gb(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Kr(n.key,He.none()):new Wr(n.key,n.data,He.none());{let t=n.data,r=vt.empty(),i=new Ae(Ge.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new yn(n.key,r,new Wt(i.toArray()),He.none())}}function FL(n,e,t){n instanceof Wr?function(i,o,s){let a=i.value.clone(),c=b0(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof yn?function(i,o,s){if(!Id(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=b0(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(Wb(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function fu(n,e,t,r){return n instanceof Wr?function(o,s,a,c){if(!Id(o.precondition,s))return a;let l=o.value.clone(),h=S0(o.fieldTransforms,c,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof yn?function(o,s,a,c){if(!Id(o.precondition,s))return a;let l=S0(o.fieldTransforms,c,s),h=s.data;return h.setAll(Wb(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return Id(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function LL(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=$b(r.transform,i||null);o!=null&&(t===null&&(t=vt.empty()),t.set(r.field,o))}return t||null}function T0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ds(r,i,(o,s)=>OL(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Wr=class extends ms{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},yn=class extends ms{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Wb(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function b0(n,e,t){let r=new Map;K(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,kL(s,a,t[i]))}return r}function S0(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,PL(o,s,e))}return r}var Kr=class extends ms{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Eu=class extends ms{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Du=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&FL(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=fu(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=fu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=jb();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=Gb(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Q.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),oe())}isEqual(e){return this.batchId===e.batchId&&ds(this.mutations,e.mutations,(t,r)=>T0(t,r))&&ds(this.baseMutations,e.baseMutations,(t,r)=>T0(t,r))}},vy=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){K(e.mutations.length===r.length);let i=function(){return RL}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Cu=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var _y=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Je,ye;function Kb(n){switch(n){default:return z();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function Qb(n){if(n===void 0)return ze("GRPC error has no .code"),x.UNKNOWN;switch(n){case Je.OK:return x.OK;case Je.CANCELLED:return x.CANCELLED;case Je.UNKNOWN:return x.UNKNOWN;case Je.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Je.INTERNAL:return x.INTERNAL;case Je.UNAVAILABLE:return x.UNAVAILABLE;case Je.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Je.NOT_FOUND:return x.NOT_FOUND;case Je.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Je.ABORTED:return x.ABORTED;case Je.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Je.DATA_LOSS:return x.DATA_LOSS;default:return z()}}(ye=Je||(Je={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";var A0=null;function Yb(){return new TextEncoder}var VL=new Pr([4294967295,4294967295],0);function x0(n){let e=Yb().encode(n),t=new km;return t.update(e),new Uint8Array(t.digest())}function R0(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Pr([t,r],0),new Pr([i,o],0)]}var wy=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Pi(`Invalid padding: ${t}`);if(r<0)throw new Pi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Pi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Pi(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Pr.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Pr.fromNumber(r)));return i.compare(VL)===1&&(i=new Pr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=x0(e),[r,i]=R0(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=x0(e),[r,i]=R0(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Pi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Tu=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,bu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Q.min(),i,new Pe(ie),Ft(),oe())}},bu=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,oe(),oe(),oe())}};var ls=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Od=class{constructor(e,t){this.targetId=e,this.me=t}},Fd=class{constructor(e,t,r=Ke.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Ld=class{constructor(){this.fe=0,this.ge=N0(),this.pe=Ke.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=oe(),t=oe(),r=oe();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:z()}}),new bu(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=N0()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,K(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Iy=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ft(),this.qe=M0(),this.Qe=new Pe(ie)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:z()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(Nd(o))if(r===0){let s=new $(o.path);this.Ue(t,s,tt.newNoDocument(s,Q.min()))}else K(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}A0?.et(function(h,p,m,v,b){var M,N,U,q,F,Y;let ee={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},Z=p.unchangedNames;return Z&&(ee.bloomFilter={applied:b===0,hashCount:(M=Z?.hashCount)!==null&&M!==void 0?M:0,bitmapLength:(q=(U=(N=Z?.bits)===null||N===void 0?void 0:N.bitmap)===null||U===void 0?void 0:U.length)!==null&&q!==void 0?q:0,padding:(Y=(F=Z?.bits)===null||F===void 0?void 0:F.padding)!==null&&Y!==void 0?Y:0,mightContain:I=>{var y;return(y=v?.mightContain(I))!==null&&y!==void 0&&y}}),ee}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=$r(r).toUint8Array()}catch(c){if(c instanceof xd)return gn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new wy(s,i,o)}catch(c){return gn(c instanceof Pi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&Nd(a.target)){let c=new $(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,tt.newNoDocument(c,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=oe();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Tu(e,t,this.Qe,this.ke,r);return this.ke=Ft(),this.qe=M0(),this.Qe=new Pe(ie),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Ld,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ae(ie),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||k("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ld),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function M0(){return new Pe($.comparator)}function N0(){return new Pe($.comparator)}var jL={asc:"ASCENDING",desc:"DESCENDING"},UL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BL={and:"AND",or:"OR"},Ey=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Dy(n,e){return n.useProto3Json||Lu(e)?e:{value:e}}function ys(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Zb(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function $L(n,e){return ys(n,e.toTimestamp())}function We(n){return K(!!n),Q.fromTimestamp(function(t){let r=or(t);return new Ve(r.seconds,r.nanos)}(n))}function Xv(n,e){return Cy(n,e).canonicalString()}function Cy(n,e){let t=function(i){return new ve(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Jb(n){let e=ve.fromString(n);return K(uS(e)),e}function Su(n,e){return Xv(n.databaseId,e.path)}function kn(n,e){let t=Jb(e);if(t.get(1)!==n.databaseId.projectId)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $(tS(t))}function Xb(n,e){return Xv(n.databaseId,e)}function eS(n){let e=Jb(n);return e.length===4?ve.emptyPath():tS(e)}function Ty(n){return new ve(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function tS(n){return K(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function P0(n,e,t){return{name:Su(n,e),fields:t.value.mapValue.fields}}function nS(n,e,t){let r=kn(n,e.name),i=We(e.updateTime),o=e.createTime?We(e.createTime):Q.min(),s=new vt({mapValue:{fields:e.fields}}),a=tt.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function HL(n,e){return"found"in e?function(r,i){K(!!i.found),i.found.name,i.found.updateTime;let o=kn(r,i.found.name),s=We(i.found.updateTime),a=i.found.createTime?We(i.found.createTime):Q.min(),c=new vt({mapValue:{fields:i.found.fields}});return tt.newFoundDocument(o,s,a,c)}(n,e):"missing"in e?function(r,i){K(!!i.missing),K(!!i.readTime);let o=kn(r,i.missing),s=We(i.readTime);return tt.newNoDocument(o,s)}(n,e):z()}function qL(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(K(h===void 0||typeof h=="string"),Ke.fromBase64String(h||"")):(K(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Ke.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?x.UNKNOWN:Qb(l.code);return new P(h,l.message||"")}(s);t=new Fd(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=kn(n,r.document.name),o=We(r.document.updateTime),s=r.document.createTime?We(r.document.createTime):Q.min(),a=new vt({mapValue:{fields:r.document.fields}}),c=tt.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new ls(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=kn(n,r.document),o=r.readTime?We(r.readTime):Q.min(),s=tt.newNoDocument(i,o),a=r.removedTargetIds||[];t=new ls([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=kn(n,r.document),o=r.removedTargetIds||[];t=new ls([],o,i,null)}else{if(!("filter"in e))return z();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new _y(i,o),a=r.targetId;t=new Od(a,s)}}return t}function Au(n,e){let t;if(e instanceof Wr)t={update:P0(n,e.key,e.value)};else if(e instanceof Kr)t={delete:Su(n,e.key)};else if(e instanceof yn)t={update:P0(n,e.key,e.data),updateMask:YL(e.fieldMask)};else{if(!(e instanceof Eu))return z();t={verify:Su(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof zr)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof sr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ar)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Gr)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw z()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:$L(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:z()}(n,e.precondition)),t}function by(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?He.updateTime(We(o.updateTime)):o.exists!==void 0?He.exists(o.exists):He.none()}(e.currentDocument):He.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)K(a.setToServerValue==="REQUEST_TIME"),c=new zr;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];c=new sr(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];c=new ar(h)}else"increment"in a?c=new Gr(s,a.increment):z();let l=Ge.fromServerFormat(a.fieldPath);return new ji(l,c)}(n,i)):[];if(e.update){e.update.name;let i=kn(n,e.update.name),o=new vt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let l=c.fieldPaths||[];return new Wt(l.map(h=>Ge.fromServerFormat(h)))}(e.updateMask);return new yn(i,o,s,t,r)}return new Wr(i,o,t,r)}if(e.delete){let i=kn(n,e.delete);return new Kr(i,t)}if(e.verify){let i=kn(n,e.verify);return new Eu(i,t)}return z()}function zL(n,e){return n&&n.length>0?(K(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?We(i.updateTime):We(o);return s.isEqual(Q.min())&&(s=We(o)),new yy(s,i.transformResults||[])}(t,e))):[]}function rS(n,e){return{documents:[Xb(n,e.path)]}}function iS(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Xb(n,i);let o=function(l){if(l.length!==0)return aS(Te.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:is(m.field),direction:WL(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=Dy(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function oS(n){let e=eS(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){K(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=sS(p);return m instanceof Te&&Qv(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(b){return new Li(os(b.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Lu(m)?null:m}(t.limit));let c=null;t.startAt&&(c=function(p){let m=!!p.before,v=p.values||[];return new Ln(v,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,v=p.values||[];return new Ln(v,m)}(t.endAt)),Pb(e,i,s,o,a,"F",c,l)}function GL(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function sS(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=os(t.unaryFilter.field);return he.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=os(t.unaryFilter.field);return he.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=os(t.unaryFilter.field);return he.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=os(t.unaryFilter.field);return he.create(s,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(n):n.fieldFilter!==void 0?function(t){return he.create(os(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Te.create(t.compositeFilter.filters.map(r=>sS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z()}}(t.compositeFilter.op))}(n):z()}function WL(n){return jL[n]}function KL(n){return UL[n]}function QL(n){return BL[n]}function is(n){return{fieldPath:n.canonicalString()}}function os(n){return Ge.fromServerFormat(n.fieldPath)}function aS(n){return n instanceof he?function(t){if(t.op==="=="){if(m0(t.value))return{unaryFilter:{field:is(t.field),op:"IS_NAN"}};if(g0(t.value))return{unaryFilter:{field:is(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(m0(t.value))return{unaryFilter:{field:is(t.field),op:"IS_NOT_NAN"}};if(g0(t.value))return{unaryFilter:{field:is(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:is(t.field),op:KL(t.op),value:t.value}}}(n):n instanceof Te?function(t){let r=t.getFilters().map(i=>aS(i));return r.length===1?r[0]:{compositeFilter:{op:QL(t.op),filters:r}}}(n):z()}function YL(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function uS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var vs=class n{constructor(e,t,r,i,o=Q.min(),s=Q.min(),a=Ke.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Vd=class{constructor(e){this.ct=e}};function ZL(n,e){let t;if(e.document)t=nS(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=$.fromSegments(e.noDocument.path),i=Bi(e.noDocument.readTime);t=tt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return z();{let r=$.fromSegments(e.unknownDocument.path),i=Bi(e.unknownDocument.version);t=tt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Ve(i[0],i[1]);return Q.fromTimestamp(o)}(e.readTime)),t}function k0(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:jd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Su(o,s.key),fields:s.data.value.mapValue.fields,updateTime:ys(o,s.version.toTimestamp()),createTime:ys(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ui(e.version)};else{if(!e.isUnknownDocument())return z();r.unknownDocument={path:t.path.toArray(),version:Ui(e.version)}}return r}function jd(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ui(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Bi(n){let e=new Ve(n.seconds,n.nanoseconds);return Q.fromTimestamp(e)}function Ri(n,e){let t=(e.baseMutations||[]).map(o=>by(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>by(n.ct,o)),i=Ve.fromMillis(e.localWriteTimeMs);return new Du(e.batchId,i,t,r)}function lu(n){let e=Bi(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Bi(n.lastLimboFreeSnapshotVersion):Q.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return K(o.documents.length===1),xt(xs(eS(o.documents[0])))}(n.query):function(o){return xt(oS(o))}(n.query),new vs(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ke.fromBase64String(n.resumeToken))}function cS(n,e){let t=Ui(e.snapshotVersion),r=Ui(e.lastLimboFreeSnapshotVersion),i;i=Nd(e.target)?rS(n.ct,e.target):iS(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Vi(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function e_(n){let e=oS({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?kd(e,e.limit,"L"):e}function Um(n,e){return new Cu(e.largestBatchId,by(n.ct,e.overlayMutation))}function O0(n,e){let t=e.path.lastSegment();return[n,At(e.path.popLast()),t]}function F0(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Ui(r.readTime),documentKey:At(r.documentKey.path),largestBatchId:r.largestBatchId}}var Sy=class{getBundleMetadata(e,t){return L0(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Bi(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return L0(e).put(function(i){return{bundleId:i.id,createTime:Ui(We(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return V0(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:e_(o.bundledQuery),readTime:Bi(o.readTime)}}(r)})}saveNamedQuery(e,t){return V0(e).put(function(i){return{name:i.name,readTime:Ui(We(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function L0(n){return ot(n,"bundles")}function V0(n){return ot(n,"namedQueries")}var Ud=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return ou(e).get(O0(this.userId,t)).next(r=>r?Um(this.serializer,r):null)}getOverlays(e,t){let r=Nn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new Cu(t,s);i.push(this.ht(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(At(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(ou(e).j("collectionPathOverlayIndex",a))}),S.waitFor(o)}getOverlaysForCollection(e,t,r){let i=Nn(),o=At(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return ou(e).U("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let l=Um(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=Nn(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ou(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,h)=>{let p=Um(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return ou(e).put(function(i,o,s){let[a,c,l]=O0(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Au(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function ou(n){return ot(n,"documentOverlays")}var Ay=class{Pt(e){return ot(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?Ke.fromUint8Array(r):Ke.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var rr=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Oe(e.integerValue));else if("doubleValue"in e){let r=Oe(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),yu(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=or(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt($r(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?Tb(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Ih(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):z()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Oe(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),$.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};rr.vt=new rr;function JL(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function j0(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=JL(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var xy=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=j0(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=j0(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Ry=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},My=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},Mi=class{constructor(){this.jt=new xy,this.Ht=new Ry(this.jt),this.Jt=new My(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var Ni=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function kr(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=U0(n.arrayValue,e.arrayValue),t!==0?t:(t=U0(n.directionalValue,e.directionalValue),t!==0?t:$.comparator(n.documentKey,e.documentKey)))}function U0(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var Bd=class{constructor(e){this.Xt=new Ae((t,r)=>Ge.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(K(e.collectionGroup===this.collectionId),this.nn)return!1;let t=Jm(e);if(t!==void 0&&!this.sn(t))return!1;let r=Ai(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.on(a,c)||!this._n(this.en[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ae(Ge.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new us(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new us(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new us(r.field,r.dir==="asc"?0:1)));return new hs(hs.UNKNOWN_ID,this.collectionId,t,mu.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function lS(n){var e,t;if(K(n instanceof he||n instanceof Te),n instanceof he){if(n instanceof Md){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>he.create(n.field,"==",o)))||[];return Te.create(i,"or")}return n}let r=n.filters.map(i=>lS(i));return Te.create(r,n.op)}function XL(n){if(n.getFilters().length===0)return[];let e=ky(lS(n));return K(dS(e)),Ny(e)||Py(e)?[e]:e.getFilters()}function Ny(n){return n instanceof he}function Py(n){return n instanceof Te&&Qv(n)}function dS(n){return Ny(n)||Py(n)||function(t){if(t instanceof Te&&sy(t)){for(let r of t.getFilters())if(!Ny(r)&&!Py(r))return!1;return!0}return!1}(n)}function ky(n){if(K(n instanceof he||n instanceof Te),n instanceof he)return n;if(n.filters.length===1)return ky(n.filters[0]);let e=n.filters.map(r=>ky(r)),t=Te.create(e,n.op);return t=$d(t),dS(t)?t:(K(t instanceof Te),K(ps(t)),K(t.filters.length>1),t.filters.reduce((r,i)=>t_(r,i)))}function t_(n,e){let t;return K(n instanceof he||n instanceof Te),K(e instanceof he||e instanceof Te),t=n instanceof he?e instanceof he?function(i,o){return Te.create([i,o],"and")}(n,e):B0(n,e):e instanceof he?B0(e,n):function(i,o){if(K(i.filters.length>0&&o.filters.length>0),ps(i)&&ps(o))return Rb(i,o.getFilters());let s=sy(i)?i:o,a=sy(i)?o:i,c=s.filters.map(l=>t_(l,a));return Te.create(c,"or")}(n,e),$d(t)}function B0(n,e){if(ps(e))return Rb(e,n.getFilters());{let t=e.filters.map(r=>t_(n,r));return Te.create(t,"or")}}function $d(n){if(K(n instanceof he||n instanceof Te),n instanceof he)return n;let e=n.getFilters();if(e.length===1)return $d(e[0]);if(Ab(n))return n;let t=e.map(i=>$d(i)),r=[];return t.forEach(i=>{i instanceof he?r.push(i):i instanceof Te&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Te.create(r,n.op)}var Oy=class{constructor(){this.un=new xu}addToCollectionParentIndex(e,t){return this.un.add(t),S.resolve()}getCollectionParents(e,t){return S.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return S.resolve()}deleteFieldIndex(e,t){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,t){return S.resolve()}getDocumentsMatchingTarget(e,t){return S.resolve(null)}getIndexType(e,t){return S.resolve(0)}getFieldIndexes(e,t){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,t){return S.resolve(on.min())}getMinOffsetFromCollectionGroup(e,t){return S.resolve(on.min())}updateCollectionGroup(e,t,r){return S.resolve()}updateIndexEntries(e,t){return S.resolve()}},xu=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ae(ve.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ae(ve.comparator)).toArray()}};var pd=new Uint8Array(0),Fy=class{constructor(e,t){this.databaseId=t,this.cn=new xu,this.ln=new Vn(r=>Vi(r),(r,i)=>Vu(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:At(i)};return $0(e).put(o)}return S.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[fb(t),""],!1,!0);return $0(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Mn(s.parent))}return r})}addFieldIndex(e,t){let r=su(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=es(e);return o.next(a=>{s.put(F0(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=su(e),i=es(e),o=Xo(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=su(e),r=Xo(e),i=es(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return S.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new Bd(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Xo(e),i=!0,o=new Map;return S.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=oe(),a=[];return S.forEach(o,(c,l)=>{k("IndexedDbIndexManager",`Using index ${function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map(Y=>`${Y.fieldPath}:${Y.kind}`).join(",")}`}(c)} to execute ${Vi(t)}`);let h=function(F,Y){let ee=Jm(Y);if(ee===void 0)return null;for(let Z of Pd(F,ee.fieldPath))switch(Z.op){case"array-contains-any":return Z.value.arrayValue.values||[];case"array-contains":return[Z.value]}return null}(l,c),p=function(F,Y){let ee=new Map;for(let Z of Ai(Y))for(let I of Pd(F,Z.fieldPath))switch(I.op){case"==":case"in":ee.set(Z.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return ee.set(Z.fieldPath.canonicalString(),I.value),Array.from(ee.values())}return null}(l,c),m=function(F,Y){let ee=[],Z=!0;for(let I of Ai(Y)){let y=I.kind===0?I0(F,I.fieldPath,F.startAt):E0(F,I.fieldPath,F.startAt);ee.push(y.value),Z&&(Z=y.inclusive)}return new Ln(ee,Z)}(l,c),v=function(F,Y){let ee=[],Z=!0;for(let I of Ai(Y)){let y=I.kind===0?E0(F,I.fieldPath,F.endAt):I0(F,I.fieldPath,F.endAt);ee.push(y.value),Z&&(Z=y.inclusive)}return new Ln(ee,Z)}(l,c),b=this.In(c,l,m),M=this.In(c,l,v),N=this.Tn(c,l,p),U=this.En(c.indexId,h,b,m.inclusive,M,v.inclusive,N);return S.forEach(U,q=>r.G(q,t.limit).next(F=>{F.forEach(Y=>{let ee=$.fromSegments(Y.documentKey);s.has(ee)||(s=s.add(ee),a.push(ee))})}))}).next(()=>a)}return S.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=XL(Te.create(e.filters,"and")).map(r=>gy(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let c=(t!=null?t.length:1)*Math.max(r.length,o.length),l=c/(t!=null?t.length:1),h=[];for(let p=0;p<c;++p){let m=t?this.dn(t[p/l]):pd,v=this.An(e,m,r[p%l],i),b=this.Rn(e,m,o[p%l],s),M=a.map(N=>this.An(e,m,N,!0));h.push(...this.createRange(v,b,M))}return h}An(e,t,r,i){let o=new Ni(e,$.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new Ni(e,$.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new Bd(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return S.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let l=new Ae(Ge.comparator),h=!1;for(let p of c.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:l=l.add(m.field));for(let p of c.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new Mi;for(let i of Ai(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);rr.vt.It(o,s)}return r.zt()}dn(e){let t=new Mi;return rr.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new Mi;return rr.vt.It(Fi(this.databaseId,t),r.Yt(function(o){let s=Ai(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Mi);let o=0;for(let s of Ai(e)){let a=r[o++];for(let c of i)if(this.fn(t,s.fieldPath)&&Iu(a))i=this.gn(i,s,a);else{let l=c.Yt(s.kind);rr.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new Mi;c.seed(a.zt()),rr.vt.It(s,c.Yt(t.kind)),o.push(c)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof he&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=su(e),i=es(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return S.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(h,p){let m=p?new mu(p.sequenceNumber,new on(Bi(p.readTime),new $(Mn(p.documentKey)),p.largestBatchId)):mu.empty(),v=h.fields.map(([b,M])=>new us(Ge.fromServerFormat(b),M));return new hs(h.indexId,h.collectionGroup,v,m)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:ie(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=su(e),o=es(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>S.forEach(a,c=>o.put(F0(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return S.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?S.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,c=>this.wn(e,i,c).next(l=>{let h=this.Sn(o,c);return l.isEqual(h)?S.resolve():this.bn(e,o,c,l,h)}))))})}Dn(e,t,r,i){return Xo(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Xo(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=Xo(e),o=new Ae(kr);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new Ni(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new Ae(kr),i=this.Vn(t,e);if(i==null)return r;let o=Jm(t);if(o!=null){let s=e.data.field(o.fieldPath);if(Iu(s))for(let a of s.arrayValue.values||[])r=r.add(new Ni(t.indexId,e.key,this.dn(a),i))}else r=r.add(new Ni(t.indexId,e.key,pd,i));return r}bn(e,t,r,i,o){k("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(c,l,h,p,m){let v=c.getIterator(),b=l.getIterator(),M=Jo(v),N=Jo(b);for(;M||N;){let U=!1,q=!1;if(M&&N){let F=h(M,N);F<0?q=!0:F>0&&(U=!0)}else M!=null?q=!0:U=!0;U?(p(N),N=Jo(b)):q?(m(M),M=Jo(v)):(M=Jo(v),N=Jo(b))}}(i,o,kr,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),S.waitFor(s)}yn(e){let t=1;return es(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>kr(s,a)).filter((s,a,c)=>!a||kr(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=kr(s,e),c=kr(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&c<0)i.push(s),i.push(s.Zt());else if(c>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,pd,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,pd,[]];o.push(IDBKeyRange.bound(a,c))}return o}Cn(e,t){return kr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(H0)}getMinOffset(e,t){return S.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||z())).next(H0)}};function $0(n){return ot(n,"collectionParents")}function Xo(n){return ot(n,"indexEntries")}function su(n){return ot(n,"indexConfiguration")}function es(n){return ot(n,"indexState")}function H0(n){K(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;zv(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new on(e.readTime,e.documentKey,t)}var q0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function hS(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,c=r.J({range:s},(h,p,m)=>(a++,m.delete()));o.push(c.next(()=>{K(a===1)}));let l=[];for(let h of t.mutations){let p=_b(e,h.key.path,t.batchId);o.push(i.delete(p)),l.push(h.key)}return S.waitFor(o).next(()=>l)}function Hd(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw z();e=n.noDocument}return JSON.stringify(e).length}rn.DEFAULT_COLLECTION_PERCENTILE=10,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rn.DEFAULT=new rn(41943040,rn.DEFAULT_COLLECTION_PERCENTILE,rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rn.DISABLED=new rn(-1,0,0);var qd=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){K(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Or(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=ss(e),s=Or(e);return s.add({}).next(a=>{K(typeof a=="number");let c=new Du(a,t,r,i),l=function(v,b,M){let N=M.baseMutations.map(q=>Au(v.ct,q)),U=M.mutations.map(q=>Au(v.ct,q));return{userId:b,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:N,mutations:U}}(this.serializer,this.userId,c),h=[],p=new Ae((m,v)=>ie(m.canonicalString(),v.canonicalString()));for(let m of i){let v=_b(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),h.push(s.put(l)),h.push(o.put(v,oL))}return p.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),S.waitFor(h).next(()=>c)})}lookupMutationBatch(e,t){return Or(e).get(t).next(r=>r?(K(r.userId===this.userId),Ri(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?S.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Or(e).J({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(K(a.batchId>=r),o=Ri(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Or(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Or(e).U("userMutationsIndex",t).next(r=>r.map(i=>Ri(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=vd(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return ss(e).J({range:i},(s,a,c)=>{let[l,h,p]=s,m=Mn(h);if(l===this.userId&&t.path.isEqual(m))return Or(e).get(p).next(v=>{if(!v)throw z();K(v.userId===this.userId),o.push(Ri(this.serializer,v))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ae(ie),i=[];return t.forEach(o=>{let s=vd(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=ss(e).J({range:a},(l,h,p)=>{let[m,v,b]=l,M=Mn(v);m===this.userId&&o.path.isEqual(M)?r=r.add(b):p.done()});i.push(c)}),S.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=vd(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Ae(ie);return ss(e).J({range:s},(c,l,h)=>{let[p,m,v]=c,b=Mn(m);p===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(v)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(Or(e).get(o).next(s=>{if(s===null)throw z();K(s.userId===this.userId),r.push(Ri(this.serializer,s))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return hS(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return S.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return ss(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=Mn(o[1]);i.push(c)}else a.done()}).next(()=>{K(i.length===0)})})}containsKey(e,t){return fS(e,this.userId,t)}Nn(e){return pS(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function fS(n,e,t){let r=vd(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return ss(n).J({range:o,H:!0},(a,c,l)=>{let[h,p,m]=a;h===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function Or(n){return ot(n,"mutations")}function ss(n){return ot(n,"documentMutations")}function pS(n){return ot(n,"mutationQueues")}var _s=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Ly=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new _s(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>Q.fromTimestamp(new Ve(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ts(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(K(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return ts(e).J((s,a)=>{let c=lu(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>S.waitFor(o)).next(()=>i)}forEachTarget(e,t){return ts(e).J((r,i)=>{let o=lu(i);t(o)})}qn(e){return z0(e).get("targetGlobalKey").next(t=>(K(t!==null),t))}Qn(e,t){return z0(e).put("targetGlobalKey",t)}Kn(e,t){return ts(e).put(cS(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=Vi(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return ts(e).J({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let l=lu(a);Vu(t,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=Fr(e);return t.forEach(s=>{let a=At(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),S.waitFor(i)}removeMatchingKeys(e,t,r){let i=Fr(e);return S.forEach(t,o=>{let s=At(o.path);return S.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=Fr(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Fr(e),o=oe();return i.J({range:r,H:!0},(s,a,c)=>{let l=Mn(s[1]),h=new $(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){let r=At(t.path),i=IDBKeyRange.bound([r],[fb(r)],!1,!0),o=0;return Fr(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return ts(e).get(t).next(r=>r?lu(r):null)}};function ts(n){return ot(n,"targets")}function z0(n){return ot(n,"targetGlobal")}function Fr(n){return ot(n,"targetDocuments")}function G0([n,e],[t,r]){let i=ie(n,t);return i===0?ie(e,r):i}var Vy=class{constructor(e){this.Un=e,this.buffer=new Ae(G0),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();G0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},jy=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){k("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>R(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Zr(t)?k("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Yr(t)}yield this.Hn(3e5)}))}},Uy=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return S.resolve(Gt.oe);let r=new Vy(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(q0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),q0):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,c,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),ns()<=wn.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(l-c)+`ms
Total Duration: ${l-h}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function eV(n,e){return new Uy(n,e)}var By=class{constructor(e,t){this.db=e,this.garbageCollector=eV(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return gd(e,r)}removeReference(e,t,r){return gd(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return gd(e,t)}nr(e,t){return function(i,o){let s=!1;return pS(i).Y(a=>fS(i,a,o).next(c=>(c&&(s=!0),S.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let c=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,Q.min()),Fr(e).delete(function(p){return[0,At(p.path)]}(s))))});i.push(c)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return gd(e,t)}tr(e,t){let r=Fr(e),i,o=Gt.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==Gt.oe&&t(new $(Mn(i)),o),o=l,i=c):o=Gt.oe}).next(()=>{o!==Gt.oe&&t(new $(Mn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function gd(n,e){return Fr(n).put(function(r,i){return{targetId:0,path:At(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var zd=class{constructor(){this.changes=new Vn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?S.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var $y=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Si(e).put(r)}removeEntry(e,t,r){return Si(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],jd(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=tt.newInvalidDocument(t);return Si(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(au(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:tt.newInvalidDocument(t)};return Si(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(au(t))},(i,o)=>{r={document:this.ir(t,o),size:Hd(o)}}).next(()=>r)}getEntries(e,t){let r=Ft();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=Ft(),i=new Pe($.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,Hd(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return S.resolve();let i=new Ae(Q0);t.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(au(i.first()),au(i.last())),s=i.getIterator(),a=s.getNext();return Si(e).J({index:"documentKeyIndex",range:o},(c,l,h)=>{let p=$.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&Q0(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(au(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),jd(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Si(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=Ft();for(let p of l){let m=this.ir($.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(Uu(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=Ft(),s=K0(t,r),a=K0(t,on.max());return Si(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,l,h)=>{let p=this.ir($.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new Hy(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return W0(e).get("remoteDocumentGlobalKey").next(t=>(K(!!t),t))}rr(e,t){return W0(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=ZL(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Q.min())))return r}return tt.newInvalidDocument(e)}};function gS(n){return new $y(n)}var Hy=class extends zd{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Vn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Ae((o,s)=>ie(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=k0(this.cr.serializer,s);i=i.add(o.path.popLast());let l=Hd(c);r+=l-a.size,t.push(this.cr.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=k0(this.cr.serializer,s.convertToNoDocument(Q.min()));t.push(this.cr.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),S.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function W0(n){return ot(n,"remoteDocumentGlobal")}function Si(n){return ot(n,"remoteDocumentsV14")}function au(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function K0(n,e){let t=e.documentKey.path.toArray();return[n,jd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Q0(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=ie(t[o],r[o]),i)return i;return i=ie(t.length,r.length),i||(i=ie(t[t.length-2],r[r.length-2]),i||ie(t[t.length-1],r[r.length-1]))}var qy=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Gd=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&fu(r.mutation,i,Wt.empty(),Ve.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,oe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=oe()){let i=Nn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=cu();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Nn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,oe()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Ft(),s=hu(),a=function(){return hu()}();return t.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof yn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),fu(h.mutation,l,h.mutation.getFieldMask(),Ve.now())):s.set(l.key,Wt.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new qy(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=hu(),i=new Pe((s,a)=>s-a),o=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let h=r.get(c)||Wt.empty();h=a.applyToLocalView(l,h),r.set(c,h);let p=(i.get(a.batchId)||oe()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,p=jb();h.forEach(m=>{if(!o.has(m)){let v=Gb(t.get(m),r.get(m));v!==null&&p.set(m,v),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return S.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Yv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):S.resolve(Nn()),a=-1,c=o;return s.next(l=>S.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?S.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,oe())).next(h=>({batchId:a,changes:Vb(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $(t)).next(r=>{let i=cu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=cu();return this.indexManager.getCollectionParents(e,o).next(a=>S.forEach(a,c=>{let l=function(p,m){return new mn(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,tt.newInvalidDocument(h)))});let a=cu();return s.forEach((c,l)=>{let h=o.get(c);h!==void 0&&fu(h.mutation,l,Wt.empty(),Ve.now()),Uu(t,l)&&(a=a.insert(c,l))}),a})}};var zy=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return S.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:We(i.createTime)}}(t)),S.resolve()}getNamedQuery(e,t){return S.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:e_(i.bundledQuery),readTime:We(i.readTime)}}(t)),S.resolve()}};var Gy=class{constructor(){this.overlays=new Pe($.comparator),this.Ir=new Map}getOverlay(e,t){return S.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Nn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),S.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),S.resolve()}getOverlaysForCollection(e,t,r){let i=Nn(),o=t.length+1,s=new $(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return S.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Pe((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Nn(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Nn(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return S.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Cu(t,r));let o=this.Ir.get(t);o===void 0&&(o=oe(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var Wy=class{constructor(){this.sessionToken=Ke.EMPTY_BYTE_STRING}getSessionToken(e){return S.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,S.resolve()}};var Ru=class{constructor(){this.Tr=new Ae(Xe.Er),this.dr=new Ae(Xe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Xe(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Xe(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new $(new ve([])),r=new Xe(t,e),i=new Xe(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new $(new ve([])),r=new Xe(t,e),i=new Xe(t,e+1),o=oe();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Xe(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Xe=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return $.comparator(e.key,t.key)||ie(e.wr,t.wr)}static Ar(e,t){return ie(e.wr,t.wr)||$.comparator(e.key,t.key)}};var Ky=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ae(Xe.Er)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Du(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new Xe(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(s)}lookupMutationBatch(e,t){return S.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return S.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Xe(t,0),i=new Xe(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),S.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ae(ie);return t.forEach(i=>{let o=new Xe(i,0),s=new Xe(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),S.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;$.isDocumentKey(o)||(o=o.child(""));let s=new Xe(new $(o),0),a=new Ae(ie);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},s),S.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){K(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return S.forEach(t.mutations,i=>{let o=new Xe(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Xe(t,0),i=this.br.firstAfterOrEqual(r);return S.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Qy=class{constructor(e){this.Mr=e,this.docs=function(){return new Pe($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return S.resolve(r?r.document.mutableCopy():tt.newInvalidDocument(t))}getEntries(e,t){let r=Ft();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():tt.newInvalidDocument(i))}),S.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Ft(),s=t.path,a=new $(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||zv(gb(h),r)<=0||(i.has(h.key)||Uu(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return S.resolve(o)}getAllFromCollectionGroup(e,t,r,i){z()}Or(e,t){return S.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Yy(this)}getSize(e){return S.resolve(this.size)}},Yy=class extends zd{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),S.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var Zy=class{constructor(e){this.persistence=e,this.Nr=new Vn(t=>Vi(t),Vu),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ru,this.targetCount=0,this.kr=_s.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),S.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new _s(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,S.resolve()}updateTargetData(e,t){return this.Kn(t),S.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(o).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return S.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),S.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),S.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),S.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return S.resolve(r)}containsKey(e,t){return S.resolve(this.Br.containsKey(t))}};var Wd=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Gt(0),this.Kr=!1,this.Kr=!0,this.$r=new Wy,this.referenceDelegate=e(this),this.Ur=new Zy(this),this.indexManager=new Oy,this.remoteDocumentCache=function(i){return new Qy(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Vd(t),this.Gr=new zy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Gy,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Ky(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("MemoryPersistence","Starting transaction:",e);let i=new Jy(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return S.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},Jy=class extends bd{constructor(e){super(),this.currentSequenceNumber=e}},Kd=class n{constructor(e){this.persistence=e,this.Jr=new Ru,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw z()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),S.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),S.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.Xr,r=>{let i=$.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,Q.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return S.or([()=>S.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var Xy=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new Sd("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",d0,{unique:!0}),c.createObjectStore("documentMutations")}(e),Y0(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=S.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),Y0(e)),s=s.next(()=>function(c){let l=c.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Q.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,l){return l.store("mutations").U().next(h=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",d0,{unique:!0});let p=l.store("mutations"),m=h.map(v=>p.put(v));return S.waitFor(m)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:yL});l.createIndex("collectionPathOverlayIndex",vL,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",_L,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:sL});l.createIndex("documentKeyIndex",aL),l.createIndex("collectionGroupIndex",uL)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:fL}).createIndex("sequenceNumberIndex",pL,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:gL}).createIndex("documentKeyIndex",mL,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Hd(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>S.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>S.forEach(a,c=>{K(c.userId===o.userId);let l=Ri(this.serializer,c);return hS(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let c=new ve(s),l=function(p){return[0,At(p)]}(c);o.push(t.get(l).next(h=>h?S.resolve():(p=>t.put({targetId:0,path:At(p),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>S.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:hL});let r=t.store("collectionParents"),i=new xu,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:At(c)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let c=new ve(s);return o(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,c],l)=>{let h=Mn(a);return o(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=lu(i),s=cS(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),c=function(p){return p.document?new $(ve.fromString(p.document.name).popFirst(5)):p.noDocument?$.fromSegments(p.noDocument.path):p.unknownDocument?$.fromSegments(p.unknownDocument.path):z()}(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>S.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=gS(this.serializer),o=new Wd(Kd.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(c=>{var l;let h=(l=a.get(c.userId))!==null&&l!==void 0?l:oe();Ri(this.serializer,c).keys().forEach(p=>h=h.add(p)),a.set(c.userId,h)}),S.forEach(a,(c,l)=>{let h=new et(l),p=Ud.lt(this.serializer,h),m=o.getIndexManager(h),v=qd.lt(h,this.serializer,m,o.referenceDelegate);return new Gd(i,v,p,m).recalculateAndSaveOverlaysForDocumentKeys(new vu(t,Gt.oe),c).next()})})}};function Y0(n){n.createObjectStore("targetDocuments",{keyPath:lL}).createIndex("documentTargetsIndex",dL,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",cL,{unique:!0}),n.createObjectStore("targetGlobal")}var Bm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ev=class n{constructor(e,t,r,i,o,s,a,c,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!n.D())throw new P(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new By(this,i),this.Ai=t+"main",this.serializer=new Vd(c),this.Ri=new Br(this.Ai,this.hi,new Xy(this.serializer)),this.$r=new Ay,this.Ur=new Ly(this.referenceDelegate,this.serializer),this.remoteDocumentCache=gS(this.serializer),this.Gr=new Sy,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&ze("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,Bm);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Gt(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>R(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>R(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>R(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>md(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Zr(e))return k("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return k("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return uu(e).get("owner").next(t=>S.resolve(this.vi(t)))}Ci(e){return md(e).delete(this.clientId)}Fi(){return R(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=ot(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return S.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?S.resolve(!0):uu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,Bm);return!1}}return!(!this.networkEnabled||!this.inForeground)||md(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&k("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return R(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new vu(e,Gt.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>md(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return qd.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Fy(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Ud.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(c){return c===17?EL:c===16?IL:c===15?Wv:c===14?Eb:c===13?Ib:c===12?wL:c===11?wb:void z()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new vu(a,this.Qr?this.Qr.next():Gt.oe),t==="readwrite-primary"?this.wi(s).next(c=>!!c||this.Si(s)).next(c=>{if(!c)throw ze(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new P(x.FAILED_PRECONDITION,mb);return r(s)}).next(c=>this.Di(s).next(()=>c)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return uu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new P(x.FAILED_PRECONDITION,Bm)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return uu(e).put("owner",t)}static D(){return Br.D()}bi(e){let t=uu(e);return t.get("owner").next(r=>this.vi(r)?(k("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):S.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(ze(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;lf()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return k("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ze("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){ze("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function uu(n){return ot(n,"owner")}function md(n){return ot(n,"clientMetadata")}function n_(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var tv=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=oe(),i=oe();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var nv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Qd=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return lf()?8:yb(ra())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new nv;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(ns()<=wn.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",rs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),S.resolve()):(ns()<=wn.DEBUG&&k("QueryEngine","Query:",rs(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ns()<=wn.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",rs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xt(t))):S.resolve())}Yi(e,t){if(D0(t))return S.resolve(null);let r=xt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=kd(t,null,"F"),r=xt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=oe(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,s,c.readTime)?this.Yi(e,kd(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return D0(t)||i.isEqual(Q.min())?S.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?S.resolve(null):(ns()<=wn.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),rs(t)),this.rs(e,s,t,pb(i,-1)).next(a=>a))})}ts(e,t){let r=new Ae(Fb(e));return t.forEach((i,o)=>{Uu(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return ns()<=wn.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",rs(t)),this.Ji.getDocumentsMatchingQuery(e,t,on.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var rv=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Pe(ie),this._s=new Vn(o=>Vi(o),Vu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Gd(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function mS(n,e,t,r){return new rv(n,e,t,r)}function yS(n,e){return R(this,null,function*(){let t=B(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=oe();for(let l of i){s.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function tV(n,e){let t=B(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){let p=l.batch,m=p.keys(),v=S.resolve();return m.forEach(b=>{v=v.next(()=>h.getEntry(c,b)).next(M=>{let N=l.docVersions.get(b);K(N!==null),M.version.compareTo(N)<0&&(p.applyToRemoteDocument(M,l),M.isValidDocument()&&(M.setReadTime(l.commitVersion),h.addEntry(M)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=oe();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function vS(n){let e=B(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function nV(n,e){let t=B(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,p)));let v=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(Ke.EMPTY_BYTE_STRING,Q.min()).withLastLimboFreeSnapshotVersion(Q.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(M,N,U){return M.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0}(m,v,h)&&a.push(t.Ur.updateTargetData(o,v))});let c=Ft(),l=oe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(_S(o,s,e.documentUpdates).next(h=>{c=h.Ps,l=h.Is})),!r.isEqual(Q.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return S.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.os=i,o))}function _S(n,e,t){let r=oe(),i=oe();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Ft();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Q.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):k("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:s,Is:i}})}function rV(n,e){let t=B(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ws(n,e){let t=B(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,S.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new vs(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Is(n,e,t){return R(this,null,function*(){let r=B(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Zr(s))throw s;k("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function Yd(n,e,t){let r=B(n),i=Q.min(),o=oe();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,h){let p=B(c),m=p._s.get(h);return m!==void 0?S.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,s,xt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:Q.min(),t?o:oe())).next(a=>(ES(r,Ob(e),a),{documents:a,Ts:o})))}function wS(n,e){let t=B(n),r=B(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function IS(n,e){let t=B(n),r=t.us.get(e)||Q.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,pb(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(ES(t,e,i),i))}function ES(n,e,t){let r=n.us.get(e)||Q.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function iV(n,e,t,r){return R(this,null,function*(){let i=B(n),o=oe(),s=Ft();for(let l of t){let h=e.Es(l.metadata.name);l.document&&(o=o.add(h));let p=e.ds(l);p.setReadTime(e.As(l.metadata.readTime)),s=s.insert(h,p)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield ws(i,function(h){return xt(xs(ve.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>_S(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Ur.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function oV(r,i){return R(this,arguments,function*(n,e,t=oe()){let o=yield ws(n,xt(e_(e.bundledQuery))),s=B(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=We(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(Ke.EMPTY_BYTE_STRING,c);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function Z0(n,e){return`firestore_clients_${n}_${e}`}function J0(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function $m(n,e){return`firestore_targets_${n}_${e}`}var Zd=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new P(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(ze("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},pu=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new P(r.error.code,r.error.message))),o?new n(e,r.state,i):(ze("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Jd=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Zv();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=vb(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(ze("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},iv=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(ze("SharedClientState",`Failed to parse online state: ${e}`),null)}},Mu=class{constructor(){this.activeTargetIds=Zv()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},gu=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Pe(ie),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=Z0(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Mu),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return R(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(Z0(this.persistenceKey,r));if(i){let o=Jd.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem($m(this.persistenceKey,e));if(i){let o=pu.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem($m(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return k("SharedClientState","READ",e,t),t}setItem(e,t){k("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){k("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(k("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void ze("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>R(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=Gt.oe;if(o!=null)try{let a=JSON.parse(o);K(typeof a=="number"),s=a}catch(a){ze("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==Gt.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new Zd(this.currentUser,e,t,r),o=J0(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=J0(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=$m(this.persistenceKey,e),o=new pu(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return Jd.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Zd.Rs(new et(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return pu.Rs(i,t)}Ls(e){return iv.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return R(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);k("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=Zv();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},Xd=class{constructor(){this.so=new Mu,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Mu,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var ov=class{_o(e){}shutdown(){}};var eh=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){k("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){k("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var yd=null;function Hm(){return yd===null?yd=function(){return 268435456+Math.round(2147483648*Math.random())}():yd++,"0x"+yd.toString(16)}var sV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var sv=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var yt="WebChannelConnection",av=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=Hm(),c=this.xo(t,r.toUriEncodedString());k("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,c,l,i).then(h=>(k("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw gn("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+As}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=sV[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=Hm();return new Promise((s,a)=>{let c=new Om;c.setWithCredentials(!0),c.listenOnce(Fm.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case iu.NO_ERROR:let h=c.getResponseJson();k(yt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case iu.TIMEOUT:k(yt,`RPC '${e}' ${o} timed out`),a(new P(x.DEADLINE_EXCEEDED,"Request time out"));break;case iu.HTTP_ERROR:let p=c.getStatus();if(k(yt,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let b=function(N){let U=N.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(U)>=0?U:x.UNKNOWN}(v.status);a(new P(b,v.message))}else a(new P(x.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new P(x.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{k(yt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);k(yt,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Hm(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=jm(),a=Vm(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=o.join("");k(yt,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=s.createWebChannel(h,c),m=!1,v=!1,b=new sv({Io:N=>{v?k(yt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(k(yt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),k(yt,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},To:()=>p.close()}),M=(N,U,q)=>{N.listen(U,F=>{try{q(F)}catch(Y){setTimeout(()=>{throw Y},0)}})};return M(p,Zo.EventType.OPEN,()=>{v||(k(yt,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),M(p,Zo.EventType.CLOSE,()=>{v||(v=!0,k(yt,`RPC '${e}' stream ${i} transport closed`),b.So())}),M(p,Zo.EventType.ERROR,N=>{v||(v=!0,gn(yt,`RPC '${e}' stream ${i} transport errored:`,N),b.So(new P(x.UNAVAILABLE,"The operation could not be completed")))}),M(p,Zo.EventType.MESSAGE,N=>{var U;if(!v){let q=N.data[0];K(!!q);let F=q,Y=F.error||((U=F[0])===null||U===void 0?void 0:U.error);if(Y){k(yt,`RPC '${e}' stream ${i} received error:`,Y);let ee=Y.status,Z=function(w){let E=Je[w];if(E!==void 0)return Qb(E)}(ee),I=Y.message;Z===void 0&&(Z=x.INTERNAL,I="Unknown error status: "+ee+" with message "+Y.message),v=!0,b.So(new P(Z,I)),p.close()}else k(yt,`RPC '${e}' stream ${i} received:`,q),b.bo(q)}}),M(a,Lm.STAT_EVENT,N=>{N.stat===fd.PROXY?k(yt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===fd.NOPROXY&&k(yt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}};function DS(){return typeof window<"u"?window:null}function Ed(){return typeof document<"u"?document:null}function Bu(n){return new Ey(n,!0)}var Nu=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var th=class{constructor(e,t,r,i,o,s,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Nu(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return R(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return R(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return R(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===x.RESOURCE_EXHAUSTED?(ze(t.toString()),ze("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new P(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>R(this,null,function*(){this.state=0,this.start()}))}I_(e){return k("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(k("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},uv=class extends th{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=qL(this.serializer,e),r=function(o){if(!("targetChange"in o))return Q.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Q.min():s.readTime?We(s.readTime):Q.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=Ty(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=Nd(c)?{documents:rS(o,c)}:{query:iS(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Zb(o,s.resumeToken);let l=Dy(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(Q.min())>0){a.readTime=ys(o,s.snapshotVersion.toTimestamp());let l=Dy(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=GL(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=Ty(this.serializer),t.removeTarget=e,this.a_(t)}},cv=class extends th{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return K(!!e.streamToken),this.lastStreamToken=e.streamToken,K(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){K(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=zL(e.writeResults,e.commitTime),r=We(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=Ty(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Au(this.serializer,r))};this.a_(t)}};var lv=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,Cy(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new P(x.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,Cy(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new P(x.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},dv=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ze(t),this.D_=!1):k("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var hv=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>R(this,null,function*(){Jr(this)&&(k("RemoteStore","Restarting streams for network reachability change."),yield function(c){return R(this,null,function*(){let l=B(c);l.L_.add(4),yield Rs(l),l.q_.set("Unknown"),l.L_.delete(4),yield $u(l)})}(this))}))}),this.q_=new dv(r,i)}};function $u(n){return R(this,null,function*(){if(Jr(n))for(let e of n.B_)yield e(!0)})}function Rs(n){return R(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Eh(n,e){let t=B(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),o_(t)?i_(t):Ns(t).r_()&&r_(t,e))}function Es(n,e){let t=B(n),r=Ns(t);t.N_.delete(e),r.r_()&&CS(t,e),t.N_.size===0&&(r.r_()?r.o_():Jr(t)&&t.q_.set("Unknown"))}function r_(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Q.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ns(n).A_(e)}function CS(n,e){n.Q_.xe(e),Ns(n).R_(e)}function i_(n){n.Q_=new Iy({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Ns(n).start(),n.q_.v_()}function o_(n){return Jr(n)&&!Ns(n).n_()&&n.N_.size>0}function Jr(n){return B(n).L_.size===0}function TS(n){n.Q_=void 0}function aV(n){return R(this,null,function*(){n.q_.set("Online")})}function uV(n){return R(this,null,function*(){n.N_.forEach((e,t)=>{r_(n,e)})})}function cV(n,e){return R(this,null,function*(){TS(n),o_(n)?(n.q_.M_(e),i_(n)):n.q_.set("Unknown")})}function lV(n,e,t){return R(this,null,function*(){if(n.q_.set("Online"),e instanceof Fd&&e.state===2&&e.cause)try{yield function(i,o){return R(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){k("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield nh(n,r)}else if(e instanceof ls?n.Q_.Ke(e):e instanceof Od?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Q.min()))try{let r=yield vS(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let h=o.N_.get(c);if(!h)return;o.N_.set(c,h.withResumeToken(Ke.EMPTY_BYTE_STRING,h.snapshotVersion)),CS(o,c);let p=new vs(h.target,c,l,h.sequenceNumber);r_(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){k("RemoteStore","Failed to raise snapshot:",r),yield nh(n,r)}})}function nh(n,e,t){return R(this,null,function*(){if(!Zr(e))throw e;n.L_.add(1),yield Rs(n),n.q_.set("Offline"),t||(t=()=>vS(n.localStore)),n.asyncQueue.enqueueRetryable(()=>R(this,null,function*(){k("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield $u(n)}))})}function bS(n,e){return e().catch(t=>nh(n,t,e))}function Ms(n){return R(this,null,function*(){let e=B(n),t=Qr(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;dV(e);)try{let i=yield rV(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,hV(e,i)}catch(i){yield nh(e,i)}SS(e)&&AS(e)})}function dV(n){return Jr(n)&&n.O_.length<10}function hV(n,e){n.O_.push(e);let t=Qr(n);t.r_()&&t.V_&&t.m_(e.mutations)}function SS(n){return Jr(n)&&!Qr(n).n_()&&n.O_.length>0}function AS(n){Qr(n).start()}function fV(n){return R(this,null,function*(){Qr(n).p_()})}function pV(n){return R(this,null,function*(){let e=Qr(n);for(let t of n.O_)e.m_(t.mutations)})}function gV(n,e,t){return R(this,null,function*(){let r=n.O_.shift(),i=vy.from(r,e,t);yield bS(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ms(n)})}function mV(n,e){return R(this,null,function*(){e&&Qr(n).V_&&(yield function(r,i){return R(this,null,function*(){if(function(s){return Kb(s)&&s!==x.ABORTED}(i.code)){let o=r.O_.shift();Qr(r).s_(),yield bS(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Ms(r)}})}(n,e)),SS(n)&&AS(n)})}function X0(n,e){return R(this,null,function*(){let t=B(n);t.asyncQueue.verifyOperationInProgress(),k("RemoteStore","RemoteStore received new credentials");let r=Jr(t);t.L_.add(3),yield Rs(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield $u(t)})}function fv(n,e){return R(this,null,function*(){let t=B(n);e?(t.L_.delete(2),yield $u(t)):e||(t.L_.add(2),yield Rs(t),t.q_.set("Unknown"))})}function Ns(n){return n.K_||(n.K_=function(t,r,i){let o=B(t);return o.w_(),new uv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:aV.bind(null,n),Ro:uV.bind(null,n),mo:cV.bind(null,n),d_:lV.bind(null,n)}),n.B_.push(e=>R(this,null,function*(){e?(n.K_.s_(),o_(n)?i_(n):n.q_.set("Unknown")):(yield n.K_.stop(),TS(n))}))),n.K_}function Qr(n){return n.U_||(n.U_=function(t,r,i){let o=B(t);return o.w_(),new cv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:fV.bind(null,n),mo:mV.bind(null,n),f_:pV.bind(null,n),g_:gV.bind(null,n)}),n.B_.push(e=>R(this,null,function*(){e?(n.U_.s_(),yield Ms(n)):(yield n.U_.stop(),n.O_.length>0&&(k("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var pv=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new it,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new P(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Ps(n,e){if(ze("AsyncQueue",`${e}: ${n}`),Zr(n))return new P(x.UNAVAILABLE,`${e}: ${n}`);throw n}var rh=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$.comparator(t.key,r.key):(t,r)=>$.comparator(t.key,r.key),this.keyedMap=cu(),this.sortedSet=new Pe(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var ih=class{constructor(){this.W_=new Pe($.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):z():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Ds=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,rh.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ju(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var gv=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},mv=class{constructor(){this.queries=eb(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=B(t),o=i.queries;i.queries=eb(),o.forEach((s,a)=>{for(let c of a.j_)c.onError(r)})})(this,new P(x.ABORTED,"Firestore shutting down"))}};function eb(){return new Vn(n=>kb(n),ju)}function s_(n,e){return R(this,null,function*(){let t=B(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new gv,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Ps(s,`Initialization of query '${rs(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&u_(t)})}function a_(n,e){return R(this,null,function*(){let t=B(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function yV(n,e){let t=B(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&u_(t)}function vV(n,e,t){let r=B(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function u_(n){n.Y_.forEach(e=>{e.next()})}var yv,tb;(tb=yv||(yv={})).ea="default",tb.Cache="cache";var Pu=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ds(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Ds.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==yv.Cache}};var vv=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var oh=class{constructor(e){this.serializer=e}Es(e){return kn(this.serializer,e)}ds(e){return e.metadata.exists?nS(this.serializer,e.document,!1):tt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return We(e)}},_v=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=xS(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=ve.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new oh(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||oe()).add(o);t.set(s,a)}}return t}complete(){return R(this,null,function*(){let e=yield iV(this.localStore,new oh(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield oV(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function xS(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var sh=class{constructor(e){this.key=e}},ah=class{constructor(e){this.key=e}},uh=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=oe(),this.mutatedKeys=oe(),this.Aa=Fb(e),this.Ra=new rh(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new ih,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),v=Uu(this.query,p)?p:null,b=!!m&&this.mutatedKeys.has(m.key),M=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),N=!1;m&&v?m.data.isEqual(v.data)?b!==M&&(r.track({type:3,doc:v}),N=!0):this.ga(m,v)||(r.track({type:2,doc:v}),N=!0,(c&&this.Aa(v,c)>0||l&&this.Aa(v,l)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),N=!0):m&&!v&&(r.track({type:1,doc:m}),N=!0,(c||l)&&(a=!0)),N&&(v?(s=s.add(v),o=M?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(v,b){let M=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return M(v)-M(b)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,s.length!==0||l?{snapshot:new Ds(this.query,e.Ra,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new ih,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=oe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new ah(r))}),this.da.forEach(r=>{e.has(r)||t.push(new sh(r))}),t}ba(e){this.Ta=e.Ts,this.da=oe();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Ds.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},wv=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Iv=class{constructor(e){this.key=e,this.va=!1}},Ev=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Vn(a=>kb(a),ju),this.Ma=new Map,this.xa=new Set,this.Oa=new Pe($.comparator),this.Na=new Map,this.La=new Ru,this.Ba={},this.ka=new Map,this.qa=_s.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function _V(n,e,t=!0){return R(this,null,function*(){let r=Dh(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield RS(r,e,t,!0),i})}function wV(n,e){return R(this,null,function*(){let t=Dh(n);yield RS(t,e,!0,!1)})}function RS(n,e,t,r){return R(this,null,function*(){let i=yield ws(n.localStore,xt(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield c_(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Eh(n.remoteStore,i),a})}function c_(n,e,t,r,i){return R(this,null,function*(){n.Ka=(p,m,v)=>function(M,N,U,q){return R(this,null,function*(){let F=N.view.ma(U);F.ns&&(F=yield Yd(M.localStore,N.query,!1).then(({documents:I})=>N.view.ma(I,F)));let Y=q&&q.targetChanges.get(N.targetId),ee=q&&q.targetMismatches.get(N.targetId)!=null,Z=N.view.applyChanges(F,M.isPrimaryClient,Y,ee);return Dv(M,N.targetId,Z.wa),Z.snapshot})}(n,p,m,v);let o=yield Yd(n.localStore,e,!0),s=new uh(e,o.Ts),a=s.ma(o.documents),c=bu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);Dv(n,t,l.wa);let h=new wv(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function IV(n,e,t){return R(this,null,function*(){let r=B(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!ju(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Is(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Es(r.remoteStore,i.targetId),Cs(r,i.targetId)}).catch(Yr))):(Cs(r,i.targetId),yield Is(r.localStore,i.targetId,!0))})}function EV(n,e){return R(this,null,function*(){let t=B(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Es(t.remoteStore,r.targetId))})}function DV(n,e,t){return R(this,null,function*(){let r=f_(n);try{let i=yield function(s,a){let c=B(s),l=Ve.now(),h=a.reduce((v,b)=>v.add(b.key),oe()),p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let b=Ft(),M=oe();return c.cs.getEntries(v,h).next(N=>{b=N,b.forEach((U,q)=>{q.isValidDocument()||(M=M.add(U))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,b)).next(N=>{p=N;let U=[];for(let q of a){let F=LL(q,p.get(q.key).overlayedDocument);F!=null&&U.push(new yn(q.key,F,Sb(F.value.mapValue),He.exists(!0)))}return c.mutationQueue.addMutationBatch(v,l,U,a)}).next(N=>{m=N;let U=N.applyToLocalDocumentSet(p,M);return c.documentOverlayCache.saveOverlays(v,N.batchId,U)})}).then(()=>({batchId:m.batchId,changes:Vb(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.Ba[s.currentUser.toKey()];l||(l=new Pe(ie)),l=l.insert(a,c),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield lr(r,i.changes),yield Ms(r.remoteStore)}catch(i){let o=Ps(i,"Failed to persist write");t.reject(o)}})}function MS(n,e){return R(this,null,function*(){let t=B(n);try{let r=yield nV(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(K(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?K(s.va):i.removedDocuments.size>0&&(K(s.va),s.va=!1))}),yield lr(t,r,e)}catch(r){yield Yr(r)}})}function nb(n,e,t){let r=B(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=B(s);c.onlineState=a;let l=!1;c.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&u_(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function CV(n,e,t){return R(this,null,function*(){let r=B(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Pe($.comparator);s=s.insert(o,tt.newNoDocument(o,Q.min()));let a=oe().add(o),c=new Tu(Q.min(),new Map,new Pe(ie),s,a);yield MS(r,c),r.Oa=r.Oa.remove(o),r.Na.delete(e),h_(r)}else yield Is(r.localStore,e,!1).then(()=>Cs(r,e,t)).catch(Yr)})}function TV(n,e){return R(this,null,function*(){let t=B(n),r=e.batch.batchId;try{let i=yield tV(t.localStore,e);d_(t,r,null),l_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield lr(t,i)}catch(i){yield Yr(i)}})}function bV(n,e,t){return R(this,null,function*(){let r=B(n);try{let i=yield function(s,a){let c=B(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(K(p!==null),h=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(r.localStore,e);d_(r,e,t),l_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield lr(r,i)}catch(i){yield Yr(i)}})}function SV(n,e){return R(this,null,function*(){let t=B(n);Jr(t.remoteStore)||k("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=B(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=Ps(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function l_(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function d_(n,e,t){let r=B(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Cs(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||NS(n,r)})}function NS(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Es(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),h_(n))}function Dv(n,e,t){for(let r of t)r instanceof sh?(n.La.addReference(r.key,e),AV(n,r)):r instanceof ah?(k("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||NS(n,r.key)):z()}function AV(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(k("SyncEngine","New document in limbo: "+t),n.xa.add(r),h_(n))}function h_(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new $(ve.fromString(e)),r=n.qa.next();n.Na.set(r,new Iv(t)),n.Oa=n.Oa.insert(t,r),Eh(n.remoteStore,new vs(xt(xs(t.path)),r,"TargetPurposeLimboResolution",Gt.oe))}}function lr(n,e,t){return R(this,null,function*(){let r=B(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{s.push(r.Ka(c,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){i.push(l);let p=tv.Wi(c.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(c,l){return R(this,null,function*(){let h=B(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>S.forEach(l,m=>S.forEach(m.$i,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>S.forEach(m.Ui,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!Zr(p))throw p;k("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let v=h.os.get(m),b=v.snapshotVersion,M=v.withLastLimboFreeSnapshotVersion(b);h.os=h.os.insert(m,M)}}})}(r.localStore,o))})}function xV(n,e){return R(this,null,function*(){let t=B(n);if(!t.currentUser.isEqual(e)){k("SyncEngine","User change. New user:",e.toKey());let r=yield yS(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(c=>{c.reject(new P(x.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield lr(t,r.hs)}})}function RV(n,e){let t=B(n),r=t.Na.get(e);if(r&&r.va)return oe().add(r.key);{let i=oe(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function MV(n,e){return R(this,null,function*(){let t=B(n),r=yield Yd(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&Dv(t,e.targetId,i.wa),i})}function NV(n,e){return R(this,null,function*(){let t=B(n);return IS(t.localStore,e).then(r=>lr(t,r))})}function PV(n,e,t,r){return R(this,null,function*(){let i=B(n),o=yield function(a,c){let l=B(a),h=B(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.Mn(p,c).next(m=>m?l.localDocuments.getDocuments(p,m):S.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield Ms(i.remoteStore):t==="acknowledged"||t==="rejected"?(d_(i,e,r||null),l_(i,e),function(a,c){B(B(a).mutationQueue).On(c)}(i.localStore,e)):z(),yield lr(i,o)):k("SyncEngine","Cannot apply mutation batch with id: "+e)})}function kV(n,e){return R(this,null,function*(){let t=B(n);if(Dh(t),f_(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield rb(t,r.toArray());t.Qa=!0,yield fv(t.remoteStore,!0);for(let o of i)Eh(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Cs(t,s),Is(t.localStore,s,!0))),Es(t.remoteStore,s)}),yield i,yield rb(t,r),function(s){let a=B(s);a.Na.forEach((c,l)=>{Es(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new Pe($.comparator)}(t),t.Qa=!1,yield fv(t.remoteStore,!1)}})}function rb(n,e,t){return R(this,null,function*(){let r=B(n),i=[],o=[];for(let s of e){let a,c=r.Ma.get(s);if(c&&c.length!==0){a=yield ws(r.localStore,xt(c[0]));for(let l of c){let h=r.Fa.get(l),p=yield MV(r,h);p.snapshot&&o.push(p.snapshot)}}else{let l=yield wS(r.localStore,s);a=yield ws(r.localStore,l),yield c_(r,PS(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function PS(n){return Pb(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function OV(n){return function(t){return B(B(t).persistence).Qi()}(B(n).localStore)}function FV(n,e,t,r){return R(this,null,function*(){let i=B(n);if(i.Qa)return void k("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield IS(i.localStore,Ob(o[0])),a=Tu.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Ke.EMPTY_BYTE_STRING);yield lr(i,s,a);break}case"rejected":yield Is(i.localStore,e,!0),Cs(i,e,r);break;default:z()}})}function LV(n,e,t){return R(this,null,function*(){let r=Dh(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){k("SyncEngine","Adding an already active target "+i);continue}let o=yield wS(r.localStore,i),s=yield ws(r.localStore,o);yield c_(r,PS(o),s.targetId,!1,s.resumeToken),Eh(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield Is(r.localStore,i,!1).then(()=>{Es(r.remoteStore,i),Cs(r,i)}).catch(Yr))}})}function Dh(n){let e=B(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=MS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=RV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CV.bind(null,e),e.Ca.d_=yV.bind(null,e.eventManager),e.Ca.$a=vV.bind(null,e.eventManager),e}function f_(n){let e=B(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bV.bind(null,e),e}function VV(n,e,t){let r=B(n);(function(o,s,a){return R(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(v,b){let M=B(v),N=We(b.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",U=>M.Gr.getBundleMetadata(U,b.id)).then(U=>!!U&&U.createTime.compareTo(N)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(v){return{taskState:"Success",documentsLoaded:v.totalDocuments,bytesLoaded:v.totalBytes,totalDocuments:v.totalDocuments,totalBytes:v.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(xS(c));let l=new _v(c,o.localStore,s.serializer),h=yield s.Ua();for(;h;){let m=yield l.la(h);m&&a._updateProgress(m),h=yield s.Ua()}let p=yield l.complete();return yield lr(o,p.Ia,void 0),yield function(v,b){let M=B(v);return M.persistence.runTransaction("Save bundle","readwrite",N=>M.Gr.saveBundleMetadata(N,b))}(o.localStore,c),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(c){return gn("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Cv=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return R(this,null,function*(){this.serializer=Bu(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return mS(this.persistence,new Qd,t.initialUser,this.serializer)}Ga(t){return new Wd(Kd.Zr,this.serializer)}Wa(t){return new Xd}terminate(){return R(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var ch=class n extends Cv{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return R(this,null,function*(){yield uf(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield f_(this.Ja.syncEngine),yield Ms(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return mS(this.persistence,new Qd,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new jy(r,e.asyncQueue,t)}Ha(e,t){let r=new ny(t,this.persistence);return new ty(e.asyncQueue,r)}Ga(e){let t=n_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?rn.withCacheSize(this.cacheSizeBytes):rn.DEFAULT;return new ev(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,DS(),Ed(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Xd}},Tv=class n extends ch{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return R(this,null,function*(){yield uf(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof gu&&(this.sharedClientState.syncEngine={no:PV.bind(null,t),ro:FV.bind(null,t),io:LV.bind(null,t),Qi:OV.bind(null,t),eo:NV.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>R(this,null,function*(){yield kV(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=DS();if(!gu.D(t))throw new P(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=n_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new gu(t,e.asyncQueue,r,e.clientId,e.initialUser)}},p_=(()=>{class n{initialize(t,r){return R(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>nb(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=xV.bind(null,this.syncEngine),yield fv(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new mv}()}createDatastore(t){let r=Bu(t.databaseInfo.databaseId),i=function(s){return new av(s)}(t.databaseInfo);return function(s,a,c,l){return new lv(s,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new hv(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>nb(this.syncEngine,r,0),function(){return eh.D()?new eh:new ov}())}createSyncEngine(t,r){return function(o,s,a,c,l,h,p){let m=new Ev(o,s,a,c,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return R(this,null,function*(){var t,r;yield function(o){return R(this,null,function*(){let s=B(o);k("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield Rs(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function ib(n,e=10240){let t=0;return{read(){return R(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return R(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Ts=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ze("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var bv=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new it,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return R(this,null,function*(){return this.metadata.promise})}Ua(){return R(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return R(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new vv(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return R(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return R(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return R(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var Sv=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return R(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new P(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return R(this,null,function*(){let s=B(i),a={documents:o.map(p=>Su(s.serializer,p))},c=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,ve.emptyPath(),a,o.length),l=new Map;c.forEach(p=>{let m=HL(s.serializer,p);l.set(m.key.toString(),m)});let h=[];return o.forEach(p=>{let m=l.get(p.toString());K(!!m),h.push(m)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Kr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return R(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=$.fromPath(r);this.mutations.push(new Eu(i,this.precondition(i)))}),yield function(r,i){return R(this,null,function*(){let o=B(r),s={writes:i.map(a=>Au(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,ve.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw z();t=Q.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new P(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Q.min())?He.exists(!1):He.updateTime(t):He.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Q.min()))throw new P(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return He.updateTime(t)}return He.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Av=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new Nu(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>R(this,null,function*(){let e=new Sv(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!Lu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!Kb(t)}return!1}};var xv=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=et.UNAUTHENTICATED,this.clientId=Cd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>R(this,null,function*(){k("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(k("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new it;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>R(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Ps(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function qm(n,e){return R(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),k("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>R(this,null,function*(){r.isEqual(i)||(yield yS(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function ob(n,e){return R(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield g_(n);k("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>X0(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>X0(e.remoteStore,i)),n._onlineComponents=e})}function g_(n){return R(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){k("FirestoreClient","Using user provided OfflineComponentProvider");try{yield qm(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;gn("Error using user provided cache. Falling back to memory cache: "+t),yield qm(n,new Cv)}}else k("FirestoreClient","Using default OfflineComponentProvider"),yield qm(n,new Cv);return n._offlineComponents})}function Ch(n){return R(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(k("FirestoreClient","Using user provided OnlineComponentProvider"),yield ob(n,n._uninitializedComponentsProvider._online)):(k("FirestoreClient","Using default OnlineComponentProvider"),yield ob(n,new p_))),n._onlineComponents})}function kS(n){return g_(n).then(e=>e.persistence)}function m_(n){return g_(n).then(e=>e.localStore)}function OS(n){return Ch(n).then(e=>e.remoteStore)}function y_(n){return Ch(n).then(e=>e.syncEngine)}function jV(n){return Ch(n).then(e=>e.datastore)}function bs(n){return R(this,null,function*(){let e=yield Ch(n),t=e.eventManager;return t.onListen=_V.bind(null,e.syncEngine),t.onUnlisten=IV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=wV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=EV.bind(null,e.syncEngine),t})}function UV(n){return n.asyncQueue.enqueue(()=>R(this,null,function*(){let e=yield kS(n),t=yield OS(n);return e.setNetworkEnabled(!0),function(i){let o=B(i);return o.L_.delete(0),$u(o)}(t)}))}function BV(n){return n.asyncQueue.enqueue(()=>R(this,null,function*(){let e=yield kS(n),t=yield OS(n);return e.setNetworkEnabled(!1),function(i){return R(this,null,function*(){let o=B(i);o.L_.add(0),yield Rs(o),o.q_.set("Offline")})}(t)}))}function $V(n,e){let t=new it;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o,s){return R(this,null,function*(){try{let a=yield function(l,h){let p=B(l);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new P(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=Ps(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield m_(n),e,t)})),t.promise}function FS(n,e,t={}){let r=new it;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(o,s,a,c,l){let h=new Ts({next:m=>{h.Za(),s.enqueueAndForget(()=>a_(o,p));let v=m.docs.has(a);!v&&m.fromCache?l.reject(new P(x.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&c&&c.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Pu(xs(a.path),h,{includeMetadataChanges:!0,_a:!0});return s_(o,p)}(yield bs(n),n.asyncQueue,e,t,r)})),r.promise}function HV(n,e){let t=new it;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o,s){return R(this,null,function*(){try{let a=yield Yd(i,o,!0),c=new uh(o,a.Ts),l=c.ma(a.documents),h=c.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let c=Ps(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield m_(n),e,t)})),t.promise}function LS(n,e,t={}){let r=new it;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(o,s,a,c,l){let h=new Ts({next:m=>{h.Za(),s.enqueueAndForget(()=>a_(o,p)),m.fromCache&&c.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Pu(a,h,{includeMetadataChanges:!0,_a:!0});return s_(o,p)}(yield bs(n),n.asyncQueue,e,t,r)})),r.promise}function qV(n,e){let t=new Ts(e);return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o){B(i).Y_.add(o),o.next()}(yield bs(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,o){B(i).Y_.delete(o)}(yield bs(n),t)}))}}function zV(n,e,t,r){let i=function(s,a){let c;return c=typeof s=="string"?Yb().encode(s):s,function(h,p){return new bv(h,p)}(function(h,p){if(h instanceof Uint8Array)return ib(h,p);if(h instanceof ArrayBuffer)return ib(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,Bu(e));n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){VV(yield y_(n),i,r)}))}function GV(n,e){return n.asyncQueue.enqueue(()=>R(this,null,function*(){return function(r,i){let o=B(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield m_(n),e)}))}function VS(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var sb=new Map;function v_(n,e,t){if(!t)throw new P(x.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function __(n,e,t,r){if(e===!0&&r===!0)throw new P(x.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ab(n){if(!$.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ub(n){if($.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Th(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":z()}function _e(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new P(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Th(n);throw new P(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function jS(n,e){if(e<=0)throw new P(x.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var lh=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new P(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new P(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}__("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},$i=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new P(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new zm;switch(r.type){case"firstParty":return new Qm(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new P(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return R(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=sb.get(t);r&&(k("ComponentProvider","Removing Datastore"),sb.delete(t),r.terminate())}(this),Promise.resolve()}};function US(n,e,t,r={}){var i;let o=(n=_e(n,$i))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&gn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=et.MOCK_USER;else{a=Ww(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new P(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new et(l)}n._authCredentials=new Gm(new Dd(a,c))}}var dt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Re=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new On(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},On=class n extends dt{constructor(e,t,r){super(e,t,xs(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Re(this.firestore,null,new $(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function w_(n,e,...t){if(n=Fe(n),v_("collection","path",e),n instanceof $i){let r=ve.fromString(e,...t);return ub(r),new On(n,null,r)}{if(!(n instanceof Re||n instanceof On))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ve.fromString(e,...t));return ub(r),new On(n.firestore,null,r)}}function BS(n,e){if(n=_e(n,$i),v_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new dt(n,null,function(r){return new mn(ve.emptyPath(),r)}(e))}function Hu(n,e,...t){if(n=Fe(n),arguments.length===1&&(e=Cd.newId()),v_("doc","path",e),n instanceof $i){let r=ve.fromString(e,...t);return ab(r),new Re(n,null,new $(r))}{if(!(n instanceof Re||n instanceof On))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ve.fromString(e,...t));return ab(r),new Re(n.firestore,n instanceof On?n.converter:null,new $(r))}}function I_(n,e){return n=Fe(n),e=Fe(e),(n instanceof Re||n instanceof On)&&(e instanceof Re||e instanceof On)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function E_(n,e){return n=Fe(n),e=Fe(e),n instanceof dt&&e instanceof dt&&n.firestore===e.firestore&&ju(n._query,e._query)&&n.converter===e.converter}var dh=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Nu(this,"async_queue_retry"),this.Vu=()=>{let r=Ed();r&&k("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Ed();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Ed();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new it;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return R(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Zr(e))throw e;k("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw ze("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=pv.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&z()}verifyOperationInProgress(){}wu(){return R(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function Rv(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Mv=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new it,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var $S=-1,je=class extends $i{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new dh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return R(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new dh(e),this._firestoreClient=void 0,yield e}})}};function ht(n){if(n._terminated)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||HS(n),n._firestoreClient}function HS(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,l,h){return new ry(a,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,VS(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new xv(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function qS(n,e){gn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return GS(n,p_.provider,{build:r=>new ch(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function zS(n){return R(this,null,function*(){gn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();GS(n,p_.provider,{build:t=>new Tv(t,e.cacheSizeBytes)})})}function GS(n,e,t){if((n=_e(n,je))._firestoreClient||n._terminated)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new P(x.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},HS(n)}function WS(n){if(n._initialized&&!n._terminated)throw new P(x.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new it;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>R(this,null,function*(){try{yield function(r){return R(this,null,function*(){if(!Br.D())return Promise.resolve();let i=r+"main";yield Br.delete(i)})}(n_(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function KS(n){return function(t){let r=new it;return t.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return SV(yield y_(t),r)})),r.promise}(ht(n=_e(n,je)))}function QS(n){return UV(ht(n=_e(n,je)))}function YS(n){return BV(ht(n=_e(n,je)))}function ZS(n,e){let t=ht(n=_e(n,je)),r=new Mv;return zV(t,n._databaseId,e,r),r}function JS(n,e){return GV(ht(n=_e(n,je)),e).then(t=>t?new dt(n,null,t.query):null)}var jn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ke.fromBase64String(e))}catch(t){throw new P(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ke.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var vn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new P(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ge(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ur=class{constructor(e){this._methodName=e}};var Hi=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new P(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new P(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}};var ku=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var WV=/^__.*__$/,Nv=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new yn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wr(e,this.data,t,this.fieldTransforms)}},hh=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new yn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function XS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}var fh=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ph(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(XS(this.Cu)&&WV.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},Pv=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Bu(e)}Qu(e,t,r,i=!1){return new fh({Cu:e,methodName:t,qu:r,path:Ge.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Wi(n){let e=n._freezeSettings(),t=Bu(n._databaseId);return new Pv(n._databaseId,!!e.ignoreUndefinedProperties,t)}function bh(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);T_("Data must be an object, but it was:",s,r);let a=nA(r,s),c,l;if(o.merge)c=new Wt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=Vv(e,p,t);if(!s.contains(m))throw new P(x.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);iA(h,m)||h.push(m)}c=new Wt(h),l=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=s.fieldTransforms;return new Nv(new vt(a),c,l)}var Ou=class n extends ur{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function eA(n,e,t){return new fh({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var kv=class n extends ur{_toFieldTransform(e){return new ji(e.path,new zr)}isEqual(e){return e instanceof n}},Ov=class n extends ur{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=eA(this,e,!0),r=this.Ku.map(o=>Ki(o,t)),i=new sr(r);return new ji(e.path,i)}isEqual(e){return e instanceof n&&df(this.Ku,e.Ku)}},Fv=class n extends ur{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=eA(this,e,!0),r=this.Ku.map(o=>Ki(o,t)),i=new ar(r);return new ji(e.path,i)}isEqual(e){return e instanceof n&&df(this.Ku,e.Ku)}},Lv=class n extends ur{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new Gr(e.serializer,Bb(e.serializer,this.$u));return new ji(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function D_(n,e,t,r){let i=n.Qu(1,e,t);T_("Data must be an object, but it was:",i,r);let o=[],s=vt.empty();Gi(r,(c,l)=>{let h=b_(e,c,t);l=Fe(l);let p=i.Nu(h);if(l instanceof Ou)o.push(h);else{let m=Ki(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new Wt(o);return new hh(s,a,i.fieldTransforms)}function C_(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[Vv(e,r,t)],c=[i];if(o.length%2!=0)throw new P(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(Vv(e,o[m])),c.push(o[m+1]);let l=[],h=vt.empty();for(let m=a.length-1;m>=0;--m)if(!iA(l,a[m])){let v=a[m],b=c[m];b=Fe(b);let M=s.Nu(v);if(b instanceof Ou)l.push(v);else{let N=Ki(b,M);N!=null&&(l.push(v),h.set(v,N))}}let p=new Wt(l);return new hh(h,p,s.fieldTransforms)}function tA(n,e,t,r=!1){return Ki(t,n.Qu(r?4:3,e))}function Ki(n,e){if(rA(n=Fe(n)))return T_("Unsupported field value:",e,n),nA(n,e);if(n instanceof ur)return function(r,i){if(!XS(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=Ki(a,i.Lu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Fe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Bb(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ve.fromDate(r);return{timestampValue:ys(i.serializer,o)}}if(r instanceof Ve){let o=new Ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ys(i.serializer,o)}}if(r instanceof Hi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof jn)return{bytesValue:Zb(i.serializer,r._byteString)};if(r instanceof Re){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Xv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ku)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return Jv(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Th(r)}`)}(n,e)}function nA(n,e){let t={};return Db(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gi(n,(r,i)=>{let o=Ki(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function rA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ve||n instanceof Hi||n instanceof jn||n instanceof Re||n instanceof ur||n instanceof ku)}function T_(n,e,t){if(!rA(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Th(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function Vv(n,e,t){if((e=Fe(e))instanceof vn)return e._internalPath;if(typeof e=="string")return b_(n,e);throw ph("Field path arguments must be of type string or ",n,!1,void 0,t)}var KV=new RegExp("[~\\*/\\[\\]]");function b_(n,e,t){if(e.search(KV)>=0)throw ph(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new vn(...e.split("."))._internalPath}catch{throw ph(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ph(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new P(x.INVALID_ARGUMENT,a+n+c)}function iA(n,e){return n.some(t=>t.isEqual(e))}var qi=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Re(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new jv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Sh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},jv=class extends qi{data(){return super.data()}};function Sh(n,e){return typeof e=="string"?b_(n,e):e instanceof vn?e._internalPath:e._delegate._internalPath}function oA(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new P(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Fu=class{},zi=class extends Fu{};function dr(n,e,...t){let r=[];e instanceof Fu&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof Uv).length,a=o.filter(c=>c instanceof gh).length;if(s>1||s>0&&a>0)throw new P(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var gh=class n extends zi{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return gA(e._query,t),new dt(e.firestore,e.converter,my(e._query,t))}_parse(e){let t=Wi(e.firestore);return function(o,s,a,c,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new P(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){lb(p,h);let v=[];for(let b of p)v.push(cb(c,o,b));m={arrayValue:{values:v}}}else m=cb(c,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||lb(p,h),m=tA(a,s,p,h==="in"||h==="not-in");return he.create(l,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function sA(n,e,t){let r=e,i=Sh("where",n);return gh._create(i,r,t)}var Uv=class n extends Fu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Te.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)gA(s,c),s=my(s,c)}(e._query,t),new dt(e.firestore,e.converter,my(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Bv=class n extends zi{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Li(o,s)}(e._query,this._field,this._direction);return new dt(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new mn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function aA(n,e="asc"){let t=e,r=Sh("orderBy",n);return Bv._create(r,t)}var mh=class n extends zi{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new dt(e.firestore,e.converter,kd(e._query,this._limit,this._limitType))}};function uA(n){return jS("limit",n),mh._create("limit",n,"F")}function cA(n){return jS("limitToLast",n),mh._create("limitToLast",n,"L")}var yh=class n extends zi{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=pA(e,this.type,this._docOrFields,this._inclusive);return new dt(e.firestore,e.converter,function(i,o){return new mn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function lA(...n){return yh._create("startAt",n,!0)}function dA(...n){return yh._create("startAfter",n,!1)}var vh=class n extends zi{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=pA(e,this.type,this._docOrFields,this._inclusive);return new dt(e.firestore,e.converter,function(i,o){return new mn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function hA(...n){return vh._create("endBefore",n,!1)}function fA(...n){return vh._create("endAt",n,!0)}function pA(n,e,t,r){if(t[0]=Fe(t[0]),t[0]instanceof qi)return function(o,s,a,c,l){if(!c)throw new P(x.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of cs(o))if(p.field.isKeyField())h.push(Fi(s,c.key));else{let m=c.data.field(p.field);if(wh(m))throw new P(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let v=p.field.canonicalString();throw new P(x.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}h.push(m)}return new Ln(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Wi(n.firestore);return function(s,a,c,l,h,p){let m=s.explicitOrderBy;if(h.length>m.length)throw new P(x.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let v=[];for(let b=0;b<h.length;b++){let M=h[b];if(m[b].field.isKeyField()){if(typeof M!="string")throw new P(x.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof M}`);if(!Yv(s)&&M.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${M}' contains a slash.`);let N=s.path.child(ve.fromString(M));if(!$.isDocumentKey(N))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);let U=new $(N);v.push(Fi(a,U))}else{let N=tA(c,l,M);v.push(N)}}return new Ln(v,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function cb(n,e,t){if(typeof(t=Fe(t))=="string"){if(t==="")throw new P(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Yv(e)&&t.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(ve.fromString(t));if(!$.isDocumentKey(r))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Fi(n,new $(r))}if(t instanceof Re)return Fi(n,t._key);throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Th(t)}.`)}function lb(n,e){if(!Array.isArray(n)||n.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gA(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Ss=class{convertValue(e,t="none"){switch(Oi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($r(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw z()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Gi(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Oe(s.doubleValue));return new ku(o)}convertGeoPoint(e){return new Hi(Oe(e.latitude),Oe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Kv(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(_u(e));default:return null}}convertTimestamp(e){let t=or(e);return new Ve(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ve.fromString(e);K(uS(r));let i=new Hr(r.get(1),r.get(3)),o=new $(r.popFirst(5));return i.isEqual(t)||ze(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Ah(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var $v=class extends Ss{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Re(this.firestore,null,t)}};var ir=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},sn=class extends qi{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new jr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Sh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},jr=class extends sn{data(e={}){return super.data(e)}},_n=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ir(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new jr(this._firestore,this._userDataWriter,r.key,r,new ir(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new P(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new jr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ir(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new jr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ir(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:QV(a.type),doc:c,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function QV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}function S_(n,e){return n instanceof sn&&e instanceof sn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof _n&&e instanceof _n&&n._firestore===e._firestore&&E_(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function mA(n){n=_e(n,Re);let e=_e(n.firestore,je);return FS(ht(e),n._key).then(t=>M_(e,n,t))}var cr=class extends Ss{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Re(this.firestore,null,t)}};function yA(n){n=_e(n,Re);let e=_e(n.firestore,je),t=ht(e),r=new cr(e);return $V(t,n._key).then(i=>new sn(e,r,n._key,i,new ir(i!==null&&i.hasLocalMutations,!0),n.converter))}function vA(n){n=_e(n,Re);let e=_e(n.firestore,je);return FS(ht(e),n._key,{source:"server"}).then(t=>M_(e,n,t))}function _A(n){n=_e(n,dt);let e=_e(n.firestore,je),t=ht(e),r=new cr(e);return oA(n._query),LS(t,n._query).then(i=>new _n(e,r,n,i))}function wA(n){n=_e(n,dt);let e=_e(n.firestore,je),t=ht(e),r=new cr(e);return HV(t,n._query).then(i=>new _n(e,r,n,i))}function IA(n){n=_e(n,dt);let e=_e(n.firestore,je),t=ht(e),r=new cr(e);return LS(t,n._query,{source:"server"}).then(i=>new _n(e,r,n,i))}function A_(n,e,t){n=_e(n,Re);let r=_e(n.firestore,je),i=Ah(n.converter,e,t);return ks(r,[bh(Wi(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,He.none())])}function x_(n,e,t,...r){n=_e(n,Re);let i=_e(n.firestore,je),o=Wi(i),s;return s=typeof(e=Fe(e))=="string"||e instanceof vn?C_(o,"updateDoc",n._key,e,t,r):D_(o,"updateDoc",n._key,e),ks(i,[s.toMutation(n._key,He.exists(!0))])}function EA(n){return ks(_e(n.firestore,je),[new Kr(n._key,He.none())])}function DA(n,e){let t=_e(n.firestore,je),r=Hu(n),i=Ah(n.converter,e);return ks(t,[bh(Wi(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,He.exists(!1))]).then(()=>r)}function R_(n,...e){var t,r,i;n=Fe(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Rv(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Rv(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,l,h;if(n instanceof Re)l=_e(n.firestore,je),h=xs(n._key.path),c={next:p=>{e[s]&&e[s](M_(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=_e(n,dt);l=_e(p.firestore,je),h=p._query;let m=new cr(l);c={next:v=>{e[s]&&e[s](new _n(l,m,p,v))},error:e[s+1],complete:e[s+2]},oA(n._query)}return function(m,v,b,M){let N=new Ts(M),U=new Pu(v,N,b);return m.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return s_(yield bs(m),U)})),()=>{N.Za(),m.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return a_(yield bs(m),U)}))}}(ht(l),h,a,c)}function CA(n,e){return qV(ht(n=_e(n,je)),Rv(e)?e:{next:e})}function ks(n,e){return function(r,i){let o=new it;return r.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return DV(yield y_(r),i,o)})),o.promise}(ht(n),e)}function M_(n,e,t){let r=t.docs.get(e._key),i=new cr(n);return new sn(n,i,e._key,r,new ir(t.hasPendingWrites,t.fromCache),e.converter)}var YV={maxAttempts:5};var _h=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Wi(e)}set(e,t,r){this._verifyNotCommitted();let i=Lr(e,this._firestore),o=Ah(i.converter,t,r),s=bh(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,He.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=Lr(e,this._firestore),s;return s=typeof(t=Fe(t))=="string"||t instanceof vn?C_(this._dataReader,"WriteBatch.update",o._key,t,r,i):D_(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,He.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Lr(e,this._firestore);return this._mutations=this._mutations.concat(new Kr(t._key,He.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new P(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Lr(n,e){if((n=Fe(n)).firestore!==e)throw new P(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var Hv=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Wi(t)}get(t){let r=Lr(t,this._firestore),i=new $v(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return z();let s=o[0];if(s.isFoundDocument())return new qi(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new qi(this._firestore,i,r._key,null,r.converter);throw z()})}set(t,r,i){let o=Lr(t,this._firestore),s=Ah(o.converter,r,i),a=bh(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=Lr(t,this._firestore),a;return a=typeof(r=Fe(r))=="string"||r instanceof vn?C_(this._dataReader,"Transaction.update",s._key,r,i,o):D_(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=Lr(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Lr(e,this._firestore),r=new cr(this._firestore);return super.get(e).then(i=>new sn(this._firestore,r,t._key,i._document,new ir(!1,!1),t.converter))}};function TA(n,e,t){n=_e(n,je);let r=Object.assign(Object.assign({},YV),t);return function(o){if(o.maxAttempts<1)throw new P(x.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new it;return o.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){let l=yield jV(o);new Av(o.asyncQueue,l,a,s,c).au()})),c.promise}(ht(n),i=>e(new Hv(n,i)),r)}function bA(){return new Ou("deleteField")}function SA(){return new kv("serverTimestamp")}function AA(...n){return new Ov("arrayUnion",n)}function xA(...n){return new Fv("arrayRemove",n)}function RA(n){return new Lv("increment",n)}(function(e,t=!0){(function(i){As=i})(Yw),ia(new ri("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new je(new Wm(r.getProvider("auth-internal")),new Zm(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new P(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hr(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),mr(u0,"4.7.3",e),mr(u0,"4.7.3","esm2017")})();var ZV="@firebase/firestore-compat",JV="0.3.38";function L_(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new P("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function MA(){if(typeof Uint8Array>"u")throw new P("unimplemented","Uint8Arrays are not available in this environment.")}function NA(){if(!Cb())throw new P("unimplemented","Blobs are unavailable in Firestore in this environment.")}var xh=class n{constructor(e){this._delegate=e}static fromBase64String(e){return NA(),new n(jn.fromBase64String(e))}static fromUint8Array(e){return MA(),new n(jn.fromUint8Array(e))}toBase64(){return NA(),this._delegate.toBase64()}toUint8Array(){return MA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function N_(n){return XV(n,["next","error","complete"])}function XV(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var P_=class{enableIndexedDbPersistence(e,t){return qS(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return zS(e._delegate)}clearIndexedDbPersistence(e){return WS(e._delegate)}},Rh=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Hr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&gn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){US(this._delegate,e,t,r)}enableNetwork(){return QS(this._delegate)}disableNetwork(){return YS(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,__("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return KS(this._delegate)}onSnapshotsInSync(e){return CA(this._delegate,e)}get app(){if(!this._appCompat)throw new P("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ls(this,w_(this._delegate,e))}catch(t){throw Rt(t,"collection()","Firestore.collection()")}}doc(e){try{return new Un(this,Hu(this._delegate,e))}catch(t){throw Rt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ji(this,BS(this._delegate,e))}catch(t){throw Rt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return TA(this._delegate,t=>e(new Mh(this,t)))}batch(){return ht(this._delegate),new Nh(new _h(this._delegate,e=>ks(this._delegate,e)))}loadBundle(e){return ZS(this._delegate,e)}namedQuery(e){return JS(this._delegate,e).then(t=>t?new Ji(this,t):null)}},Os=class extends Ss{constructor(e){super(),this.firestore=e}convertBytes(e){return new xh(new jn(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Un.forKey(t,this.firestore,null)}};function e2(n){db(n)}var Mh=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Os(e)}get(e){let t=Qi(e);return this._delegate.get(t).then(r=>new Yi(this._firestore,new sn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=Qi(e);return r?(L_("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Qi(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Qi(e);return this._delegate.delete(t),this}},Nh=class{constructor(e){this._delegate=e}set(e,t,r){let i=Qi(e);return r?(L_("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Qi(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Qi(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Fs=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new jr(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Zi(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new Os(e),t),i.set(t,o)),o}};Fs.INSTANCES=new WeakMap;var Un=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Os(e)}static forPath(e,t,r){if(e.length%2!==0)throw new P("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Re(t._delegate,r,new $(e)))}static forKey(e,t,r){return new n(t,new Re(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Ls(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ls(this.firestore,w_(this._delegate,e))}catch(t){throw Rt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Fe(e),e instanceof Re?I_(this._delegate,e):!1}set(e,t){t=L_("DocumentReference.set",t);try{return t?A_(this._delegate,e,t):A_(this._delegate,e)}catch(r){throw Rt(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?x_(this._delegate,e):x_(this._delegate,e,t,...r)}catch(i){throw Rt(i,"updateDoc()","DocumentReference.update()")}}delete(){return EA(this._delegate)}onSnapshot(...e){let t=PA(e),r=kA(e,i=>new Yi(this.firestore,new sn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return R_(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=yA(this._delegate):e?.source==="server"?t=vA(this._delegate):t=mA(this._delegate),t.then(r=>new Yi(this.firestore,new sn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Fs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Rt(n,e,t){return n.message=n.message.replace(e,t),n}function PA(n){for(let e of n)if(typeof e=="object"&&!N_(e))return e;return{}}function kA(n,e){var t,r;let i;return N_(n[0])?i=n[0]:N_(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Yi=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Un(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return S_(this._delegate,e._delegate)}},Zi=class extends Yi{data(e){let t=this._delegate.data(e);return this._delegate._converter||hb(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},Ji=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Os(e)}where(e,t,r){try{return new n(this.firestore,dr(this._delegate,sA(e,t,r)))}catch(i){throw Rt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,dr(this._delegate,aA(e,t)))}catch(r){throw Rt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,dr(this._delegate,uA(e)))}catch(t){throw Rt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,dr(this._delegate,cA(e)))}catch(t){throw Rt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,dr(this._delegate,lA(...e)))}catch(t){throw Rt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,dr(this._delegate,dA(...e)))}catch(t){throw Rt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,dr(this._delegate,hA(...e)))}catch(t){throw Rt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,dr(this._delegate,fA(...e)))}catch(t){throw Rt(t,"endAt()","Query.endAt()")}}isEqual(e){return E_(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=wA(this._delegate):e?.source==="server"?t=IA(this._delegate):t=_A(this._delegate),t.then(r=>new qu(this.firestore,new _n(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=PA(e),r=kA(e,i=>new qu(this.firestore,new _n(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return R_(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Fs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},k_=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Zi(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},qu=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ji(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Zi(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new k_(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Zi(this._firestore,r))})}isEqual(e){return S_(this._delegate,e._delegate)}},Ls=class n extends Ji{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Un(this.firestore,e):null}doc(e){try{return e===void 0?new Un(this.firestore,Hu(this._delegate)):new Un(this.firestore,Hu(this._delegate,e))}catch(t){throw Rt(t,"doc()","CollectionReference.doc()")}}add(e){return DA(this._delegate,e).then(t=>new Un(this.firestore,t))}isEqual(e){return I_(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Fs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Qi(n){return _e(n,Re)}var O_=class n{constructor(...e){this._delegate=new vn(...e)}static documentId(){return new n(Ge.keyField().canonicalString())}isEqual(e){return e=Fe(e),e instanceof vn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var F_=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=SA();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=bA();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=AA(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=xA(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=RA(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var t2={Firestore:Rh,GeoPoint:Hi,Timestamp:Ve,Blob:xh,Transaction:Mh,WriteBatch:Nh,DocumentReference:Un,DocumentSnapshot:Yi,Query:Ji,QueryDocumentSnapshot:Zi,QuerySnapshot:qu,CollectionReference:Ls,FieldPath:O_,FieldValue:F_,setLogLevel:e2,CACHE_SIZE_UNLIMITED:$S};function n2(n,e){n.INTERNAL.registerComponent(new ri("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},t2)))}function r2(n){n2(n,(e,t)=>new Rh(e,t,new P_)),n.registerVersion(ZV,JV)}r2(jt);function i2(n,e=ua){return new fe(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function OA(n,e){return i2(n,e)}function o2(n,e){return OA(n,e).pipe(ci(void 0),da(),G(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function U_(n,e){return OA(n,e).pipe(G(t=>({payload:t,type:"query"})))}var Ph=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=VA(r,t);return new Oh(i,o,this.afs)}snapshotChanges(){return o2(this.ref,this.afs.schedulers.outsideAngular).pipe(Ot)}valueChanges(e={}){return this.snapshotChanges().pipe(G(({payload:t})=>e.idField?xe(V({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return Ee(this.ref.get(e)).pipe(Ot)}};function kh(n,e){return U_(n,e).pipe(ci(void 0),da(),G(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=o.find(p=>p.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function FA(n,e,t){return kh(n,t).pipe(ui((r,i)=>s2(r,i.map(o=>o.payload),e),[]),Of(),G(r=>r.map(i=>({type:i.type,payload:i}))))}function s2(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=a2(n,r))}),n}function V_(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function a2(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return V_(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return V_(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return V_(n,e.oldIndex,1);break}return n}function LA(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var Oh=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=kh(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(G(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ci(void 0),da(),lt(([r,i])=>i.length>0||!r),G(([,r])=>r),Ot)}auditTrail(e){return this.stateChanges(e).pipe(ui((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=LA(e);return FA(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ot)}valueChanges(e={}){return U_(this.query,this.afs.schedulers.outsideAngular).pipe(G(t=>t.payload.docs.map(r=>e.idField?xe(V({},r.data()),{[e.idField]:r.id}):r.data())),Ot)}get(e){return Ee(this.query.get(e)).pipe(Ot)}add(e){return this.ref.add(e)}doc(e){return new Ph(this.ref.doc(e),this.afs)}},j_=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?kh(this.query,this.afs.schedulers.outsideAngular).pipe(Ot):kh(this.query,this.afs.schedulers.outsideAngular).pipe(G(t=>t.filter(r=>e.indexOf(r.type)>-1)),lt(t=>t.length>0),Ot)}auditTrail(e){return this.stateChanges(e).pipe(ui((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=LA(e);return FA(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ot)}valueChanges(e={}){return U_(this.query,this.afs.schedulers.outsideAngular).pipe(G(r=>r.payload.docs.map(i=>e.idField?V({[e.idField]:i.id},i.data()):i.data())),Ot)}get(e){return Ee(this.query.get(e)).pipe(Ot)}},u2=new W("angularfire2.enableFirestorePersistence"),c2=new W("angularfire2.firestore.persistenceSettings"),l2=new W("angularfire2.firestore.settings"),d2=new W("angularfire2.firestore.use-emulator");function VA(n,e=t=>t){return{query:e(n),ref:n}}var Lt=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,c,l,h,p,m,v,b,M,N,U,q){this.schedulers=c;let F=ru(t,a,r),Y=h;p&&Pm(F,a,m,b,M,N,v,U),[this.firestore,this.persistenceEnabled$]=dd(`${F.name}.firestore`,"AngularFirestore",F.name,()=>{let ee=a.runOutsideAngular(()=>F.firestore());if(o&&ee.settings(o),Y&&ee.useEmulator(...Y),i&&!Ei(s)){let Z=()=>{try{return Ee(ee.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),J(!1)}};return[ee,a.runOutsideAngular(Z)]}else return[ee,J(!1)]},[o,Y,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=VA(i,r),a=this.schedulers.ngZone.run(()=>o);return new Oh(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new j_(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new Ph(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(O(Qo),O(Yo,8),O(u2,8),O(l2,8),O(Pt),O(me),O(ud),O(c2,8),O(d2,8),O(o0,8),O(Sm,8),O(Am,8),O(xm,8),O(Rm,8),O(Mm,8),O(Nm,8),O(bi,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var jA=(()=>{class n{constructor(t){this.db=t,this.accesoHeader="header service running...",this.dbPath="/header",this.headerRef=t.collection(this.dbPath)}getHeader(){return this.headerRef}static{this.\u0275fac=function(r){return new(r||n)(O(Lt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var UA=(()=>{class n{constructor(t){this.headerService=t,this.header=new sd,console.log(this.headerService),this.headerService.getHeader().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.header=r[0],console.log(this.header)})}static{this.\u0275fac=function(r){return new(r||n)(Ye(jA))}}static{this.\u0275cmp=st({type:n,selectors:[["app-header"]],decls:27,vars:7,consts:[[1,"profile-row"],["colspan","3"],[1,"profile"],[1,"profile-left"],[1,"goal"],[1,"profile-photo"],["alt","Foto de perfil",3,"src"],[1,"profile-contact"]],template:function(r,i){r&1&&(se(0,"tr",0)(1,"td",1)(2,"div",2)(3,"div",3)(4,"h1"),le(5),te(),se(6,"p",4),le(7),te()(),se(8,"div",5),Ne(9,"img",6),te(),se(10,"div",7)(11,"p")(12,"strong"),le(13,"Email:"),te(),le(14),te(),se(15,"p")(16,"strong"),le(17,"Tel\xE9fono:"),te(),le(18),te(),se(19,"p")(20,"strong"),le(21,"Ubicaci\xF3n:"),te(),le(22),te(),se(23,"p")(24,"strong"),le(25,"Red Social:"),te(),le(26),te()()()()()),r&2&&(ge(5),St(i.header.name),ge(2),St(i.header.goalLife),ge(2),dg("src",i.header.photoUrl,MD),ge(5),Ze(" ",i.header.email,""),ge(4),Ze(" ",i.header.phoneNumber,""),ge(4),Ze(" ",i.header.location,""),ge(4),Ze(" ",i.header.socialNetwork,""))}})}}return n})();var BA=(()=>{class n{constructor(t){this.db=t,this.accesoWorkExperience="work experience running ....",this.dbPath="/work-experience",this.workExperienceRef=t.collection(this.dbPath)}getWorkExperience(){return this.workExperienceRef}static{this.\u0275fac=function(r){return new(r||n)(O(Lt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function g2(n,e){if(n&1&&(se(0,"ul",3)(1,"li"),le(2),se(3,"i"),le(4),te(),Ne(5,"br"),se(6,"b"),le(7),te(),Ne(8,"br"),le(9),Ne(10,"br"),se(11,"strong"),le(12,"Logros:"),te(),Ne(13,"br"),le(14),te()()),n&2){let t=e.$implicit;ge(2),hg(" ",t.startDate," - ",t.endDate," "),ge(2),St(t.location),ge(3),St(t.position),ge(2),Ze(" ",t.company," "),ge(5),Ze(" ",t.accomplishments," ")}}var $A=(()=>{class n{constructor(t){this.workExperienceService=t,this.workExperience=[],console.log(this.workExperienceService),this.workExperienceService.getWorkExperience().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.workExperience=r,console.log(this.workExperience)})}static{this.\u0275fac=function(r){return new(r||n)(Ye(BA))}}static{this.\u0275cmp=st({type:n,selectors:[["app-work-experience"]],decls:5,vars:1,consts:[[1,"work-section"],[1,"section-title"],["class","work-list",4,"ngFor","ngForOf"],[1,"work-list"]],template:function(r,i){r&1&&(se(0,"div",0)(1,"p",1)(2,"b"),le(3,"Work Experience:"),te()(),$t(4,g2,15,6,"ul",2),te()),r&2&&(ge(4),Ht("ngForOf",i.workExperience))},dependencies:[tn]})}}return n})();var HA=(()=>{class n{constructor(t){this.db=t,this.accesoEducation="education service running...",this.dbPath="/education",this.educationRef=t.collection(this.dbPath)}getEducation(){return this.educationRef}static{this.\u0275fac=function(r){return new(r||n)(O(Lt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function v2(n,e){if(n&1&&(se(0,"ul",2)(1,"li")(2,"b"),le(3),te(),Ne(4,"br"),le(5),Ne(6,"br"),le(7),te()()),n&2){let t=e.$implicit;ge(3),St(t.carrera),ge(2),Ze(" ",t.Accomplished," "),ge(2),Ze(" ",t.years," ")}}var qA=(()=>{class n{constructor(t){this.educationService=t,this.education=[],console.log(this.educationService),this.educationService.getEducation().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.education=r,console.log(this.education)})}static{this.\u0275fac=function(r){return new(r||n)(Ye(HA))}}static{this.\u0275cmp=st({type:n,selectors:[["app-education"]],decls:4,vars:1,consts:[[1,"section-title"],["class","custom-list",4,"ngFor","ngForOf"],[1,"custom-list"]],template:function(r,i){r&1&&(se(0,"p",0)(1,"b"),le(2,"Education:"),te()(),$t(3,v2,8,3,"ul",1)),r&2&&(ge(3),Ht("ngForOf",i.education))},dependencies:[tn]})}}return n})();var zA=(()=>{class n{constructor(t){this.db=t,this.accesoSkills="skill service running...",this.dbPath="/skills",this.skillsRef=t.collection(this.dbPath)}getSkills(){return this.skillsRef}static{this.\u0275fac=function(r){return new(r||n)(O(Lt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function I2(n,e){if(n&1&&(se(0,"span",3),le(1),te()),n&2){let t=e.$implicit;ge(),Ze(" ",t.skills," ")}}var GA=(()=>{class n{constructor(t){this.skillsService=t,this.skills=[],console.log(this.skillsService),this.skillsService.getSkills().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.skills=r,console.log(this.skills)})}static{this.\u0275fac=function(r){return new(r||n)(Ye(zA))}}static{this.\u0275cmp=st({type:n,selectors:[["app-skills"]],decls:5,vars:1,consts:[[1,"section-title"],[1,"skills-tags"],["class","skill-chip",4,"ngFor","ngForOf"],[1,"skill-chip"]],template:function(r,i){r&1&&(se(0,"p",0)(1,"b"),le(2,"Skills:"),te()(),se(3,"div",1),$t(4,I2,2,1,"span",2),te()),r&2&&(ge(4),Ht("ngForOf",i.skills))},dependencies:[tn]})}}return n})();var WA=(()=>{class n{constructor(t){this.db=t,this.accesoCertificates="certificates service running...",this.dbPath="/certificates",this.certificatesRef=t.collection(this.dbPath)}getCertificates(){return this.certificatesRef}static{this.\u0275fac=function(r){return new(r||n)(O(Lt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function C2(n,e){if(n&1&&(se(0,"ul",2)(1,"li"),le(2),se(3,"b"),le(4),te(),Ne(5,"br"),le(6),te()()),n&2){let t=e.$implicit;ge(2),Ze(" ",t.Accomplished," - "),ge(2),St(t.certificate),ge(2),Ze(" ",t.year," ")}}var KA=(()=>{class n{constructor(t){this.certificatesService=t,this.certificates=[],console.log(this.certificatesService),this.certificatesService.getCertificates().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.certificates=r,console.log(this.certificates)})}static{this.\u0275fac=function(r){return new(r||n)(Ye(WA))}}static{this.\u0275cmp=st({type:n,selectors:[["app-certificates"]],decls:4,vars:1,consts:[[1,"section-title"],["class","custom-list",4,"ngFor","ngForOf"],[1,"custom-list"]],template:function(r,i){r&1&&(se(0,"p",0)(1,"b"),le(2,"Certificates:"),te()(),$t(3,C2,7,3,"ul",1)),r&2&&(ge(3),Ht("ngForOf",i.certificates))},dependencies:[tn]})}}return n})();var QA=(()=>{class n{constructor(t){this.db=t,this.accesoLanguages="lenguages service running...",this.dbPath="/languages",this.languagesRef=t.collection(this.dbPath)}getLanguages(){return this.languagesRef}static{this.\u0275fac=function(r){return new(r||n)(O(Lt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function S2(n,e){if(n&1&&(se(0,"ul",2)(1,"li")(2,"b"),le(3),te(),Ne(4,"br"),le(5),te()()),n&2){let t=e.$implicit;ge(3),St(t.name),ge(2),Ze(" ",t.level," ")}}var YA=(()=>{class n{constructor(t){this.languagesService=t,this.languages=[],console.log(this.languagesService),this.languagesService.getLanguages().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.languages=r,console.log(this.languages)})}static{this.\u0275fac=function(r){return new(r||n)(Ye(QA))}}static{this.\u0275cmp=st({type:n,selectors:[["app-languages"]],decls:4,vars:1,consts:[[1,"section-title"],["class","custom-list",4,"ngFor","ngForOf"],[1,"custom-list"]],template:function(r,i){r&1&&(se(0,"p",0)(1,"b"),le(2,"Languages:"),te()(),$t(3,S2,6,2,"ul",1)),r&2&&(ge(3),Ht("ngForOf",i.languages))},dependencies:[tn]})}}return n})();var ZA=(()=>{class n{constructor(t){this.db=t,this.accesoInterests="Interests service running...",this.dbPath="/interests",this.interestsRef=t.collection(this.dbPath)}getInterests(){return this.interestsRef}static{this.\u0275fac=function(r){return new(r||n)(O(Lt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function R2(n,e){if(n&1&&(se(0,"ul",2)(1,"li"),le(2),te()()),n&2){let t=e.$implicit;ge(2),St(t.interest)}}var JA=(()=>{class n{constructor(t){this.interestsService=t,this.interests=[],console.log(this.interestsService),this.interestsService.getInterests().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.interests=r,console.log(this.interests)})}static{this.\u0275fac=function(r){return new(r||n)(Ye(ZA))}}static{this.\u0275cmp=st({type:n,selectors:[["app-interests"]],decls:4,vars:1,consts:[[1,"section-title"],["class","custom-list",4,"ngFor","ngForOf"],[1,"custom-list"]],template:function(r,i){r&1&&(se(0,"p",0)(1,"b"),le(2,"Interests:"),te()(),$t(3,R2,3,1,"ul",1)),r&2&&(ge(3),Ht("ngForOf",i.interests))},dependencies:[tn]})}}return n})();var XA=(()=>{class n{constructor(){this.title="mycv"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=st({type:n,selectors:[["app-root"]],decls:19,vars:0,consts:[["border","1"],["colspan","2"]],template:function(r,i){r&1&&(se(0,"table",0)(1,"tr")(2,"td",1),Ne(3,"app-header"),te()(),se(4,"tr")(5,"td"),Ne(6,"app-work-experience"),te(),se(7,"td"),Ne(8,"app-skills"),te()(),se(9,"tr")(10,"td"),Ne(11,"app-education"),te(),se(12,"td"),Ne(13,"app-certificates"),te()(),se(14,"tr")(15,"td"),Ne(16,"app-languages"),te(),se(17,"td"),Ne(18,"app-interests"),te()()())},dependencies:[UA,$A,qA,GA,KA,YA,JA]})}}return n})();var B_={production:!1,firebase:{apiKey:"AIzaSyACWIfp_xvlSGJZ9UUfL71EVOT8fqsGWDM",authDomain:"my-cv-giovanni.firebaseapp.com",projectId:"my-cv-giovanni",storageBucket:"my-cv-giovanni.firebasestorage.app",messagingSenderId:"722048931872",appId:"1:722048931872:web:c62627a9cbca4261518445"}};var ex=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=bt({type:n,bootstrap:[XA]})}static{this.\u0275inj=Tt({imports:[YC,HT,bm.initializeApp(B_.firebase),bm.initializeApp(B_.firebase)]})}}return n})();QC().bootstrapModule(ex,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
